{"version":3,"file":"ElderRaySeries.js","names":["ElderRaySeries","props","fillForEachBar","bind","yAccessorTop","yAccessorBullTop","yAccessorBearTop","yAccessorBullBottom","yAccessorBearBottom","yAccessorForBarBase","d","yAccessor","Math","max","bullPower","undefined","bearPower","min","xScale","yScale","y","yAccessorNumber","bullPowerFill","bearPowerFill","className","opacity","stroke","straightLineStroke","straightLineOpacity","widthRatio","clip","Component","propTypes","PropTypes","string","func","number","bool","isRequired","defaultProps"],"sources":["../../../src/lib/series/ElderRaySeries.js"],"sourcesContent":["\r\n\r\nimport React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport OverlayBarSeries from \"./OverlayBarSeries\";\r\nimport StraightLine from \"./StraightLine\";\r\n\r\nclass ElderRaySeries extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.fillForEachBar = this.fillForEachBar.bind(this);\r\n\t\tthis.yAccessorTop = this.yAccessorTop.bind(this);\r\n\t\tthis.yAccessorBullTop = this.yAccessorBullTop.bind(this);\r\n\t\tthis.yAccessorBearTop = this.yAccessorBearTop.bind(this);\r\n\t\tthis.yAccessorBullBottom = this.yAccessorBullBottom.bind(this);\r\n\t\tthis.yAccessorBearBottom = this.yAccessorBearBottom.bind(this);\r\n\t\tthis.yAccessorForBarBase = this.yAccessorForBarBase.bind(this);\r\n\t}\r\n\tyAccessorTop(d) {\r\n\t\tconst { yAccessor } = this.props;\r\n\t\treturn yAccessor(d) && Math.max(yAccessor(d).bullPower, 0);\r\n\t}\r\n\tyAccessorBullTop(d) {\r\n\t\tconst { yAccessor } = this.props;\r\n\t\treturn yAccessor(d) && (yAccessor(d).bullPower > 0 ? yAccessor(d).bullPower : undefined);\r\n\t}\r\n\tyAccessorBearTop(d) {\r\n\t\tconst { yAccessor } = this.props;\r\n\t\treturn yAccessor(d) && (yAccessor(d).bearPower > 0 ? yAccessor(d).bearPower : undefined);\r\n\t}\r\n\tyAccessorBullBottom(d) {\r\n\t\tconst { yAccessor } = this.props;\r\n\t\treturn yAccessor(d) && (yAccessor(d).bullPower < 0 ? 0 : undefined);\r\n\t}\r\n\tyAccessorBearBottom(d) {\r\n\t\tconst { yAccessor } = this.props;\r\n\t\treturn yAccessor(d) && (yAccessor(d).bullPower < 0\r\n\t\t\t\t|| yAccessor(d).bullPower * yAccessor(d).bearPower < 0 // bullPower is +ve and bearPower is -ve\r\n\t\t\t? Math.min(0, yAccessor(d).bullPower) : undefined);\r\n\t}\r\n\tyAccessorForBarBase(xScale, yScale, d) {\r\n\t\tconst { yAccessor } = this.props;\r\n\t\tconst y = yAccessor(d) && Math.min(yAccessor(d).bearPower, 0);\r\n\t\treturn yScale(y);\r\n\t}\r\n\tfillForEachBar(d, yAccessorNumber) {\r\n\t\tconst { bullPowerFill, bearPowerFill } = this.props;\r\n\t\treturn yAccessorNumber % 2 === 0 ? bullPowerFill : bearPowerFill;\r\n\t}\r\n\trender() {\r\n\t\tconst { className, opacity, stroke,\r\n\t\t\tstraightLineStroke,\r\n\t\t\tstraightLineOpacity,\r\n\t\t\twidthRatio\r\n\t\t} = this.props;\r\n\t\tconst { clip } = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<g className={className}>\r\n\t\t\t\t<OverlayBarSeries\r\n\t\t\t\t\tbaseAt={this.yAccessorForBarBase}\r\n\t\t\t\t\tclassName=\"react-stockcharts-elderray-bar\"\r\n\t\t\t\t\tstroke={stroke}\r\n\t\t\t\t\tfill={this.fillForEachBar}\r\n\t\t\t\t\topacity={opacity}\r\n\t\t\t\t\twidthRatio={widthRatio}\r\n\t\t\t\t\tclip={clip}\r\n\t\t\t\t\tyAccessor={[this.yAccessorBullTop, this.yAccessorBearTop, this.yAccessorBullBottom, this.yAccessorBearBottom]} />\r\n\t\t\t\t<StraightLine\r\n\t\t\t\t\tclassName=\"react-stockcharts-elderray-straight-line\"\r\n\t\t\t\t\tyValue={0}\r\n\t\t\t\t\tstroke={straightLineStroke}\r\n\t\t\t\t\topacity={straightLineOpacity} />\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nElderRaySeries.propTypes = {\r\n\tclassName: PropTypes.string,\r\n\tyAccessor: PropTypes.func,\r\n\topacity: PropTypes.number,\r\n\tstroke: PropTypes.bool,\r\n\tbullPowerFill: PropTypes.string,\r\n\tbearPowerFill: PropTypes.string,\r\n\tstraightLineStroke: PropTypes.string,\r\n\tstraightLineOpacity: PropTypes.number,\r\n\twidthRatio: PropTypes.number,\r\n\tclip: PropTypes.bool.isRequired,\r\n};\r\n\r\nElderRaySeries.defaultProps = {\r\n\tclassName: \"react-stockcharts-elderray-series\",\r\n\tstraightLineStroke: \"#000000\",\r\n\tstraightLineOpacity: 0.3,\r\n\topacity: 0.5,\r\n\tstroke: true,\r\n\tbullPowerFill: \"#6BA583\",\r\n\tbearPowerFill: \"#FF0000\",\r\n\twidthRatio: 0.8,\r\n\tclip: true,\r\n};\r\n\r\nexport default ElderRaySeries;\r\n"],"mappings":"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"}