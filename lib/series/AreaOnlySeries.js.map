{"version":3,"file":"AreaOnlySeries.js","names":["AreaOnlySeries","props","renderSVG","bind","drawOnCanvas","ctx","moreProps","yAccessor","defined","base","canvasGradient","fill","stroke","opacity","interpolation","canvasClip","xScale","yScale","chartConfig","plotData","xAccessor","save","fillStyle","hexToRGBA","strokeStyle","beginPath","newBase","functor","areaSeries","d3Area","d","x","Math","round","y0","y1","context","isDefined","curve","restore","style","className","newClassName","concat","getAxisCanvas","Component","propTypes","PropTypes","string","func","isRequired","number","oneOfType","object","defaultProps","isNaN","first","range"],"sources":["../../../src/lib/series/AreaOnlySeries.js"],"sourcesContent":["\r\n\r\nimport React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { area as d3Area } from \"d3-shape\";\r\n\r\nimport GenericChartComponent from \"../GenericChartComponent\";\r\nimport { getAxisCanvas } from \"../GenericComponent\";\r\n\r\nimport { hexToRGBA, isDefined, first, functor } from \"../utils\";\r\n\r\nclass AreaOnlySeries extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.renderSVG = this.renderSVG.bind(this);\r\n\t\tthis.drawOnCanvas = this.drawOnCanvas.bind(this);\r\n\t}\r\n\tdrawOnCanvas(ctx, moreProps) {\r\n\t\tconst { yAccessor, defined, base, canvasGradient } = this.props;\r\n\t\tconst { fill, stroke, opacity, interpolation, canvasClip } = this.props;\r\n\r\n\t\tconst { xScale, chartConfig: { yScale }, plotData, xAccessor } = moreProps;\r\n\r\n\t\tif (canvasClip) {\r\n\t\t\tctx.save();\r\n\t\t\tcanvasClip(ctx, moreProps);\r\n\t\t}\r\n\r\n\t\tif (canvasGradient != null) {\r\n\t\t\tctx.fillStyle = canvasGradient(moreProps, ctx);\r\n\t\t} else {\r\n\t\t\tctx.fillStyle = hexToRGBA(fill, opacity);\r\n\t\t}\r\n\t\tctx.strokeStyle = stroke;\r\n\r\n\t\tctx.beginPath();\r\n\t\tconst newBase = functor(base);\r\n\t\tconst areaSeries = d3Area()\r\n\t\t\t.defined(d => defined(yAccessor(d)))\r\n\t\t\t.x((d) => Math.round(xScale(xAccessor(d))))\r\n\t\t\t.y0((d) => newBase(yScale, d, moreProps))\r\n\t\t\t.y1((d) => Math.round(yScale(yAccessor(d))))\r\n\t\t\t.context(ctx);\r\n\r\n\t\tif (isDefined(interpolation)) {\r\n\t\t\tareaSeries.curve(interpolation);\r\n\t\t}\r\n\t\tareaSeries(plotData);\r\n\t\tctx.fill();\r\n\r\n\t\tif (canvasClip) {\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t}\r\n\trenderSVG(moreProps) {\r\n\t\tconst { yAccessor, defined, base, style } = this.props;\r\n\t\tconst { stroke, fill, className, opacity, interpolation } = this.props;\r\n\r\n\t\tconst { xScale, chartConfig: { yScale }, plotData, xAccessor } = moreProps;\r\n\r\n\t\tconst newBase = functor(base);\r\n\t\tconst areaSeries = d3Area()\r\n\t\t\t.defined(d => defined(yAccessor(d)))\r\n\t\t\t.x((d) => Math.round(xScale(xAccessor(d))))\r\n\t\t\t.y0((d) => newBase(yScale, d, moreProps))\r\n\t\t\t.y1((d) => Math.round(yScale(yAccessor(d))));\r\n\r\n\t\tif (isDefined(interpolation)) {\r\n\t\t\tareaSeries.curve(interpolation);\r\n\t\t}\r\n\r\n\t\tconst d = areaSeries(plotData);\r\n\t\tconst newClassName = className.concat(isDefined(stroke) ? \"\" : \" line-stroke\");\r\n\t\treturn (\r\n\t\t\t<path\r\n\t\t\t\tstyle={style}\r\n\t\t\t\td={d}\r\n\t\t\t\tstroke={stroke}\r\n\t\t\t\tfillRule={hexToRGBA(fill, opacity)}\r\n\t\t\t\tclassName={newClassName}\r\n\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<GenericChartComponent\r\n\t\t\t\tsvgDraw={this.renderSVG}\r\n\t\t\t\tcanvasDraw={this.drawOnCanvas}\r\n\t\t\t\tcanvasToDraw={getAxisCanvas}\r\n\t\t\t\tdrawOn={[\"pan\"]}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nAreaOnlySeries.propTypes = {\r\n\tclassName: PropTypes.string,\r\n\tyAccessor: PropTypes.func.isRequired,\r\n\tstroke: PropTypes.string,\r\n\tfill: PropTypes.string,\r\n\topacity: PropTypes.number,\r\n\tdefined: PropTypes.func,\r\n\tbase: PropTypes.oneOfType([\r\n\t\tPropTypes.func, PropTypes.number\r\n\t]),\r\n\tinterpolation: PropTypes.func,\r\n\tcanvasClip: PropTypes.func,\r\n\tstyle: PropTypes.object,\r\n\tcanvasGradient: PropTypes.func,\r\n};\r\n\r\nAreaOnlySeries.defaultProps = {\r\n\tclassName: \"line \",\r\n\tfill: \"none\",\r\n\topacity: 1,\r\n\tdefined: d => !isNaN(d),\r\n\tbase: (yScale /* , d, moreProps */) => first(yScale.range()),\r\n};\r\n\r\nexport default AreaOnlySeries;\r\n"],"mappings":"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"}