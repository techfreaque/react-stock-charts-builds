{"version":3,"file":"BarAnnotation.js","names":["BarAnnotation","props","handleClick","bind","e","onClick","xScale","yScale","datum","className","stroke","opacity","xAccessor","path","text","textXOffset","textYOffset","textAnchor","fontFamily","fontSize","textFill","textOpacity","textRotate","helper","x","y","fill","tooltip","textIcon","textIconFontSize","textIconFill","textIconOpacity","textIconRotate","textIconXOffset","textIconYOffset","Component","plotData","xFunc","functor","yFunc","xPos","yPos","getArrowForTextIcon","type","arrows","simpleUp","simpleDown","fatUp","fatDown","lightUp","lightDown","dashedUp","dashedDown","dashedRight","fatRight","right","propTypes","PropTypes","string","func","object","number","textIconAnchor","defaultProps"],"sources":["../../../src/lib/annotation/BarAnnotation.js"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { functor } from \"../utils\";\r\n\r\nclass BarAnnotation extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.handleClick = this.handleClick.bind(this);\r\n\t}\r\n\thandleClick(e) {\r\n\t\tconst { onClick } = this.props;\r\n\r\n\t\tif (onClick) {\r\n\t\t\tconst { xScale, yScale, datum } = this.props;\r\n\t\t\tonClick({ xScale, yScale, datum }, e);\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\tconst { className, stroke, opacity } = this.props;\r\n\t\tconst { xAccessor, xScale, yScale, path } = this.props;\r\n\t\tconst {\r\n\t\t\ttext,\r\n\t\t\ttextXOffset,\r\n\t\t\ttextYOffset,\r\n\t\t\ttextAnchor,\r\n\t\t\tfontFamily,\r\n\t\t\tfontSize,\r\n\t\t\ttextFill,\r\n\t\t\ttextOpacity,\r\n\t\t\ttextRotate\r\n\t\t} = this.props;\r\n\t\tconst { x, y, fill, tooltip } = helper(\r\n\t\t\tthis.props,\r\n\t\t\txAccessor,\r\n\t\t\txScale,\r\n\t\t\tyScale\r\n\t\t);\r\n\t\tconst {\r\n\t\t\ttextIcon,\r\n\t\t\ttextIconFontSize,\r\n\t\t\ttextIconFill,\r\n\t\t\ttextIconOpacity,\r\n\t\t\ttextIconRotate,\r\n\t\t\ttextIconXOffset,\r\n\t\t\ttextIconYOffset\r\n\t\t} = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<g className={className} onClick={this.handleClick}>\r\n\t\t\t\t{tooltip != null ? <title>{tooltip}</title> : null}\r\n\t\t\t\t{text != null ? (\r\n\t\t\t\t\t<text\r\n\t\t\t\t\t\tx={x}\r\n\t\t\t\t\t\ty={y}\r\n\t\t\t\t\t\tdx={textXOffset}\r\n\t\t\t\t\t\tdy={textYOffset}\r\n\t\t\t\t\t\tfontFamily={fontFamily}\r\n\t\t\t\t\t\tfontSize={fontSize}\r\n\t\t\t\t\t\tfill={textFill}\r\n\t\t\t\t\t\topacity={textOpacity}\r\n\t\t\t\t\t\ttransform={\r\n\t\t\t\t\t\t\ttextRotate != null\r\n\t\t\t\t\t\t\t\t? `rotate(${textRotate}, ${x}, ${y})`\r\n\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttextAnchor={textAnchor}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{text}\r\n\t\t\t\t\t</text>\r\n\t\t\t\t) : null}\r\n\t\t\t\t{textIcon != null ? (\r\n\t\t\t\t\t<text\r\n\t\t\t\t\t\tx={x}\r\n\t\t\t\t\t\ty={y}\r\n\t\t\t\t\t\tdx={textIconXOffset}\r\n\t\t\t\t\t\tdy={textIconYOffset}\r\n\t\t\t\t\t\tfontSize={textIconFontSize}\r\n\t\t\t\t\t\tfill={textIconFill}\r\n\t\t\t\t\t\topacity={textIconOpacity}\r\n\t\t\t\t\t\ttransform={\r\n\t\t\t\t\t\t\ttextIconRotate != null\r\n\t\t\t\t\t\t\t\t? `rotate(${textIconRotate}, ${x}, ${y})`\r\n\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttextAnchor={textAnchor}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{textIcon}\r\n\t\t\t\t\t</text>\r\n\t\t\t\t) : null}\r\n\t\t\t\t{path != null ? (\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td={path({ x, y })}\r\n\t\t\t\t\t\tstroke={stroke}\r\n\t\t\t\t\t\tfill={fill}\r\n\t\t\t\t\t\topacity={opacity}\r\n\t\t\t\t\t/>\r\n\t\t\t\t) : null}\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction helper(props, xAccessor, xScale, yScale) {\r\n\tconst { x, y, datum, fill, tooltip, plotData } = props;\r\n\r\n\tconst xFunc = functor(x);\r\n\tconst yFunc = functor(y);\r\n\r\n\tconst [xPos, yPos] = [\r\n\t\txFunc({ xScale, xAccessor, datum, plotData }),\r\n\t\tyFunc({ yScale, datum, plotData })\r\n\t];\r\n\r\n\treturn {\r\n\t\tx: xPos,\r\n\t\ty: yPos,\r\n\t\tfill: functor(fill)(datum),\r\n\t\ttooltip: functor(tooltip)(datum)\r\n\t};\r\n}\r\n\r\n/**\r\n * any unicode can be applied.\r\n * @param {any} type\r\n */\r\n\r\nexport function getArrowForTextIcon(type) {\r\n\tconst arrows = {\r\n\t\tsimpleUp: \"⬆\",\r\n\t\tsimpleDown: \"⬇\",\r\n\t\tfatUp: \"▲\",\r\n\t\tfatDown: \"▼\",\r\n\t\tlightUp: \"↑\",\r\n\t\tlightDown: \"↓\",\r\n\t\tdashedUp: \"⇡\",\r\n\t\tdashedDown: \"⇣\",\r\n\t\tdashedRight: \"➟\",\r\n\t\tfatRight: \"➡\",\r\n\t\tright: \"➤\"\r\n\t};\r\n\treturn arrows[type];\r\n}\r\n\r\nBarAnnotation.propTypes = {\r\n\tclassName: PropTypes.string,\r\n\tpath: PropTypes.func,\r\n\tonClick: PropTypes.func,\r\n\txAccessor: PropTypes.func,\r\n\txScale: PropTypes.func,\r\n\tyScale: PropTypes.func,\r\n\tdatum: PropTypes.object,\r\n\tstroke: PropTypes.string,\r\n\tfill: PropTypes.string,\r\n\topacity: PropTypes.number,\r\n\ttext: PropTypes.string,\r\n\ttextAnchor: PropTypes.string,\r\n\tfontFamily: PropTypes.string,\r\n\tfontSize: PropTypes.number,\r\n\ttextOpacity: PropTypes.number,\r\n\ttextFill: PropTypes.string,\r\n\ttextRotate: PropTypes.number,\r\n\ttextXOffset: PropTypes.number,\r\n\ttextYOffset: PropTypes.number,\r\n\ttextIcon: PropTypes.string,\r\n\ttextIconFontSize: PropTypes.number,\r\n\ttextIconOpacity: PropTypes.number,\r\n\ttextIconFill: PropTypes.string,\r\n\ttextIconRotate: PropTypes.number,\r\n\ttextIconXOffset: PropTypes.number,\r\n\ttextIconYOffset: PropTypes.number,\r\n\ttextIconAnchor: PropTypes.string\r\n};\r\n\r\nBarAnnotation.defaultProps = {\r\n\tclassName: \"react-stockcharts-bar-annotation\",\r\n\topacity: 1,\r\n\tfill: \"#000000\",\r\n\ttextAnchor: \"middle\",\r\n\tfontFamily: \"Helvetica Neue, Helvetica, Arial, sans-serif\",\r\n\tfontSize: 10,\r\n\ttextFill: \"#000000\",\r\n\ttextOpacity: 1,\r\n\ttextIconFill: \"#000000\",\r\n\ttextIconFontSize: 10,\r\n\tx: ({ xScale, xAccessor, datum }) => xScale(xAccessor(datum))\r\n};\r\n\r\nexport default BarAnnotation;\r\n"],"mappings":"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"}