{"version":3,"file":"DrawingObjectSelector.js","names":["DrawingObjectSelector","props","handleClick","bind","handleDoubleClick","getInteraction","moreProps","e","preventDefault","onDoubleClick","enabled","interactives","allSelected","getSelected","length","selected","head","item","type","chartId","object","objects","morePropsForChart","getMorePropsForChart","onSelect","getInteractiveNodes","drawingObjectMap","interactiveNodes","mapObject","each","key","valueArray","isDefined","node","undefined","valuePresent","Array","isArray","getSelectionState","noop","getMouseCanvas","Component","propTypes","PropTypes","func","isRequired","bool","defaultProps"],"sources":["../../../src/lib/interactive/DrawingObjectSelector.js"],"sourcesContent":["\r\n\r\nimport React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { isDefined, noop, mapObject, head } from \"../utils\";\r\nimport { getMorePropsForChart, getSelected } from \"./utils\";\r\n\r\nimport GenericComponent, { getMouseCanvas } from \"../GenericComponent\";\r\n\r\nclass DrawingObjectSelector extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.handleClick = this.handleClick.bind(this);\r\n\t\tthis.handleDoubleClick = this.handleDoubleClick.bind(this);\r\n\t\tthis.getInteraction = this.getInteraction.bind(this);\r\n\t}\r\n\thandleDoubleClick(moreProps, e) {\r\n\t\te.preventDefault();\r\n\t\tconst { onDoubleClick } = this.props;\r\n\t\tconst { enabled } = this.props;\r\n\t\tif (!enabled) return;\r\n\r\n\t\tconst interactives = this.getInteraction(moreProps);\r\n\t\tconst allSelected = getSelected(interactives);\r\n\r\n\t\t// console.log(selected, interactives)\r\n\t\tif (allSelected.length > 0) {\r\n\t\t\tconst selected = head(allSelected);\r\n\t\t\tconst item = {\r\n\t\t\t\ttype: selected.type,\r\n\t\t\t\tchartId: selected.chartId,\r\n\t\t\t\tobject: head(selected.objects)\r\n\t\t\t};\r\n\t\t\tconst morePropsForChart = getMorePropsForChart(\r\n\t\t\t\tmoreProps, selected.chartId\r\n\t\t\t);\r\n\t\t\tonDoubleClick(item, morePropsForChart);\r\n\t\t}\r\n\t}\r\n\thandleClick(moreProps, e) {\r\n\t\te.preventDefault();\r\n\t\tconst { onSelect } = this.props;\r\n\t\tconst { enabled } = this.props;\r\n\t\tif (!enabled) return;\r\n\r\n\t\tconst interactives = this.getInteraction(moreProps);\r\n\r\n\t\tonSelect(interactives, moreProps);\r\n\t}\r\n\tgetInteraction(moreProps) {\r\n\t\tconst { getInteractiveNodes, drawingObjectMap } = this.props;\r\n\t\tconst interactiveNodes = getInteractiveNodes();\r\n\t\tconst interactives = mapObject(interactiveNodes, each => {\r\n\t\t\tconst key = drawingObjectMap[each.type];\r\n\r\n\t\t\tconst valueArray = isDefined(key)\r\n\t\t\t\t? each.node.props[key]\r\n\t\t\t\t: undefined;\r\n\r\n\t\t\tconst valuePresent = isDefined(valueArray)\r\n\t\t\t\t&& Array.isArray(valueArray)\r\n\t\t\t\t&& valueArray.length > 0;\r\n\t\t\tif (valuePresent) {\r\n\t\t\t\t// console.log(\"Value present for \", each.type, each.chartId);\r\n\t\t\t\tconst morePropsForChart = getMorePropsForChart(\r\n\t\t\t\t\tmoreProps, each.chartId\r\n\t\t\t\t);\r\n\r\n\t\t\t\tconst objects = each.node.getSelectionState(morePropsForChart);\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttype: each.type,\r\n\t\t\t\t\tchartId: each.chartId,\r\n\t\t\t\t\tobjects,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\ttype: each.type,\r\n\t\t\t\tchartId: each.chartId,\r\n\t\t\t\tobjects: [],\r\n\t\t\t};\r\n\t\t});\r\n\r\n\t\treturn interactives;\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<GenericComponent\r\n\t\t\t\tsvgDraw={noop}\r\n\t\t\t\tcanvasToDraw={getMouseCanvas}\r\n\t\t\t\tcanvasDraw={noop}\r\n\r\n\t\t\t\tonMouseDown={this.handleClick}\r\n\t\t\t\tonDoubleClick={this.handleDoubleClick}\r\n\r\n\t\t\t\tdrawOn={[\"mousemove\", \"pan\", \"drag\"]}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\nDrawingObjectSelector.propTypes = {\r\n\tgetInteractiveNodes: PropTypes.func.isRequired,\r\n\tonSelect: PropTypes.func.isRequired,\r\n\tonDoubleClick: PropTypes.func.isRequired,\r\n\tdrawingObjectMap: PropTypes.object.isRequired,\r\n\tenabled: PropTypes.bool.isRequired,\r\n};\r\n\r\nDrawingObjectSelector.defaultProps = {\r\n\tenabled: true,\r\n\tonDoubleClick: noop,\r\n};\r\n\r\nexport default DrawingObjectSelector;\r\n"],"mappings":"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"}