{"version":3,"file":"EachLinearRegressionChannel.js","names":["EachLinearRegressionChannel","props","handleEdge1Drag","bind","handleEdge2Drag","handleHover","isHover","saveNodeType","nodes","state","hover","moreProps","index","onDrag","snapTo","x2Value","getNewXY","x1Value","hovering","setState","appearance","edgeInteractiveCursor","hoverText","interactive","selected","onDragComplete","stroke","strokeWidth","strokeOpacity","fill","fillOpacity","r","edgeStrokeWidth","edgeFill","edgeStroke","hoverHandler","onHover","onUnHover","hoverTextEnabled","enable","hoverTextSelected","selectedText","hoverTextUnselected","text","restHoverTextProps","edge1Provider","edge2Provider","Component","xScale","xAccessor","plotData","mouseXY","currentItem","getCurrentItem","x","y","propTypes","defaultClassName","PropTypes","string","any","isRequired","number","shape","func","bool","object","defaultProps","noop","HoverTextNearMouse","bgHeight","bgWidth"],"sources":["../../../../src/lib/interactive/wrapper/EachLinearRegressionChannel.js"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { noop } from \"../../utils\";\r\nimport { getCurrentItem } from \"../../utils/ChartDataUtil\";\r\nimport { saveNodeType, isHover } from \"../utils\";\r\n\r\nimport HoverTextNearMouse from \"../components/HoverTextNearMouse\";\r\nimport {\r\n\tdefault as LinearRegressionChannelWithArea,\r\n\tedge1Provider,\r\n\tedge2Provider\r\n} from \"../components/LinearRegressionChannelWithArea\";\r\n\r\nimport ClickableCircle from \"../components/ClickableCircle\";\r\n\r\nclass EachLinearRegressionChannel extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.handleEdge1Drag = this.handleEdge1Drag.bind(this);\r\n\t\tthis.handleEdge2Drag = this.handleEdge2Drag.bind(this);\r\n\r\n\t\tthis.handleHover = this.handleHover.bind(this);\r\n\r\n\t\tthis.isHover = isHover.bind(this);\r\n\t\tthis.saveNodeType = saveNodeType.bind(this);\r\n\t\tthis.nodes = {};\r\n\r\n\t\tthis.state = {\r\n\t\t\thover: false,\r\n\t\t};\r\n\t}\r\n\thandleEdge1Drag(moreProps) {\r\n\t\tconst { index, onDrag, snapTo } = this.props;\r\n\t\tconst {\r\n\t\t\tx2Value,\r\n\t\t} = this.props;\r\n\r\n\t\tconst [x1Value] = getNewXY(moreProps, snapTo);\r\n\r\n\t\tonDrag(index, {\r\n\t\t\tx1Value,\r\n\t\t\tx2Value,\r\n\t\t});\r\n\t}\r\n\thandleEdge2Drag(moreProps) {\r\n\t\tconst { index, onDrag, snapTo } = this.props;\r\n\t\tconst {\r\n\t\t\tx1Value,\r\n\t\t} = this.props;\r\n\r\n\t\tconst [x2Value] = getNewXY(moreProps, snapTo);\r\n\r\n\t\tonDrag(index, {\r\n\t\t\tx1Value,\r\n\t\t\tx2Value,\r\n\t\t});\r\n\t}\r\n\thandleHover(moreProps) {\r\n\t\tif (this.state.hover !== moreProps.hovering) {\r\n\t\t\tthis.setState({\r\n\t\t\t\thover: moreProps.hovering\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tx1Value,\r\n\t\t\tx2Value,\r\n\t\t\tappearance,\r\n\t\t\tedgeInteractiveCursor,\r\n\t\t\thoverText,\r\n\t\t\tinteractive,\r\n\t\t\tselected,\r\n\t\t\tonDragComplete,\r\n\t\t} = this.props;\r\n\t\tconst {\r\n\t\t\tstroke,\r\n\t\t\tstrokeWidth,\r\n\t\t\tstrokeOpacity,\r\n\t\t\tfill,\r\n\t\t\tfillOpacity,\r\n\t\t\tr,\r\n\t\t\tedgeStrokeWidth,\r\n\t\t\tedgeFill,\r\n\t\t\tedgeStroke,\r\n\t\t} = appearance;\r\n\t\tconst { hover } = this.state;\r\n\r\n\t\tconst hoverHandler = interactive\r\n\t\t\t? { onHover: this.handleHover, onUnHover: this.handleHover }\r\n\t\t\t: {};\r\n\r\n\t\tconst {\r\n\t\t\tenable: hoverTextEnabled,\r\n\t\t\tselectedText: hoverTextSelected,\r\n\t\t\ttext: hoverTextUnselected,\r\n\t\t\t...restHoverTextProps\r\n\t\t} = hoverText;\r\n\r\n\t\treturn <g>\r\n\t\t\t<LinearRegressionChannelWithArea\r\n\t\t\t\tref={this.saveNodeType(\"area\")}\r\n\t\t\t\tselected={selected || hover}\r\n\t\t\t\t{...hoverHandler}\r\n\r\n\t\t\t\tx1Value={x1Value}\r\n\t\t\t\tx2Value={x2Value}\r\n\t\t\t\tfill={fill}\r\n\t\t\t\tstroke={stroke}\r\n\t\t\t\tstrokeWidth={(hover || selected) ? strokeWidth + 1 : strokeWidth}\r\n\t\t\t\tstrokeOpacity={strokeOpacity}\r\n\t\t\t\tfillOpacity={fillOpacity} />\r\n\t\t\t<ClickableCircle\r\n\t\t\t\tref={this.saveNodeType(\"edge1\")}\r\n\t\t\t\tshow={selected || hover}\r\n\t\t\t\txyProvider={edge1Provider(this.props)}\r\n\t\t\t\tr={r}\r\n\t\t\t\tfill={edgeFill}\r\n\t\t\t\tstroke={edgeStroke}\r\n\t\t\t\tstrokeWidth={edgeStrokeWidth}\r\n\t\t\t\tinteractiveCursorClass={edgeInteractiveCursor}\r\n\t\t\t\tonDrag={this.handleEdge1Drag}\r\n\t\t\t\tonDragComplete={onDragComplete} />\r\n\t\t\t<ClickableCircle\r\n\t\t\t\tref={this.saveNodeType(\"edge2\")}\r\n\t\t\t\tshow={selected || hover}\r\n\t\t\t\txyProvider={edge2Provider(this.props)}\r\n\t\t\t\tr={r}\r\n\t\t\t\tfill={edgeFill}\r\n\t\t\t\tstroke={edgeStroke}\r\n\t\t\t\tstrokeWidth={edgeStrokeWidth}\r\n\t\t\t\tinteractiveCursorClass={edgeInteractiveCursor}\r\n\t\t\t\tonDrag={this.handleEdge2Drag}\r\n\t\t\t\tonDragComplete={onDragComplete} />\r\n\t\t\t<HoverTextNearMouse\r\n\t\t\t\tshow={hoverTextEnabled && hover}\r\n\t\t\t\t{...restHoverTextProps}\r\n\t\t\t\ttext={selected ? hoverTextSelected : hoverTextUnselected}\r\n\t\t\t/>\r\n\t\t</g>;\r\n\t}\r\n}\r\n\r\nexport function getNewXY(moreProps, snapTo) {\r\n\tconst { xScale, xAccessor, plotData, mouseXY } = moreProps;\r\n\r\n\tconst currentItem = getCurrentItem(xScale, xAccessor, mouseXY, plotData);\r\n\tconst x = xAccessor(currentItem);\r\n\tconst y = snapTo(currentItem);\r\n\r\n\treturn [x, y];\r\n}\r\n\r\nEachLinearRegressionChannel.propTypes = {\r\n\tdefaultClassName: PropTypes.string,\r\n\r\n\tx1Value: PropTypes.any.isRequired,\r\n\tx2Value: PropTypes.any.isRequired,\r\n\r\n\tindex: PropTypes.number,\r\n\r\n\tappearance: PropTypes.shape({\r\n\t\tstroke: PropTypes.string.isRequired,\r\n\t\tfillOpacity: PropTypes.number.isRequired,\r\n\t\tstrokeOpacity: PropTypes.number.isRequired,\r\n\t\tstrokeWidth: PropTypes.number.isRequired,\r\n\t\tfill: PropTypes.string.isRequired,\r\n\t\tedgeStrokeWidth: PropTypes.number.isRequired,\r\n\t\tedgeStroke: PropTypes.string.isRequired,\r\n\t\tedgeFill: PropTypes.string.isRequired,\r\n\t\tr: PropTypes.number.isRequired,\r\n\t}).isRequired,\r\n\r\n\tedgeInteractiveCursor: PropTypes.string,\r\n\tonDrag: PropTypes.func.isRequired,\r\n\tonDragComplete: PropTypes.func.isRequired,\r\n\tsnapTo: PropTypes.func,\r\n\tinteractive: PropTypes.bool.isRequired,\r\n\tselected: PropTypes.bool.isRequired,\r\n\r\n\thoverText: PropTypes.object.isRequired,\r\n};\r\n\r\nEachLinearRegressionChannel.defaultProps = {\r\n\tonDrag: noop,\r\n\tonDragComplete: noop,\r\n\r\n\tappearance: {\r\n\t\tstroke: \"#000000\",\r\n\t\tfillOpacity: 0.7,\r\n\t\tstrokeOpacity: 1,\r\n\t\tstrokeWidth: 1,\r\n\t\tfill: \"#8AAFE2\",\r\n\t\tedgeStrokeWidth: 2,\r\n\t\tedgeStroke: \"#000000\",\r\n\t\tedgeFill: \"#FFFFFF\",\r\n\t\tr: 5,\r\n\t},\r\n\tinteractive: true,\r\n\tselected: false,\r\n\thoverText: {\r\n\t\t...HoverTextNearMouse.defaultProps,\r\n\t\tenable: true,\r\n\t\tbgHeight: 18,\r\n\t\tbgWidth: 175,\r\n\t\ttext: \"Click and drag the edge circles\",\r\n\t}\r\n};\r\n\r\nexport default EachLinearRegressionChannel;"],"mappings":"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"}