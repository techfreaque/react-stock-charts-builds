{"version":3,"file":"EachInteractiveYCoordinate.js","names":["EachInteractiveYCoordinate","props","handleHover","bind","handleCloseIconHover","handleDragStart","handleDrag","handleDelete","isHover","saveNodeType","nodes","state","hover","closeIconHover","moreProps","yValue","mouseXY","yScale","chartConfig","mouseY","dy","dragStartPosition","index","onDrag","newYValue","invert","onDelete","hovering","setState","bgFill","bgOpacity","textFill","fontFamily","fontSize","fontWeight","fontStyle","text","selected","onDragComplete","stroke","strokeOpacity","strokeDasharray","strokeWidth","edge","textBox","draggable","hoverHandler","onHover","onUnHover","dragProps","onDragStart","Component","propTypes","PropTypes","number","bool","isRequired","string","object","func","defaultProps","noop","opacity","fill"],"sources":["../../../../src/lib/interactive/wrapper/EachInteractiveYCoordinate.js"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { noop } from \"../../utils\";\r\nimport { saveNodeType, isHover } from \"../utils\";\r\n\r\nimport ClickableShape from \"../components/ClickableShape\";\r\nimport InteractiveYCoordinate from \"../components/InteractiveYCoordinate\";\r\n\r\nclass EachInteractiveYCoordinate extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.handleHover = this.handleHover.bind(this);\r\n\t\tthis.handleCloseIconHover = this.handleCloseIconHover.bind(this);\r\n\r\n\t\tthis.handleDragStart = this.handleDragStart.bind(this);\r\n\t\tthis.handleDrag = this.handleDrag.bind(this);\r\n\r\n\t\tthis.handleDelete = this.handleDelete.bind(this);\r\n\r\n\t\tthis.isHover = isHover.bind(this);\r\n\t\tthis.saveNodeType = saveNodeType.bind(this);\r\n\t\tthis.nodes = {};\r\n\r\n\t\tthis.state = {\r\n\t\t\thover: false,\r\n\t\t\tcloseIconHover: false,\r\n\t\t};\r\n\t}\r\n\thandleDragStart(moreProps) {\r\n\t\tconst {\r\n\t\t\tyValue,\r\n\t\t} = this.props;\r\n\t\tconst { mouseXY } = moreProps;\r\n\t\tconst { chartConfig: { yScale } } = moreProps;\r\n\t\tconst [, mouseY] = mouseXY;\r\n\r\n\t\tconst dy = mouseY - yScale(yValue);\r\n\r\n\t\tthis.dragStartPosition = {\r\n\t\t\tyValue, dy\r\n\t\t};\r\n\t}\r\n\thandleDrag(moreProps) {\r\n\t\tconst { index, onDrag } = this.props;\r\n\t\tconst {\r\n\t\t\tmouseXY: [, mouseY],\r\n\t\t\tchartConfig: { yScale },\r\n\t\t} = moreProps;\r\n\r\n\t\tconst { dy } = this.dragStartPosition;\r\n\r\n\t\tconst newYValue = yScale.invert(mouseY - dy);\r\n\r\n\t\tonDrag(index, newYValue);\r\n\t}\r\n\thandleDelete(moreProps) {\r\n\t\tconst { index, onDelete } = this.props;\r\n\t\tonDelete(index, moreProps);\r\n\t}\r\n\thandleHover(moreProps) {\r\n\t\tif (this.state.hover !== moreProps.hovering) {\r\n\t\t\tthis.setState({\r\n\t\t\t\thover: moreProps.hovering,\r\n\t\t\t\tcloseIconHover: moreProps.hovering ? this.state.closeIconHover : false\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\thandleCloseIconHover(moreProps) {\r\n\t\tif (this.state.closeIconHover !== moreProps.hovering) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tcloseIconHover: moreProps.hovering\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tyValue,\r\n\t\t\tbgFill,\r\n\t\t\tbgOpacity,\r\n\t\t\ttextFill,\r\n\t\t\tfontFamily,\r\n\t\t\tfontSize,\r\n\t\t\tfontWeight,\r\n\t\t\tfontStyle,\r\n\t\t\ttext,\r\n\t\t\t// hoverText,\r\n\t\t\tselected,\r\n\t\t\tonDragComplete,\r\n\t\t\tstroke,\r\n\t\t\tstrokeOpacity,\r\n\t\t\tstrokeDasharray,\r\n\t\t\tstrokeWidth,\r\n\t\t\tedge,\r\n\t\t\ttextBox,\r\n\t\t\tdraggable,\r\n\t\t} = this.props;\r\n\t\tconst { hover, closeIconHover } = this.state;\r\n\r\n\t\tconst hoverHandler = {\r\n\t\t\tonHover: this.handleHover,\r\n\t\t\tonUnHover: this.handleHover\r\n\t\t};\r\n\r\n\t\tconst dragProps = draggable\r\n\t\t\t? {\r\n\t\t\t\tonDragStart: this.handleDragStart,\r\n\t\t\t\tonDrag: this.handleDrag,\r\n\t\t\t\tonDragComplete: onDragComplete,\r\n\t\t\t}\r\n\t\t\t: {};\r\n\t\treturn (\r\n\t\t\t<g>\r\n\t\t\t\t<InteractiveYCoordinate\r\n\t\t\t\t\tref={this.saveNodeType(\"priceCoordinate\")}\r\n\t\t\t\t\tselected={selected && !closeIconHover}\r\n\t\t\t\t\thovering={hover || closeIconHover}\r\n\t\t\t\t\tinteractiveCursorClass=\"react-stockcharts-move-cursor\"\r\n\t\t\t\t\t{...hoverHandler}\r\n\r\n\t\t\t\t\t{...dragProps}\r\n\r\n\t\t\t\t\tyValue={yValue}\r\n\t\t\t\t\tbgFill={bgFill}\r\n\t\t\t\t\tbgOpacity={bgOpacity}\r\n\t\t\t\t\ttextFill={textFill}\r\n\t\t\t\t\tfontFamily={fontFamily}\r\n\t\t\t\t\tfontStyle={fontStyle}\r\n\t\t\t\t\tfontWeight={fontWeight}\r\n\t\t\t\t\tfontSize={fontSize}\r\n\t\t\t\t\tstroke={stroke}\r\n\t\t\t\t\tstrokeOpacity={strokeOpacity}\r\n\t\t\t\t\tstrokeDasharray={strokeDasharray}\r\n\t\t\t\t\tstrokeWidth={strokeWidth}\r\n\t\t\t\t\ttext={text}\r\n\t\t\t\t\ttextBox={textBox}\r\n\t\t\t\t\tedge={edge}\r\n\t\t\t\t/>\r\n\t\t\t\t<ClickableShape\r\n\t\t\t\t\tshow\r\n\t\t\t\t\thovering={closeIconHover}\r\n\t\t\t\t\ttext={text}\r\n\t\t\t\t\tyValue={yValue}\r\n\t\t\t\t\tfontFamily={fontFamily}\r\n\t\t\t\t\tfontStyle={fontStyle}\r\n\t\t\t\t\tfontWeight={fontWeight}\r\n\t\t\t\t\tfontSize={fontSize}\r\n\t\t\t\t\ttextBox={textBox}\r\n\r\n\t\t\t\t\tstroke={stroke}\r\n\t\t\t\t\tstrokeOpacity={strokeOpacity}\r\n\r\n\t\t\t\t\tonHover={this.handleCloseIconHover}\r\n\t\t\t\t\tonUnHover={this.handleCloseIconHover}\r\n\t\t\t\t\tonClick={this.handleDelete}\r\n\t\t\t\t/>\r\n\t\t\t\t{/* <HoverTextNearMouse\r\n\t\t\t\t\tshow={hoverTextEnabled && hover && !selected}\r\n\t\t\t\t\t{...restHoverTextProps}\r\n\t\t\t\t/> */}\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nEachInteractiveYCoordinate.propTypes = {\r\n\tindex: PropTypes.number,\r\n\r\n\tdraggable: PropTypes.bool.isRequired,\r\n\tyValue: PropTypes.number.isRequired,\r\n\r\n\tbgFill: PropTypes.string.isRequired,\r\n\tbgOpacity: PropTypes.number.isRequired,\r\n\tstroke: PropTypes.string.isRequired,\r\n\tstrokeWidth: PropTypes.number.isRequired,\r\n\tstrokeOpacity: PropTypes.number.isRequired,\r\n\tstrokeDasharray: PropTypes.string.isRequired,\r\n\ttextFill: PropTypes.string.isRequired,\r\n\r\n\tfontWeight: PropTypes.string.isRequired,\r\n\tfontFamily: PropTypes.string.isRequired,\r\n\tfontStyle: PropTypes.string.isRequired,\r\n\tfontSize: PropTypes.number.isRequired,\r\n\r\n\ttext: PropTypes.string.isRequired,\r\n\tselected: PropTypes.bool.isRequired,\r\n\r\n\tedge: PropTypes.object.isRequired,\r\n\ttextBox: PropTypes.object.isRequired,\r\n\r\n\tonDrag: PropTypes.func.isRequired,\r\n\tonDragComplete: PropTypes.func.isRequired,\r\n\tonDelete: PropTypes.func.isRequired,\r\n};\r\n\r\nEachInteractiveYCoordinate.defaultProps = {\r\n\tonDrag: noop,\r\n\tonDragComplete: noop,\r\n\r\n\tstrokeWidth: 1,\r\n\topacity: 1,\r\n\tselected: false,\r\n\tfill: \"#FFFFFF\",\r\n\tdraggable: false,\r\n};\r\n\r\nexport default EachInteractiveYCoordinate;"],"mappings":"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"}