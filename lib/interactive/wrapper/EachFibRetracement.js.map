{"version":3,"file":"EachFibRetracement.js","names":["EachFibRetracement","props","handleEdge1Drag","bind","handleEdge2Drag","handleLineNSResizeTop","handleLineNSResizeBottom","handleLineMove","handleLineDragStart","handleHover","isHover","saveNodeType","nodes","state","hover","moreProps","hovering","setState","x1","y1","x2","y2","dragStart","index","onDrag","x1Value","y1Value","x2Value","y2Value","xScale","yScale","chartConfig","xAccessor","fullData","startPos","mouseXY","dx","dy","newX1Value","getXValue","newY1Value","invert","newX2Value","newY2Value","getNewXY","interactive","yDisplayFormat","type","appearance","stroke","strokeWidth","strokeOpacity","fontFamily","fontSize","fontFill","edgeStroke","edgeFill","nsEdgeFill","edgeStrokeWidth","r","hoverText","selected","onDragComplete","lines","helper","hoverTextEnabled","enable","hoverTextSelected","selectedText","hoverTextUnselected","text","restHoverTextProps","lineType","dir","head","last","map","line","j","y","percent","toFixed","xyProvider","generateLine","start","end","x","Math","min","firstOrLast","length","interactiveCursorClass","interactiveEdgeCursorClass","dragHandler","edge1DragHandler","edge2DragHandler","hoverHandler","onHover","onUnHover","Component","retracements","each","propTypes","PropTypes","any","isRequired","number","func","string","bool","shape","object","defaultProps","d","noop"],"sources":["../../../../src/lib/interactive/wrapper/EachFibRetracement.js"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { head, last, noop } from \"../../utils\";\r\nimport { getXValue } from \"../../utils/ChartDataUtil\";\r\nimport { saveNodeType, isHover } from \"../utils\";\r\n\r\nimport { getNewXY } from \"./EachTrendLine\";\r\nimport StraightLine, { generateLine } from \"../components/StraightLine\";\r\nimport ClickableCircle from \"../components/ClickableCircle\";\r\nimport HoverTextNearMouse from \"../components/HoverTextNearMouse\";\r\nimport Text from \"../components/Text\";\r\n\r\nclass EachFibRetracement extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.handleEdge1Drag = this.handleEdge1Drag.bind(this);\r\n\t\tthis.handleEdge2Drag = this.handleEdge2Drag.bind(this);\r\n\r\n\t\tthis.handleLineNSResizeTop = this.handleLineNSResizeTop.bind(this);\r\n\t\tthis.handleLineNSResizeBottom = this.handleLineNSResizeBottom.bind(this);\r\n\t\tthis.handleLineMove = this.handleLineMove.bind(this);\r\n\r\n\t\tthis.handleLineDragStart = this.handleLineDragStart.bind(this);\r\n\r\n\t\tthis.handleHover = this.handleHover.bind(this);\r\n\r\n\t\tthis.isHover = isHover.bind(this);\r\n\t\tthis.saveNodeType = saveNodeType.bind(this);\r\n\t\tthis.nodes = {};\r\n\r\n\t\tthis.state = {\r\n\t\t\thover: false,\r\n\t\t};\r\n\t}\r\n\thandleHover(moreProps) {\r\n\t\tif (this.state.hover !== moreProps.hovering) {\r\n\t\t\tthis.setState({\r\n\t\t\t\thover: moreProps.hovering\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\thandleLineDragStart() {\r\n\t\tconst {\r\n\t\t\tx1, y1, x2, y2,\r\n\t\t} = this.props;\r\n\r\n\t\tthis.dragStart = {\r\n\t\t\tx1, y1, x2, y2,\r\n\t\t};\r\n\t}\r\n\thandleLineMove(moreProps) {\r\n\t\tconst { index, onDrag } = this.props;\r\n\r\n\t\tconst {\r\n\t\t\tx1: x1Value, y1: y1Value, x2: x2Value, y2: y2Value,\r\n\t\t} = this.dragStart;\r\n\r\n\t\tconst { xScale, chartConfig: { yScale }, xAccessor, fullData } = moreProps;\r\n\t\tconst { startPos, mouseXY } = moreProps;\r\n\r\n\t\tconst x1 = xScale(x1Value);\r\n\t\tconst y1 = yScale(y1Value);\r\n\t\tconst x2 = xScale(x2Value);\r\n\t\tconst y2 = yScale(y2Value);\r\n\r\n\t\tconst dx = startPos[0] - mouseXY[0];\r\n\t\tconst dy = startPos[1] - mouseXY[1];\r\n\r\n\t\tconst newX1Value = getXValue(xScale, xAccessor, [x1 - dx, y1 - dy], fullData);\r\n\t\tconst newY1Value = yScale.invert(y1 - dy);\r\n\t\tconst newX2Value = getXValue(xScale, xAccessor, [x2 - dx, y2 - dy], fullData);\r\n\t\tconst newY2Value = yScale.invert(y2 - dy);\r\n\r\n\t\tonDrag(index, {\r\n\t\t\tx1: newX1Value,\r\n\t\t\ty1: newY1Value,\r\n\t\t\tx2: newX2Value,\r\n\t\t\ty2: newY2Value,\r\n\t\t});\r\n\t}\r\n\thandleLineNSResizeTop(moreProps) {\r\n\t\tconst { index, onDrag } = this.props;\r\n\t\tconst {\r\n\t\t\tx1, x2, y2,\r\n\t\t} = this.props;\r\n\r\n\t\tconst [, y1] = getNewXY(moreProps);\r\n\r\n\t\tonDrag(index, {\r\n\t\t\tx1,\r\n\t\t\ty1,\r\n\t\t\tx2,\r\n\t\t\ty2,\r\n\t\t});\r\n\t}\r\n\thandleLineNSResizeBottom(moreProps) {\r\n\t\tconst { index, onDrag } = this.props;\r\n\t\tconst {\r\n\t\t\tx1, y1, x2,\r\n\t\t} = this.props;\r\n\r\n\t\tconst [, y2] = getNewXY(moreProps);\r\n\r\n\t\tonDrag(index, {\r\n\t\t\tx1,\r\n\t\t\ty1,\r\n\t\t\tx2,\r\n\t\t\ty2,\r\n\t\t});\r\n\t}\r\n\thandleEdge1Drag(moreProps) {\r\n\t\tconst { index, onDrag } = this.props;\r\n\t\tconst {\r\n\t\t\ty1, x2, y2,\r\n\t\t} = this.props;\r\n\r\n\t\tconst [x1] = getNewXY(moreProps);\r\n\r\n\t\tonDrag(index, {\r\n\t\t\tx1,\r\n\t\t\ty1,\r\n\t\t\tx2,\r\n\t\t\ty2,\r\n\t\t});\r\n\t}\r\n\thandleEdge2Drag(moreProps) {\r\n\t\tconst { index, onDrag } = this.props;\r\n\t\tconst {\r\n\t\t\tx1, y1, y2,\r\n\t\t} = this.props;\r\n\r\n\t\tconst [x2] = getNewXY(moreProps);\r\n\r\n\t\tonDrag(index, {\r\n\t\t\tx1,\r\n\t\t\ty1,\r\n\t\t\tx2,\r\n\t\t\ty2,\r\n\t\t});\r\n\t}\r\n\trender() {\r\n\t\tconst { x1, x2, y1, y2 } = this.props;\r\n\t\tconst { interactive, yDisplayFormat, type, appearance } = this.props;\r\n\t\tconst { stroke, strokeWidth, strokeOpacity } = appearance;\r\n\t\tconst { fontFamily, fontSize, fontFill } = appearance;\r\n\t\tconst { edgeStroke, edgeFill, nsEdgeFill, edgeStrokeWidth, r } = appearance;\r\n\t\tconst { hoverText, selected } = this.props;\r\n\t\tconst { hover } = this.state;\r\n\t\tconst { onDragComplete } = this.props;\r\n\t\tconst lines = helper({ x1, x2, y1, y2 });\r\n\r\n\t\tconst {\r\n\t\t\tenable: hoverTextEnabled,\r\n\t\t\tselectedText: hoverTextSelected,\r\n\t\t\ttext: hoverTextUnselected,\r\n\t\t\t...restHoverTextProps\r\n\t\t} = hoverText;\r\n\r\n\t\tconst lineType = type === \"EXTEND\" ? \"XLINE\" : type === \"BOUND\" ? \"LINE\" : type;\r\n\t\tconst dir = head(lines).y1 > last(lines).y1 ? 3 : -1.3;\r\n\r\n\t\treturn (\r\n\t\t\t<g>\r\n\t\t\t\t{lines.map((line, j) => {\r\n\t\t\t\t\tconst text = `${yDisplayFormat(line.y)} (${line.percent.toFixed(2)}%)`;\r\n\r\n\t\t\t\t\tconst xyProvider = ({ xScale, chartConfig }) => {\r\n\t\t\t\t\t\tconst { yScale } = chartConfig;\r\n\t\t\t\t\t\tconst { x1, y1, x2 } = generateLine({\r\n\t\t\t\t\t\t\ttype: lineType,\r\n\t\t\t\t\t\t\tstart: [line.x1, line.y],\r\n\t\t\t\t\t\t\tend: [line.x2, line.y],\r\n\t\t\t\t\t\t\txScale,\r\n\t\t\t\t\t\t\tyScale,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tconst x = xScale(Math.min(x1, x2)) + 10;\r\n\t\t\t\t\t\tconst y = yScale(y1) + dir * 4;\r\n\t\t\t\t\t\treturn [x, y];\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tconst firstOrLast = (j === 0) || (j === lines.length - 1);\r\n\r\n\t\t\t\t\tconst interactiveCursorClass = firstOrLast\r\n\t\t\t\t\t\t? \"react-stockcharts-ns-resize-cursor\"\r\n\t\t\t\t\t\t: \"react-stockcharts-move-cursor\";\r\n\r\n\t\t\t\t\tconst interactiveEdgeCursorClass = firstOrLast\r\n\t\t\t\t\t\t? \"react-stockcharts-ns-resize-cursor\"\r\n\t\t\t\t\t\t: \"react-stockcharts-ew-resize-cursor\";\r\n\r\n\t\t\t\t\tconst dragHandler = j === 0\r\n\t\t\t\t\t\t? this.handleLineNSResizeTop\r\n\t\t\t\t\t\t: j === lines.length - 1\r\n\t\t\t\t\t\t\t? this.handleLineNSResizeBottom\r\n\t\t\t\t\t\t\t: this.handleLineMove;\r\n\r\n\t\t\t\t\tconst edge1DragHandler = j === 0\r\n\t\t\t\t\t\t? this.handleLineNSResizeTop\r\n\t\t\t\t\t\t: j === lines.length - 1\r\n\t\t\t\t\t\t\t? this.handleLineNSResizeBottom\r\n\t\t\t\t\t\t\t: this.handleEdge1Drag;\r\n\t\t\t\t\tconst edge2DragHandler = j === 0\r\n\t\t\t\t\t\t? this.handleLineNSResizeTop\r\n\t\t\t\t\t\t: j === lines.length - 1\r\n\t\t\t\t\t\t\t? this.handleLineNSResizeBottom\r\n\t\t\t\t\t\t\t: this.handleEdge2Drag;\r\n\r\n\t\t\t\t\tconst hoverHandler = interactive\r\n\t\t\t\t\t\t? { onHover: this.handleHover, onUnHover: this.handleHover }\r\n\t\t\t\t\t\t: {};\r\n\t\t\t\t\treturn <g key={j}>\r\n\t\t\t\t\t\t<StraightLine\r\n\t\t\t\t\t\t\tref={this.saveNodeType(`line_${j}`)}\r\n\t\t\t\t\t\t\tselected={selected || hover}\r\n\r\n\t\t\t\t\t\t\t{...hoverHandler}\r\n\r\n\t\t\t\t\t\t\ttype={lineType}\r\n\t\t\t\t\t\t\tx1Value={line.x1}\r\n\t\t\t\t\t\t\ty1Value={line.y}\r\n\t\t\t\t\t\t\tx2Value={line.x2}\r\n\t\t\t\t\t\t\ty2Value={line.y}\r\n\t\t\t\t\t\t\tstroke={stroke}\r\n\t\t\t\t\t\t\tstrokeWidth={(hover || selected) ? strokeWidth + 1 : strokeWidth}\r\n\t\t\t\t\t\t\tstrokeOpacity={strokeOpacity}\r\n\t\t\t\t\t\t\tinteractiveCursorClass={interactiveCursorClass}\r\n\r\n\t\t\t\t\t\t\tonDragStart={this.handleLineDragStart}\r\n\t\t\t\t\t\t\tonDrag={dragHandler}\r\n\t\t\t\t\t\t\tonDragComplete={onDragComplete}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Text\r\n\t\t\t\t\t\t\tselected={selected}\r\n\t\t\t\t\t\t\t/* eslint-disable */\r\n\t\t\t\t\t\t\txyProvider={xyProvider} \r\n\t\t\t\t\t\t\t/* eslint-enable */\r\n\t\t\t\t\t\t\tfontFamily={fontFamily}\r\n\t\t\t\t\t\t\tfontSize={fontSize}\r\n\t\t\t\t\t\t\tfill={fontFill}>{text}</Text>\r\n\t\t\t\t\t\t<ClickableCircle\r\n\t\t\t\t\t\t\tref={this.saveNodeType(\"edge1\")}\r\n\t\t\t\t\t\t\tshow={selected || hover}\r\n\t\t\t\t\t\t\tcx={line.x1}\r\n\t\t\t\t\t\t\tcy={line.y}\r\n\t\t\t\t\t\t\tr={r}\r\n\t\t\t\t\t\t\tfill={firstOrLast ? nsEdgeFill : edgeFill}\r\n\t\t\t\t\t\t\tstroke={edgeStroke}\r\n\t\t\t\t\t\t\tstrokeWidth={edgeStrokeWidth}\r\n\t\t\t\t\t\t\tinteractiveCursorClass={interactiveEdgeCursorClass}\r\n\t\t\t\t\t\t\tonDrag={edge1DragHandler}\r\n\t\t\t\t\t\t\tonDragComplete={onDragComplete} />\r\n\t\t\t\t\t\t<ClickableCircle\r\n\t\t\t\t\t\t\tref={this.saveNodeType(\"edge2\")}\r\n\t\t\t\t\t\t\tshow={selected || hover}\r\n\t\t\t\t\t\t\tcx={line.x2}\r\n\t\t\t\t\t\t\tcy={line.y}\r\n\t\t\t\t\t\t\tr={r}\r\n\t\t\t\t\t\t\tfill={firstOrLast ? nsEdgeFill : edgeFill}\r\n\t\t\t\t\t\t\tstroke={edgeStroke}\r\n\t\t\t\t\t\t\tstrokeWidth={edgeStrokeWidth}\r\n\t\t\t\t\t\t\tinteractiveCursorClass={interactiveEdgeCursorClass}\r\n\t\t\t\t\t\t\tonDrag={edge2DragHandler}\r\n\t\t\t\t\t\t\tonDragComplete={onDragComplete} />\r\n\t\t\t\t\t</g>;\r\n\t\t\t\t})}\r\n\t\t\t\t<HoverTextNearMouse\r\n\t\t\t\t\tshow={hoverTextEnabled && hover}\r\n\t\t\t\t\t{...restHoverTextProps}\r\n\t\t\t\t\ttext={selected ? hoverTextSelected : hoverTextUnselected}\r\n\t\t\t\t/>\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\nfunction helper({ x1, y1, x2, y2 }) {\r\n\tconst dy = y2 - y1;\r\n\tconst retracements = [100, 61.8, 50, 38.2, 23.6, 0]\r\n\t\t.map(each => ({\r\n\t\t\tpercent: each,\r\n\t\t\tx1,\r\n\t\t\tx2,\r\n\t\t\ty: (y2 - (each / 100) * dy),\r\n\t\t}));\r\n\r\n\treturn retracements;\r\n}\r\n\r\nEachFibRetracement.propTypes = {\r\n\tx1: PropTypes.any.isRequired,\r\n\tx2: PropTypes.any.isRequired,\r\n\ty1: PropTypes.number.isRequired,\r\n\ty2: PropTypes.number.isRequired,\r\n\r\n\tyDisplayFormat: PropTypes.func.isRequired,\r\n\ttype: PropTypes.string.isRequired,\r\n\tselected: PropTypes.bool.isRequired,\r\n\r\n\tappearance: PropTypes.shape({\r\n\t\tstroke: PropTypes.string.isRequired,\r\n\t\tstrokeWidth: PropTypes.number.isRequired,\r\n\t\tstrokeOpacity: PropTypes.number.isRequired,\r\n\t\tfontFamily: PropTypes.string.isRequired,\r\n\t\tfontSize: PropTypes.number.isRequired,\r\n\t\tfontFill: PropTypes.string.isRequired,\r\n\t\tedgeStroke: PropTypes.string.isRequired,\r\n\t\tedgeFill: PropTypes.string.isRequired,\r\n\t\tnsEdgeFill: PropTypes.string.isRequired,\r\n\t\tedgeStrokeWidth: PropTypes.number.isRequired,\r\n\t\tr: PropTypes.number.isRequired,\r\n\t}).isRequired,\r\n\r\n\tinteractive: PropTypes.bool.isRequired,\r\n\thoverText: PropTypes.object.isRequired,\r\n\r\n\tindex: PropTypes.number,\r\n\tonDrag: PropTypes.func.isRequired,\r\n\tonDragComplete: PropTypes.func.isRequired,\r\n};\r\n\r\nEachFibRetracement.defaultProps = {\r\n\tyDisplayFormat: d => d.toFixed(2),\r\n\tinteractive: true,\r\n\r\n\tappearance: {\r\n\t\tstroke: \"#000000\",\r\n\t\tstrokeWidth: 1,\r\n\t\tstrokeOpacity: 1,\r\n\t\tfontFamily: \"Helvetica Neue, Helvetica, Arial, sans-serif\",\r\n\t\tfontSize: 10,\r\n\t\tfontFill: \"#000000\",\r\n\t\tedgeStroke: \"#000000\",\r\n\t\tedgeFill: \"#FFFFFF\",\r\n\t\tnsEdgeFill: \"#000000\",\r\n\t\tedgeStrokeWidth: 1,\r\n\t\tr: 5,\r\n\t},\r\n\tselected: false,\r\n\r\n\tonDrag: noop,\r\n\tonDragComplete: noop,\r\n\r\n\thoverText: {\r\n\t\tenable: false,\r\n\t}\r\n};\r\n\r\nexport default EachFibRetracement;\r\n"],"mappings":"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"}