{"version":3,"file":"LinearRegressionChannelWithArea.js","names":["LinearRegressionChannelWithArea","props","renderSVG","bind","drawOnCanvas","isHover","moreProps","tolerance","onHover","isDefined","mouseXY","helper","x1","y1","x2","y2","dy","yDiffs","hovering","reduce","result","diff","isHovering2","ctx","stroke","strokeWidth","fillOpacity","strokeOpacity","fill","lineWidth","strokeStyle","hexToRGBA","fillStyle","beginPath","moveTo","lineTo","closePath","line","d3Path","toString","selected","interactiveCursorClass","onUnHover","getMouseCanvas","Component","edge1Provider","edge2Provider","x1Value","x2Value","type","xScale","yScale","chartConfig","fullData","xAccessor","getClosestItemIndexes","left","right","startIndex","Math","min","endIndex","max","array","slice","xs","map","d","valueOf","ys","close","n","length","combine","zipper","x","y","xys","xSquareds","pow","b","sum","a","newy1","newy2","stdDev","deviation","propTypes","PropTypes","any","isRequired","oneOf","string","number","onDragStart","func","onDrag","onDragComplete","defaultClassName","bool","defaultProps","noop"],"sources":["../../../../src/lib/interactive/components/LinearRegressionChannelWithArea.js"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { sum, deviation } from \"d3-array\";\r\nimport { path as d3Path } from \"d3-path\";\r\n\r\nimport GenericChartComponent from \"../../GenericChartComponent\";\r\nimport { getMouseCanvas } from \"../../GenericComponent\";\r\nimport { isHovering2 } from \"./StraightLine\";\r\n\r\nimport { isDefined, getClosestItemIndexes, noop, zipper, hexToRGBA } from \"../../utils\";\r\n\r\nclass LinearRegressionChannelWithArea extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.renderSVG = this.renderSVG.bind(this);\r\n\t\tthis.drawOnCanvas = this.drawOnCanvas.bind(this);\r\n\t\tthis.isHover = this.isHover.bind(this);\r\n\t}\r\n\tisHover(moreProps) {\r\n\t\tconst { tolerance, onHover } = this.props;\r\n\r\n\t\tif (isDefined(onHover)) {\r\n\t\t\tconst { mouseXY } = moreProps;\r\n\r\n\t\t\tconst { x1, y1, x2, y2, dy } = helper(this.props, moreProps);\r\n\t\t\tconst yDiffs = [-dy, 0, dy];\r\n\r\n\t\t\tconst hovering = yDiffs.reduce((result, diff) => result || isHovering2(\r\n\t\t\t\t[x1, y1 + diff], [x2, y2 + diff], mouseXY, tolerance\r\n\t\t\t), false);\r\n\t\t\treturn hovering;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\tdrawOnCanvas(ctx, moreProps) {\r\n\t\tconst { stroke, strokeWidth, fillOpacity, strokeOpacity, fill } = this.props;\r\n\t\tconst { x1, y1, x2, y2, dy } = helper(this.props, moreProps);\r\n\r\n\t\tctx.lineWidth = strokeWidth;\r\n\t\tctx.strokeStyle = hexToRGBA(stroke, strokeOpacity);\r\n\t\tctx.fillStyle = hexToRGBA(fill, fillOpacity);\r\n\r\n\t\tctx.beginPath();\r\n\t\tctx.moveTo(x1, y1 - dy);\r\n\t\tctx.lineTo(x2, y2 - dy);\r\n\t\tctx.stroke();\r\n\r\n\t\tctx.beginPath();\r\n\t\tctx.moveTo(x2, y2 + dy);\r\n\t\tctx.lineTo(x1, y1 + dy);\r\n\t\tctx.stroke();\r\n\r\n\t\tctx.beginPath();\r\n\t\tctx.moveTo(x1, y1 - dy);\r\n\t\tctx.lineTo(x2, y2 - dy);\r\n\t\tctx.lineTo(x2, y2 + dy);\r\n\t\tctx.lineTo(x1, y1 + dy);\r\n\t\tctx.closePath();\r\n\t\tctx.fill();\r\n\r\n\t\tctx.beginPath();\r\n\t\tctx.moveTo(x2, y2);\r\n\t\tctx.lineTo(x1, y1);\r\n\t\tctx.stroke();\r\n\t}\r\n\trenderSVG(moreProps) {\r\n\t\tconst { stroke, strokeWidth, fillOpacity, strokeOpacity, fill } = this.props;\r\n\t\tconst { x1, y1, x2, y2, dy } = helper(this.props, moreProps);\r\n\t\tconst line = {\r\n\t\t\tstrokeWidth,\r\n\t\t\tstroke,\r\n\t\t\tstrokeOpacity,\r\n\t\t};\r\n\t\tconst ctx = d3Path();\r\n\t\tctx.moveTo(x1, y1 - dy);\r\n\t\tctx.lineTo(x2, y2 - dy);\r\n\t\tctx.lineTo(x2, y2 + dy);\r\n\t\tctx.lineTo(x1, y1 + dy);\r\n\t\tctx.closePath();\r\n\t\treturn (\r\n\t\t\t<g>\r\n\t\t\t\t<line\r\n\t\t\t\t\t{...line}\r\n\t\t\t\t\tx1={x1}\r\n\t\t\t\t\ty1={y1 - dy}\r\n\t\t\t\t\tx2={x2}\r\n\t\t\t\t\ty2={y2 - dy}\r\n\t\t\t\t/>\r\n\t\t\t\t<line\r\n\t\t\t\t\t{...line}\r\n\t\t\t\t\tx1={x1}\r\n\t\t\t\t\ty1={y1 + dy}\r\n\t\t\t\t\tx2={x2}\r\n\t\t\t\t\ty2={y2 + dy}\r\n\t\t\t\t/>\r\n\t\t\t\t<path\r\n\t\t\t\t\td={ctx.toString()}\r\n\t\t\t\t\tfillRule={fill}\r\n\t\t\t\t\tfillOpacity={fillOpacity}\r\n\t\t\t\t/>\r\n\t\t\t\t<line\r\n\t\t\t\t\t{...line}\r\n\t\t\t\t\tx1={x1}\r\n\t\t\t\t\ty1={y1}\r\n\t\t\t\t\tx2={x2}\r\n\t\t\t\t\ty2={y2}\r\n\t\t\t\t/>\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n\trender() {\r\n\t\tconst { selected, interactiveCursorClass } = this.props;\r\n\t\tconst { onHover, onUnHover } = this.props;\r\n\r\n\t\treturn <GenericChartComponent\r\n\t\t\tisHover={this.isHover}\r\n\r\n\t\t\tsvgDraw={this.renderSVG}\r\n\t\t\tcanvasToDraw={getMouseCanvas}\r\n\t\t\tcanvasDraw={this.drawOnCanvas}\r\n\r\n\t\t\tinteractiveCursorClass={interactiveCursorClass}\r\n\t\t\tselected={selected}\r\n\r\n\t\t\tonHover={onHover}\r\n\t\t\tonUnHover={onUnHover}\r\n\r\n\t\t\tdrawOn={[\"mousemove\", \"mouseleave\", \"pan\", \"drag\"]}\r\n\t\t/>;\r\n\t}\r\n}\r\n\r\nexport function edge1Provider(props) {\r\n\treturn function(moreProps) {\r\n\t\tconst { x1, y1 } = helper(props, moreProps);\r\n\t\treturn [x1, y1];\r\n\t};\r\n}\r\n\r\nexport function edge2Provider(props) {\r\n\treturn function(moreProps) {\r\n\t\tconst { x2, y2 } = helper(props, moreProps);\r\n\t\treturn [x2, y2];\r\n\t};\r\n}\r\n\r\n\r\nfunction helper(props, moreProps) {\r\n\tconst { x1Value, x2Value, type } = props;\r\n\r\n\tconst { xScale, chartConfig: { yScale }, fullData } = moreProps;\r\n\tconst { xAccessor } = moreProps;\r\n\r\n\t/*\r\n\thttp://www.metastock.com/Customer/Resources/TAAZ/?p=65\r\n\ty = a + bx\r\n\tn = length of array\r\n\tb = (n * sum(x*y) - sum(xs) * sum(ys)) / (n * sum(xSquareds) - (sum(xs) ^ 2))\r\n\ta = (sum of closes)\r\n\t*/\r\n\r\n\tconst { left } = getClosestItemIndexes(fullData, x1Value, xAccessor);\r\n\tconst { right } = getClosestItemIndexes(fullData, x2Value, xAccessor);\r\n\r\n\tconst startIndex = Math.min(left, right);\r\n\tconst endIndex = Math.max(left, right) + 1;\r\n\r\n\tconst array = fullData.slice(startIndex, endIndex);\r\n\r\n\tconst xs = array.map(d => xAccessor(d).valueOf());\r\n\tconst ys = array.map(d => d.close);\r\n\tconst n = array.length;\r\n\r\n\tconst combine = zipper()\r\n\t\t.combine((x, y) => x * y);\r\n\r\n\tconst xys = combine(xs, ys);\r\n\tconst xSquareds = xs.map(x => Math.pow(x, 2));\r\n\r\n\tconst b = (n * sum(xys) - sum(xs) * sum(ys)) / (n * sum(xSquareds) - Math.pow(sum(xs), 2));\r\n\tconst a = (sum(ys) - b * sum(xs)) / n;\r\n\r\n\tconst newy1 = a + b * x1Value;\r\n\tconst newy2 = a + b * x2Value;\r\n\r\n\tconst x1 = xScale(x1Value);\r\n\tconst y1 = yScale(newy1);\r\n\tconst x2 = xScale(x2Value);\r\n\tconst y2 = yScale(newy2);\r\n\r\n\tconst stdDev = type === \"SD\"\r\n\t\t? deviation(array, d => d.close)\r\n\t\t: 0;\r\n\r\n\tconst dy = yScale(newy1 - stdDev) - y1;\r\n\r\n\treturn {\r\n\t\tx1, y1, x2, y2, dy\r\n\t};\r\n}\r\n\r\nLinearRegressionChannelWithArea.propTypes = {\r\n\tx1Value: PropTypes.any.isRequired,\r\n\tx2Value: PropTypes.any.isRequired,\r\n\r\n\ttype: PropTypes.oneOf([\r\n\t\t\"SD\", // standard deviation channel\r\n\t\t\"Raff\", // Raff Regression Channel\r\n\t]).isRequired,\r\n\r\n\tinteractiveCursorClass: PropTypes.string,\r\n\tstroke: PropTypes.string.isRequired,\r\n\tstrokeWidth: PropTypes.number.isRequired,\r\n\tfill: PropTypes.string.isRequired,\r\n\tfillOpacity: PropTypes.number.isRequired,\r\n\tstrokeOpacity: PropTypes.number.isRequired,\r\n\r\n\tonDragStart: PropTypes.func.isRequired,\r\n\tonDrag: PropTypes.func.isRequired,\r\n\tonDragComplete: PropTypes.func.isRequired,\r\n\r\n\tonHover: PropTypes.func,\r\n\tonUnHover: PropTypes.func,\r\n\r\n\tdefaultClassName: PropTypes.string,\r\n\r\n\ttolerance: PropTypes.number.isRequired,\r\n\tselected: PropTypes.bool.isRequired,\r\n};\r\n\r\nLinearRegressionChannelWithArea.defaultProps = {\r\n\tonDragStart: noop,\r\n\tonDrag: noop,\r\n\tonDragComplete: noop,\r\n\r\n\ttype: \"SD\", // standard dev\r\n\r\n\tstrokeWidth: 1,\r\n\ttolerance: 4,\r\n\tselected: false,\r\n};\r\n\r\nexport default LinearRegressionChannelWithArea;"],"mappings":"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"}