{"version":3,"file":"ClickableCircle.js","names":["ClickableCircle","props","saveNode","bind","renderSVG","drawOnCanvas","isHover","node","moreProps","mouseXY","r","helper","x","y","mx","my","hover","ctx","stroke","strokeWidth","fill","fillOpacity","strokeOpacity","lineWidth","fillStyle","hexToRGBA","strokeStyle","beginPath","arc","Math","PI","interactiveCursorClass","show","onDragStart","onDrag","onDragComplete","getMouseCanvas","Component","xyProvider","cx","cy","isDefined","xScale","yScale","chartConfig","propTypes","PropTypes","func","isRequired","number","string","className","bool","defaultProps","noop","onMove"],"sources":["../../../../src/lib/interactive/components/ClickableCircle.js"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport GenericChartComponent from \"../../GenericChartComponent\";\r\nimport { getMouseCanvas } from \"../../GenericComponent\";\r\n\r\nimport { isDefined, noop, hexToRGBA } from \"../../utils\";\r\n\r\nclass ClickableCircle extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.saveNode = this.saveNode.bind(this);\r\n\t\tthis.renderSVG = this.renderSVG.bind(this);\r\n\t\tthis.drawOnCanvas = this.drawOnCanvas.bind(this);\r\n\t\tthis.isHover = this.isHover.bind(this);\r\n\t}\r\n\tsaveNode(node) {\r\n\t\tthis.node = node;\r\n\t}\r\n\tisHover(moreProps) {\r\n\t\tconst { mouseXY } = moreProps;\r\n\t\t// const { r } = this.props;\r\n\t\tconst r = this.props.r + 7;\r\n\t\tconst [x, y] = helper(this.props, moreProps);\r\n\r\n\t\tconst [mx, my] = mouseXY;\r\n\t\tconst hover = (x - r) < mx && mx < (x + r)\r\n\t\t\t&& (y - r) < my && my < (y + r);\r\n\r\n\t\t// console.log(\"hover->\", hover);\r\n\t\treturn hover;\r\n\t}\r\n\tdrawOnCanvas(ctx, moreProps) {\r\n\t\tconst { stroke, strokeWidth, fill } = this.props;\r\n\t\tconst { fillOpacity, strokeOpacity } = this.props;\r\n\t\tconst { r } = this.props;\r\n\r\n\t\tconst [x, y] = helper(this.props, moreProps);\r\n\r\n\t\tctx.lineWidth = strokeWidth;\r\n\t\tctx.fillStyle = hexToRGBA(fill, fillOpacity);\r\n\t\tctx.strokeStyle = hexToRGBA(stroke, strokeOpacity);\r\n\r\n\t\tctx.beginPath();\r\n\t\tctx.arc(x, y, r, 0, 2 * Math.PI, false);\r\n\t\tctx.fill();\r\n\t\tctx.stroke();\r\n\t}\r\n\trenderSVG(moreProps) {\r\n\t\tconst { stroke, strokeWidth, fill } = this.props;\r\n\t\tconst { fillOpacity, strokeOpacity } = this.props;\r\n\t\tconst { r } = this.props;\r\n\r\n\t\tconst [x, y] = helper(this.props, moreProps);\r\n\r\n\t\treturn <circle cx={x} cy={y} r={r}\r\n\t\t\tstrokeWidth={strokeWidth}\r\n\t\t\tstroke={stroke}\r\n\t\t\tstrokeOpacity={strokeOpacity}\r\n\t\t\tfillRule={fill}\r\n\t\t\tfillOpacity={fillOpacity}\r\n\t\t/>;\r\n\t}\r\n\trender() {\r\n\t\tconst { interactiveCursorClass } = this.props;\r\n\t\tconst { show } = this.props;\r\n\t\tconst { onDragStart, onDrag, onDragComplete } = this.props;\r\n\r\n\t\treturn show\r\n\t\t\t? <GenericChartComponent ref={this.saveNode}\r\n\t\t\t\tinteractiveCursorClass={interactiveCursorClass}\r\n\t\t\t\tselected\r\n\t\t\t\tisHover={this.isHover}\r\n\r\n\t\t\t\tonDragStart={onDragStart}\r\n\t\t\t\tonDrag={onDrag}\r\n\t\t\t\tonDragComplete={onDragComplete}\r\n\r\n\t\t\t\tsvgDraw={this.renderSVG}\r\n\r\n\t\t\t\tcanvasDraw={this.drawOnCanvas}\r\n\t\t\t\tcanvasToDraw={getMouseCanvas}\r\n\r\n\t\t\t\tdrawOn={[\"pan\", \"mousemove\", \"drag\"]}\r\n\t\t\t/>\r\n\t\t\t: null;\r\n\t}\r\n}\r\n\r\nfunction helper(props, moreProps) {\r\n\tconst { xyProvider, cx, cy } = props;\r\n\r\n\tif (isDefined(xyProvider)) {\r\n\t\treturn xyProvider(moreProps);\r\n\t}\r\n\r\n\tconst { xScale, chartConfig: { yScale } } = moreProps;\r\n\r\n\tconst x = xScale(cx);\r\n\tconst y = yScale(cy);\r\n\treturn [x, y];\r\n\r\n}\r\nClickableCircle.propTypes = {\r\n\txyProvider: PropTypes.func,\r\n\r\n\tonDragStart: PropTypes.func.isRequired,\r\n\tonDrag: PropTypes.func.isRequired,\r\n\tonDragComplete: PropTypes.func.isRequired,\r\n\tstrokeWidth: PropTypes.number.isRequired,\r\n\tstroke: PropTypes.string.isRequired,\r\n\tfill: PropTypes.string.isRequired,\r\n\tr: PropTypes.number.isRequired,\r\n\r\n\tcx: PropTypes.number,\r\n\tcy: PropTypes.number,\r\n\r\n\tclassName: PropTypes.string.isRequired,\r\n\tshow: PropTypes.bool.isRequired,\r\n\tstrokeOpacity: PropTypes.number.isRequired,\r\n\tfillOpacity: PropTypes.number.isRequired,\r\n\tinteractiveCursorClass: PropTypes.string,\r\n};\r\n\r\n\r\nClickableCircle.defaultProps = {\r\n\tclassName: \"react-stockcharts-interactive-line-edge\",\r\n\tonDragStart: noop,\r\n\tonDrag: noop,\r\n\tonDragComplete: noop,\r\n\tonMove: noop,\r\n\tshow: false,\r\n\tfillOpacity: 1,\r\n\tstrokeOpacity: 1,\r\n};\r\n\r\nexport default ClickableCircle;\r\n"],"mappings":"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"}