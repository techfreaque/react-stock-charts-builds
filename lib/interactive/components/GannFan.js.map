{"version":3,"file":"GannFan.js","names":["GannFan","props","renderSVG","bind","drawOnCanvas","isHover","moreProps","tolerance","onHover","mouseXY","mouseX","mouseY","hovering","isDefined","lines","helper","i","length","line1","left","Math","min","x1","x2","right","max","top","y1","y2","bottom","isWithinLineBounds","isHovering2","ctx","stroke","strokeWidth","strokeOpacity","fill","fillOpacity","fontFamily","fontSize","fontFill","lineWidth","strokeStyle","hexToRGBA","font","fillStyle","forEach","line","label","beginPath","moveTo","lineTo","fillText","text","x","y","pairsOfLines","pairs","idx","line2","closePath","map","each","d3Path","toString","selected","interactiveCursorClass","onDragStart","onDrag","onDragComplete","onUnHover","getMouseCanvas","Component","getLineCoordinates","start","endX","endY","end","startXY","endXY","xScale","yScale","chartConfig","isNotDefined","dx","dy","halfY","oneThirdY","oneFourthY","oneEighthY","halfX","oneThirdX","oneFourthX","oneEighthX","lineCoods","generateLine","type","propTypes","PropTypes","string","isRequired","number","arrayOf","func","defaultClassName","bool","defaultProps","noop"],"sources":["../../../../src/lib/interactive/components/GannFan.js"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { pairs } from \"d3-array\";\r\nimport { path as d3Path } from \"d3-path\";\r\n\r\nimport GenericChartComponent from \"../../GenericChartComponent\";\r\nimport { getMouseCanvas } from \"../../GenericComponent\";\r\nimport { generateLine, isHovering2 } from \"./StraightLine\";\r\n\r\nimport {\r\n\tisDefined, isNotDefined,\r\n\tnoop, hexToRGBA,\r\n} from \"../../utils\";\r\n\r\nclass GannFan extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.renderSVG = this.renderSVG.bind(this);\r\n\t\tthis.drawOnCanvas = this.drawOnCanvas.bind(this);\r\n\t\tthis.isHover = this.isHover.bind(this);\r\n\t}\r\n\tisHover(moreProps) {\r\n\t\tconst { tolerance, onHover } = this.props;\r\n\t\tconst { mouseXY } = moreProps;\r\n\t\tconst [mouseX, mouseY] = mouseXY;\r\n\r\n\t\tlet hovering = false;\r\n\t\tif (isDefined(onHover)) {\r\n\r\n\t\t\tconst lines = helper(this.props, moreProps);\r\n\r\n\t\t\tfor (let i = 0; i < lines.length; i++) {\r\n\t\t\t\tconst line1 = lines[i];\r\n\r\n\t\t\t\tconst left = Math.min(line1.x1, line1.x2);\r\n\t\t\t\tconst right = Math.max(line1.x1, line1.x2);\r\n\t\t\t\tconst top = Math.min(line1.y1, line1.y2);\r\n\t\t\t\tconst bottom = Math.max(line1.y1, line1.y2);\r\n\r\n\t\t\t\tconst isWithinLineBounds = mouseX >= left && mouseX <= right\r\n\t\t\t\t\t&& mouseY >= top && mouseY <= bottom;\r\n\r\n\t\t\t\thovering = isWithinLineBounds\r\n\t\t\t\t\t&& isHovering2(\r\n\t\t\t\t\t\t[line1.x1, line1.y1],\r\n\t\t\t\t\t\t[line1.x2, line1.y2],\r\n\t\t\t\t\t\tmouseXY,\r\n\t\t\t\t\t\ttolerance);\r\n\r\n\t\t\t\tif (hovering) break;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn hovering;\r\n\t}\r\n\tdrawOnCanvas(ctx, moreProps) {\r\n\t\tconst {\r\n\t\t\tstroke, strokeWidth, strokeOpacity,\r\n\t\t\tfill, fillOpacity,\r\n\t\t\tfontFamily, fontSize, fontFill\r\n\t\t} = this.props;\r\n\r\n\r\n\t\tconst lines = helper(this.props, moreProps);\r\n\r\n\t\tctx.lineWidth = strokeWidth;\r\n\t\tctx.strokeStyle = hexToRGBA(stroke, strokeOpacity);\r\n\r\n\t\tctx.font = `${ fontSize }px ${fontFamily}`;\r\n\t\tctx.fillStyle = fontFill;\r\n\r\n\t\tlines.forEach(line => {\r\n\t\t\tconst {\r\n\t\t\t\tx1, y1, x2, y2, label\r\n\t\t\t} = line;\r\n\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.moveTo(x1, y1);\r\n\t\t\tctx.lineTo(x2, y2);\r\n\t\t\tctx.stroke();\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.fillText(label.text, label.x, label.y);\r\n\t\t});\r\n\t\tconst pairsOfLines = pairs(lines);\r\n\r\n\t\tpairsOfLines.forEach(([line1, line2], idx) => {\r\n\t\t\tctx.fillStyle = hexToRGBA(fill[idx], fillOpacity);\r\n\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.moveTo(line1.x1, line1.y1);\r\n\t\t\tctx.lineTo(line1.x2, line1.y2);\r\n\t\t\tctx.lineTo(line2.x2, line2.y2);\r\n\t\t\tctx.closePath();\r\n\t\t\tctx.fill();\r\n\t\t});\r\n\t}\r\n\trenderSVG(moreProps) {\r\n\t\tconst { stroke, strokeWidth, fillOpacity, fill, strokeOpacity } = this.props;\r\n\r\n\t\tconst lines = helper(this.props, moreProps);\r\n\t\tconst pairsOfLines = pairs(lines);\r\n\r\n\t\treturn (\r\n\t\t\t<g>\r\n\t\t\t\t{lines.map((each, idx) => {\r\n\t\t\t\t\tconst { x1, y1, x2, y2 } = each;\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<line key={idx}\r\n\t\t\t\t\t\t\tstrokeWidth={strokeWidth}\r\n\t\t\t\t\t\t\tstroke={stroke}\r\n\t\t\t\t\t\t\tstrokeOpacity={strokeOpacity}\r\n\t\t\t\t\t\t\tx1={x1}\r\n\t\t\t\t\t\t\ty1={y1}\r\n\t\t\t\t\t\t\tx2={x2}\r\n\t\t\t\t\t\t\ty2={y2}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t\t{pairsOfLines.map(([line1, line2], idx) => {\r\n\t\t\t\t\tconst ctx = d3Path();\r\n\t\t\t\t\tctx.moveTo(line1.x1, line1.y1);\r\n\t\t\t\t\tctx.lineTo(line1.x2, line1.y2);\r\n\t\t\t\t\tctx.lineTo(line2.x2, line2.y2);\r\n\t\t\t\t\tctx.closePath();\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<path key={idx}\r\n\t\t\t\t\t\t\tstroke=\"none\"\r\n\t\t\t\t\t\t\tfill={fill[idx]}\r\n\t\t\t\t\t\t\tfillOpacity={fillOpacity}\r\n\t\t\t\t\t\t\td={ctx.toString()}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n\trender() {\r\n\t\tconst { selected, interactiveCursorClass } = this.props;\r\n\t\tconst { onDragStart, onDrag, onDragComplete, onHover, onUnHover } = this.props;\r\n\r\n\t\treturn <GenericChartComponent\r\n\t\t\tisHover={this.isHover}\r\n\r\n\t\t\tsvgDraw={this.renderSVG}\r\n\t\t\tcanvasToDraw={getMouseCanvas}\r\n\t\t\tcanvasDraw={this.drawOnCanvas}\r\n\r\n\t\t\tinteractiveCursorClass={interactiveCursorClass}\r\n\t\t\tselected={selected}\r\n\r\n\t\t\tonDragStart={onDragStart}\r\n\t\t\tonDrag={onDrag}\r\n\t\t\tonDragComplete={onDragComplete}\r\n\t\t\tonHover={onHover}\r\n\t\t\tonUnHover={onUnHover}\r\n\r\n\t\t\tdrawOn={[\"mousemove\", \"mouseleave\", \"pan\", \"drag\"]}\r\n\t\t/>;\r\n\t}\r\n}\r\n\r\nfunction getLineCoordinates(start, endX, endY, text) {\r\n\tconst end = [\r\n\t\tendX,\r\n\t\tendY\r\n\t];\r\n\treturn {\r\n\t\tstart, end, text\r\n\t};\r\n}\r\n\r\nfunction helper(props, moreProps) {\r\n\tconst { startXY, endXY } = props;\r\n\r\n\tconst {\r\n\t\txScale,\r\n\t\tchartConfig: { yScale }\r\n\t} = moreProps;\r\n\tif (isNotDefined(startXY) || isNotDefined(endXY)) {\r\n\t\treturn [];\r\n\t}\r\n\tconst [x1, y1] = startXY;\r\n\tconst [x2, y2] = endXY;\r\n\r\n\tconst dx = x2 - x1;\r\n\tconst dy = y2 - y1;\r\n\r\n\tif (dx !== 0 && dy !== 0) {\r\n\t\t// console.log(\"modLine ->\", startXY, modLine, dx1, dy1)\r\n\t\tconst halfY = getLineCoordinates(\r\n\t\t\tstartXY,\r\n\t\t\tx2,\r\n\t\t\ty1 + dy / 2,\r\n\t\t\t\"2/1\"\r\n\t\t);\r\n\t\tconst oneThirdY = getLineCoordinates(\r\n\t\t\tstartXY,\r\n\t\t\tx2,\r\n\t\t\ty1 + dy / 3,\r\n\t\t\t\"3/1\"\r\n\t\t);\r\n\t\tconst oneFourthY = getLineCoordinates(\r\n\t\t\tstartXY,\r\n\t\t\tx2,\r\n\t\t\ty1 + dy / 4,\r\n\t\t\t\"4/1\"\r\n\t\t);\r\n\t\tconst oneEighthY = getLineCoordinates(\r\n\t\t\tstartXY,\r\n\t\t\tx2,\r\n\t\t\ty1 + dy / 8,\r\n\t\t\t\"8/1\"\r\n\t\t);\r\n\t\tconst halfX = getLineCoordinates(\r\n\t\t\tstartXY,\r\n\t\t\tx1 + dx / 2,\r\n\t\t\ty2,\r\n\t\t\t\"1/2\"\r\n\t\t);\r\n\t\tconst oneThirdX = getLineCoordinates(\r\n\t\t\tstartXY,\r\n\t\t\tx1 + dx / 3,\r\n\t\t\ty2,\r\n\t\t\t\"1/3\"\r\n\t\t);\r\n\t\tconst oneFourthX = getLineCoordinates(\r\n\t\t\tstartXY,\r\n\t\t\tx1 + dx / 4,\r\n\t\t\ty2,\r\n\t\t\t\"1/4\"\r\n\t\t);\r\n\t\tconst oneEighthX = getLineCoordinates(\r\n\t\t\tstartXY,\r\n\t\t\tx1 + dx / 8,\r\n\t\t\ty2,\r\n\t\t\t\"1/8\"\r\n\t\t);\r\n\t\tconst lines = [\r\n\t\t\toneEighthX,\r\n\t\t\toneFourthX,\r\n\t\t\toneThirdX,\r\n\t\t\thalfX,\r\n\t\t\t{ start: startXY, end: endXY, text: \"1/1\" },\r\n\t\t\thalfY,\r\n\t\t\toneThirdY,\r\n\t\t\toneFourthY,\r\n\t\t\toneEighthY,\r\n\t\t];\r\n\t\tconst lineCoods = lines.map(line => {\r\n\t\t\tconst { x1, y1, x2, y2 } = generateLine({\r\n\t\t\t\ttype: \"RAY\",\r\n\t\t\t\tstart: line.start,\r\n\t\t\t\tend: line.end,\r\n\t\t\t\txScale,\r\n\t\t\t\tyScale,\r\n\t\t\t});\r\n\t\t\treturn {\r\n\t\t\t\tx1: xScale(x1),\r\n\t\t\t\ty1: yScale(y1),\r\n\t\t\t\tx2: xScale(x2),\r\n\t\t\t\ty2: yScale(y2),\r\n\t\t\t\tlabel: {\r\n\t\t\t\t\tx: xScale(line.end[0]),\r\n\t\t\t\t\ty: yScale(line.end[1]),\r\n\t\t\t\t\ttext: line.text\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t});\r\n\t\treturn lineCoods;\r\n\t}\r\n\treturn [];\r\n}\r\n\r\n\r\nGannFan.propTypes = {\r\n\tinteractiveCursorClass: PropTypes.string,\r\n\tstroke: PropTypes.string.isRequired,\r\n\tstrokeWidth: PropTypes.number.isRequired,\r\n\tfill: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n\tstrokeOpacity: PropTypes.number.isRequired,\r\n\tfillOpacity: PropTypes.number.isRequired,\r\n\r\n\tfontFamily: PropTypes.string.isRequired,\r\n\tfontSize: PropTypes.number.isRequired,\r\n\tfontFill: PropTypes.string.isRequired,\r\n\r\n\tonDragStart: PropTypes.func.isRequired,\r\n\tonDrag: PropTypes.func.isRequired,\r\n\tonDragComplete: PropTypes.func.isRequired,\r\n\tonHover: PropTypes.func,\r\n\tonUnHover: PropTypes.func,\r\n\r\n\tdefaultClassName: PropTypes.string,\r\n\r\n\ttolerance: PropTypes.number.isRequired,\r\n\tselected: PropTypes.bool.isRequired,\r\n};\r\n\r\nGannFan.defaultProps = {\r\n\tonDragStart: noop,\r\n\tonDrag: noop,\r\n\tonDragComplete: noop,\r\n\r\n\tstrokeWidth: 1,\r\n\ttolerance: 4,\r\n\tselected: false,\r\n};\r\n\r\nexport default GannFan;\r\n"],"mappings":"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"}