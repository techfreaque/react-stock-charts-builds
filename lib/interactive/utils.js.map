{"version":3,"file":"utils.js","names":["getValueFromOverride","override","index","key","defaultValue","isDefined","terminate","setState","current","saveNodeType","type","node","isNotDefined","nodes","isHoverForInteractiveType","interactiveType","moreProps","selecedNodes","map","isHover","interactive","props","t","idx","selected","hovering","mapObject","reduce","a","b","getMouseXY","ox","oy","Array","isArray","mouseXY","x","y","getMorePropsForChart","chartId","chartConfigList","chartConfig","find","each","id","origin","getSelected","interactives","objects","filter","obj","length"],"sources":["../../../src/lib/interactive/utils.js"],"sourcesContent":["import {\r\n\tisNotDefined,\r\n\tisDefined,\r\n\tmapObject,\r\n\tfind,\r\n} from \"../utils\";\r\n\r\nexport function getValueFromOverride(override, index, key, defaultValue) {\r\n\tif (isDefined(override) && override.index === index)\r\n\t\treturn override[key];\r\n\treturn defaultValue;\r\n}\r\n\r\nexport function terminate() {\r\n\tthis.setState({\r\n\t\tcurrent: null,\r\n\t\toverride: null,\r\n\t});\r\n}\r\n\r\nexport function saveNodeType(type) {\r\n\treturn node => {\r\n\t\tif (isNotDefined(node) && isDefined(this.nodes[type])) {\r\n\t\t\tdelete this.nodes[type];\r\n\t\t} else {\r\n\t\t\tthis.nodes[type] = node;\r\n\t\t}\r\n\t\t// console.error(this.nodes)\r\n\t};\r\n}\r\nexport function isHoverForInteractiveType(interactiveType) {\r\n\treturn function(moreProps) { // this has to be function as it is bound to this\r\n\r\n\t\tif (isDefined(this.nodes)) {\r\n\t\t\tconst selecedNodes = this.nodes\r\n\t\t\t\t.map(node => node.isHover(moreProps));\r\n\t\t\tconst interactive = this.props[interactiveType].map((t, idx) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...t,\r\n\t\t\t\t\tselected: selecedNodes[idx]\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t\treturn interactive;\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function isHover(moreProps) {\r\n\tconst hovering = mapObject(this.nodes, node => node.isHover(moreProps))\r\n\t\t.reduce((a, b) => {\r\n\t\t\treturn a || b;\r\n\t\t});\r\n\treturn hovering;\r\n}\r\n\r\nfunction getMouseXY(moreProps, [ox, oy]) {\r\n\tif (Array.isArray(moreProps.mouseXY)) {\r\n\t\tconst { mouseXY: [x, y] } = moreProps;\r\n\t\tconst mouseXY = [\r\n\t\t\tx - ox,\r\n\t\t\ty - oy\r\n\t\t];\r\n\t\treturn mouseXY;\r\n\t}\r\n\treturn moreProps.mouseXY;\r\n}\r\n\r\nexport function getMorePropsForChart(moreProps, chartId) {\r\n\tconst { chartConfig: chartConfigList } = moreProps;\r\n\tconst chartConfig = find(chartConfigList, each => each.id === chartId);\r\n\r\n\tconst { origin } = chartConfig;\r\n\tconst mouseXY = getMouseXY(moreProps, origin);\r\n\treturn {\r\n\t\t...moreProps,\r\n\t\tchartConfig,\r\n\t\tmouseXY,\r\n\t};\r\n}\r\n\r\nexport function getSelected(interactives) {\r\n\tconst selected = interactives\r\n\t\t.map(each => {\r\n\t\t\tconst objects = each.objects.filter(obj => {\r\n\t\t\t\treturn obj.selected;\r\n\t\t\t});\r\n\t\t\treturn {\r\n\t\t\t\t...each,\r\n\t\t\t\tobjects,\r\n\t\t\t};\r\n\t\t})\r\n\t\t.filter(each => each.objects.length > 0);\r\n\treturn selected;\r\n}\r\n"],"mappings":"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"}