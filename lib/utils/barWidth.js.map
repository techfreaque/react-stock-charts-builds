{"version":3,"file":"barWidth.js","names":["plotDataLengthBarWidth","props","moreProps","widthRatio","xScale","range","l","r","totalWidth","Math","abs","invert","domain","dl","dr","width","length","timeIntervalBarWidth","interval","xAccessor","plotData","first","head","offset"],"sources":["../../../src/lib/utils/barWidth.js"],"sourcesContent":["\r\n\r\nimport { head } from \"../utils\";\r\n\r\n/**\r\n * Bar width is based on the amount of items in the plot data and the distance between the first and last of those\r\n * items.\r\n * @param props the props passed to the series.\r\n * @param moreProps an object holding the xScale, xAccessor and plotData.\r\n * @return {number} the bar width.\r\n */\r\nexport function plotDataLengthBarWidth(props, moreProps) {\r\n\tconst { widthRatio } = props;\r\n\tconst { xScale } = moreProps;\r\n\r\n\tconst [l, r] = xScale.range();\r\n\r\n\tconst totalWidth = Math.abs(r - l);\r\n\tif (xScale.invert != null) {\r\n\t\tconst [dl, dr] = xScale.domain();\r\n\t\tconst width = totalWidth / Math.abs(dl - dr);\r\n\t\treturn width * widthRatio;\r\n\t} else {\r\n\t\tconst width = totalWidth / xScale.domain().length;\r\n\t\treturn width * widthRatio;\r\n\t}\r\n}\r\n\r\n/**\r\n * Generates a width function that calculates the bar width based on the given time interval.\r\n * @param interval a d3-time time interval.\r\n * @return {Function} the width function.\r\n */\r\nexport function timeIntervalBarWidth(interval) {\r\n\treturn function(props, moreProps) {\r\n\t\tconst { widthRatio } = props;\r\n\t\tconst { xScale, xAccessor, plotData } = moreProps;\r\n\r\n\t\tconst first = xAccessor(head(plotData));\r\n\t\treturn Math.abs(xScale(interval.offset(first, 1)) - xScale(first)) * widthRatio;\r\n\t};\r\n}\r\n"],"mappings":";;;;;;;;AAEA;;;;;;;;;;;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASA,sBAAT,CAAgCC,KAAhC,EAAuCC,SAAvC,EAAkD;EACxD,IAAQC,UAAR,GAAuBF,KAAvB,CAAQE,UAAR;EACA,IAAQC,MAAR,GAAmBF,SAAnB,CAAQE,MAAR;;EAEA,oBAAeA,MAAM,CAACC,KAAP,EAAf;EAAA;EAAA,IAAOC,CAAP;EAAA,IAAUC,CAAV;;EAEA,IAAMC,UAAU,GAAGC,IAAI,CAACC,GAAL,CAASH,CAAC,GAAGD,CAAb,CAAnB;;EACA,IAAIF,MAAM,CAACO,MAAP,IAAiB,IAArB,EAA2B;IAC1B,qBAAiBP,MAAM,CAACQ,MAAP,EAAjB;IAAA;IAAA,IAAOC,EAAP;IAAA,IAAWC,EAAX;;IACA,IAAMC,KAAK,GAAGP,UAAU,GAAGC,IAAI,CAACC,GAAL,CAASG,EAAE,GAAGC,EAAd,CAA3B;IACA,OAAOC,KAAK,GAAGZ,UAAf;EACA,CAJD,MAIO;IACN,IAAMY,MAAK,GAAGP,UAAU,GAAGJ,MAAM,CAACQ,MAAP,GAAgBI,MAA3C;;IACA,OAAOD,MAAK,GAAGZ,UAAf;EACA;AACD;AAED;AACA;AACA;AACA;AACA;;;AACO,SAASc,oBAAT,CAA8BC,QAA9B,EAAwC;EAC9C,OAAO,UAASjB,KAAT,EAAgBC,SAAhB,EAA2B;IACjC,IAAQC,UAAR,GAAuBF,KAAvB,CAAQE,UAAR;IACA,IAAQC,MAAR,GAAwCF,SAAxC,CAAQE,MAAR;IAAA,IAAgBe,SAAhB,GAAwCjB,SAAxC,CAAgBiB,SAAhB;IAAA,IAA2BC,QAA3B,GAAwClB,SAAxC,CAA2BkB,QAA3B;IAEA,IAAMC,KAAK,GAAGF,SAAS,CAAC,IAAAG,WAAA,EAAKF,QAAL,CAAD,CAAvB;IACA,OAAOX,IAAI,CAACC,GAAL,CAASN,MAAM,CAACc,QAAQ,CAACK,MAAT,CAAgBF,KAAhB,EAAuB,CAAvB,CAAD,CAAN,GAAoCjB,MAAM,CAACiB,KAAD,CAAnD,IAA8DlB,UAArE;EACA,CAND;AAOA"}