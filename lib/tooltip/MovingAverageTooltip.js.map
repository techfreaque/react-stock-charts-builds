{"version":3,"file":"MovingAverageTooltip.js","names":["SingleMAToolTip","props","handleClick","bind","e","onClick","forChart","options","chartId","textFill","labelFill","translate","origin","color","fontFamily","fontSize","displayName","value","Component","propTypes","PropTypes","array","isRequired","string","func","number","oneOfType","object","MovingAverageTooltip","renderSVG","moreProps","displayValuesFor","chartConfig","className","width","originProp","displayFormat","height","currentItem","config","functor","x","y","ox","oy","map","each","idx","yValue","yAccessor","tooltipLabel","type","windowSize","yDisplayValue","stroke","arrayOf","shape","echo","any","defaultProps","format"],"sources":["../../../src/lib/tooltip/MovingAverageTooltip.js"],"sourcesContent":["\r\n\r\nimport React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { format } from \"d3-format\";\r\nimport displayValuesFor from \"./displayValuesFor\";\r\nimport GenericChartComponent from \"../GenericChartComponent\";\r\n\r\nimport ToolTipText from \"./ToolTipText\";\r\nimport ToolTipTSpanLabel from \"./ToolTipTSpanLabel\";\r\n\r\nimport { functor } from \"../utils\";\r\n\r\nclass SingleMAToolTip extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.handleClick = this.handleClick.bind(this);\r\n\t}\r\n\thandleClick(e) {\r\n\t\tconst { onClick, forChart, options } = this.props;\r\n\t\tonClick({ chartId: forChart, ...options }, e);\r\n\t}\r\n\trender() {\r\n\t\tconst { textFill, labelFill } = this.props;\r\n\t\tconst translate = \"translate(\" + this.props.origin[0] + \", \" + this.props.origin[1] + \")\";\r\n\t\treturn (\r\n\t\t\t<g transform={translate}>\r\n\t\t\t\t<line x1={0} y1={2} x2={0} y2={28} stroke={this.props.color} strokeWidth=\"4px\"/>\r\n\t\t\t\t<ToolTipText x={5} y={11}\r\n\t\t\t\t\tfontFamily={this.props.fontFamily} fontSize={this.props.fontSize}>\r\n\t\t\t\t\t<ToolTipTSpanLabel fill={labelFill}>{this.props.displayName}</ToolTipTSpanLabel>\r\n\t\t\t\t\t<tspan x=\"5\" dy=\"15\" fillRule={textFill}>{this.props.value}</tspan>\r\n\t\t\t\t</ToolTipText>\r\n\t\t\t\t<rect x={0} y={0} width={55} height={30}\r\n\t\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\t\tfillRule=\"none\" stroke=\"none\" />\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nSingleMAToolTip.propTypes = {\r\n\torigin: PropTypes.array.isRequired,\r\n\tcolor: PropTypes.string.isRequired,\r\n\tdisplayName: PropTypes.string.isRequired,\r\n\tvalue: PropTypes.string.isRequired,\r\n\tonClick: PropTypes.func,\r\n\tfontFamily: PropTypes.string,\r\n\ttextFill: PropTypes.string,\r\n\tlabelFill: PropTypes.string,\r\n\tfontSize: PropTypes.number,\r\n\tforChart: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\r\n\toptions: PropTypes.object.isRequired,\r\n};\r\n\r\nclass MovingAverageTooltip extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.renderSVG = this.renderSVG.bind(this);\r\n\t}\r\n\trenderSVG(moreProps) {\r\n\t\tconst { displayValuesFor } = this.props;\r\n\r\n\t\tconst { chartId } = moreProps;\r\n\t\tconst { chartConfig } = moreProps;\r\n\r\n\t\tconst { className, onClick, width, fontFamily, fontSize, textFill, labelFill } = this.props;\r\n\t\tconst { origin: originProp, displayFormat, options } = this.props;\r\n\t\tconst { chartConfig: { height } } = moreProps;\r\n\r\n\t\tconst currentItem = displayValuesFor(this.props, moreProps);\r\n\t\tconst config = chartConfig;\r\n\r\n\t\tconst origin = functor(originProp);\r\n\t\tconst [x, y] = origin(width, height);\r\n\t\tconst [ox, oy] = config.origin;\r\n\r\n\t\treturn (\r\n\t\t\t<g transform={`translate(${ ox + x }, ${ oy + y })`} className={className}>\r\n\t\t\t\t{options\r\n\t\t\t\t\t.map((each, idx) => {\r\n\t\t\t\t\t\tconst yValue = currentItem && each.yAccessor(currentItem);\r\n\r\n\t\t\t\t\t\tconst tooltipLabel = `${each.type} (${each.windowSize})`;\r\n\t\t\t\t\t\tconst yDisplayValue = yValue ? displayFormat(yValue) : \"n/a\";\r\n\t\t\t\t\t\treturn <SingleMAToolTip\r\n\t\t\t\t\t\t\tkey={idx}\r\n\t\t\t\t\t\t\torigin={[width * idx, 0]}\r\n\t\t\t\t\t\t\tcolor={each.stroke}\r\n\t\t\t\t\t\t\tdisplayName={tooltipLabel}\r\n\t\t\t\t\t\t\tvalue={yDisplayValue}\r\n\t\t\t\t\t\t\toptions={each}\r\n\t\t\t\t\t\t\tforChart={chartId}\r\n\t\t\t\t\t\t\tonClick={onClick}\r\n\t\t\t\t\t\t\tfontFamily={fontFamily}\r\n\t\t\t\t\t\t\tfontSize={fontSize}\r\n\t\t\t\t\t\t\ttextFill={textFill}\r\n\t\t\t\t\t\t\tlabelFill={labelFill}\r\n\t\t\t\t\t\t/>;\r\n\t\t\t\t\t})}\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n\trender() {\r\n\t\treturn <GenericChartComponent\r\n\t\t\tclip={false}\r\n\t\t\tsvgDraw={this.renderSVG}\r\n\t\t\tdrawOn={[\"mousemove\"]}\r\n\t\t/>;\r\n\t}\r\n}\r\n\r\nMovingAverageTooltip.propTypes = {\r\n\tclassName: PropTypes.string,\r\n\tdisplayFormat: PropTypes.func.isRequired,\r\n\torigin: PropTypes.array.isRequired,\r\n\tdisplayValuesFor: PropTypes.func,\r\n\tonClick: PropTypes.func,\r\n\ttextFill: PropTypes.string,\r\n\tlabelFill: PropTypes.string,\r\n\tfontFamily: PropTypes.string,\r\n\tfontSize: PropTypes.number,\r\n\twidth: PropTypes.number,\r\n\toptions: PropTypes.arrayOf(PropTypes.shape({\r\n\t\tyAccessor: PropTypes.func.isRequired,\r\n\t\ttype: PropTypes.string.isRequired,\r\n\t\tstroke: PropTypes.string.isRequired,\r\n\t\twindowSize: PropTypes.number.isRequired,\r\n\t\techo: PropTypes.any,\r\n\t})),\r\n};\r\n\r\nMovingAverageTooltip.defaultProps = {\r\n\tclassName: \"react-stockcharts-tooltip react-stockcharts-moving-average-tooltip\",\r\n\tdisplayFormat: format(\".2f\"),\r\n\tdisplayValuesFor: displayValuesFor,\r\n\torigin: [0, 10],\r\n\twidth: 65,\r\n};\r\n\r\nexport default MovingAverageTooltip;\r\n"],"mappings":"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"}