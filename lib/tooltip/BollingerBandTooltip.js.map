{"version":3,"file":"BollingerBandTooltip.js","names":["BollingerBandTooltip","props","renderSVG","bind","moreProps","onClick","displayFormat","yAccessor","options","textFill","labelFill","displayValuesFor","chartConfig","width","height","currentItem","top","middle","bottom","isDefined","item","originProp","origin","functor","x","y","sourcePath","windowSize","multiplier","movingAverageType","tooltipLabel","tooltipValue","className","fontFamily","fontSize","Component","propTypes","PropTypes","string","func","isRequired","array","shape","number","defaultProps","format"],"sources":["../../../src/lib/tooltip/BollingerBandTooltip.js"],"sourcesContent":["\r\n\r\nimport React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { format } from \"d3-format\";\r\nimport displayValuesFor from \"./displayValuesFor\";\r\nimport GenericChartComponent from \"../GenericChartComponent\";\r\n\r\nimport { isDefined, functor } from \"../utils\";\r\nimport ToolTipText from \"./ToolTipText\";\r\nimport ToolTipTSpanLabel from \"./ToolTipTSpanLabel\";\r\n\r\nclass BollingerBandTooltip extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.renderSVG = this.renderSVG.bind(this);\r\n\t}\r\n\trenderSVG(moreProps) {\r\n\t\tconst { onClick, displayFormat, yAccessor, options, textFill, labelFill } = this.props;\r\n\t\tconst { displayValuesFor } = this.props;\r\n\r\n\t\tconst { chartConfig: { width, height } } = moreProps;\r\n\r\n\t\tconst currentItem = displayValuesFor(this.props, moreProps);\r\n\r\n\t\tlet top, middle, bottom;\r\n\t\ttop = middle = bottom = \"n/a\";\r\n\r\n\t\tif (isDefined(currentItem)\r\n\t\t\t\t&& isDefined(yAccessor(currentItem))) {\r\n\t\t\tconst item = yAccessor(currentItem);\r\n\t\t\ttop = displayFormat(item.top);\r\n\t\t\tmiddle = displayFormat(item.middle);\r\n\t\t\tbottom = displayFormat(item.bottom);\r\n\t\t}\r\n\r\n\t\tconst { origin: originProp } = this.props;\r\n\t\tconst origin = functor(originProp);\r\n\t\tconst [x, y] = origin(width, height);\r\n\r\n\t\tconst { sourcePath, windowSize, multiplier, movingAverageType } = options;\r\n\t\tconst tooltipLabel = `BB(${sourcePath}, ${windowSize}, ${multiplier}, ${movingAverageType}): `;\r\n\t\tconst tooltipValue = `${top}, ${middle}, ${bottom}`;\r\n\t\treturn (\r\n\t\t\t<g transform={`translate(${ x }, ${ y })`}\r\n\t\t\t\tclassName={this.props.className} onClick={onClick}>\r\n\t\t\t\t<ToolTipText x={0} y={0}\r\n\t\t\t\t\tfontFamily={this.props.fontFamily} fontSize={this.props.fontSize}>\r\n\t\t\t\t\t<ToolTipTSpanLabel fill={labelFill}>{tooltipLabel}</ToolTipTSpanLabel>\r\n\t\t\t\t\t<tspan fillRule={textFill}>{tooltipValue}</tspan>\r\n\t\t\t\t</ToolTipText>\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n\trender() {\r\n\t\treturn <GenericChartComponent\r\n\t\t\tclip={false}\r\n\t\t\tsvgDraw={this.renderSVG}\r\n\t\t\tdrawOn={[\"mousemove\"]}\r\n\t\t/>;\r\n\t}\r\n}\r\n\r\nBollingerBandTooltip.propTypes = {\r\n\tclassName: PropTypes.string,\r\n\tyAccessor: PropTypes.func.isRequired,\r\n\tdisplayValuesFor: PropTypes.func,\r\n\tdisplayFormat: PropTypes.func.isRequired,\r\n\torigin: PropTypes.array.isRequired,\r\n\tonClick: PropTypes.func,\r\n\toptions: PropTypes.shape({\r\n\t\tsourcePath: PropTypes.string.isRequired,\r\n\t\twindowSize: PropTypes.number.isRequired,\r\n\t\tmultiplier: PropTypes.number.isRequired,\r\n\t\tmovingAverageType: PropTypes.string.isRequired,\r\n\t}).isRequired,\r\n\ttextFill: PropTypes.string,\r\n\tlabelFill: PropTypes.string,\r\n\tfontFamily: PropTypes.string,\r\n\tfontSize: PropTypes.number,\r\n};\r\n\r\nBollingerBandTooltip.defaultProps = {\r\n\tclassName: \"react-stockcharts-tooltip react-stockcharts-bollingerband-tooltip\",\r\n\tdisplayFormat: format(\".2f\"),\r\n\tdisplayValuesFor: displayValuesFor,\r\n\torigin: [0, 10],\r\n};\r\n\r\nexport default BollingerBandTooltip;\r\n"],"mappings":"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"}