{"version":3,"file":"Axis.js","names":["Axis","props","renderSVG","bind","drawOnCanvas","saveNode","getMoreProps","node","ctx","moreProps","showDomain","showTicks","transform","range","getScale","save","translate","drawAxisLine","tickProps","tickHelper","drawTicks","restore","className","ticks","axisTicksSVG","domain","axisLineSVG","bg","axisZoomCallback","zoomCursorClassName","zoomEnabled","inverted","getMouseDelta","edgeClip","onContextMenu","onDoubleClick","zoomCapture","getAxisCanvas","Component","propTypes","innerTickSize","PropTypes","number","outerTickSize","tickFormat","func","tickPadding","tickSize","tickLabelFill","string","tickStroke","tickStrokeOpacity","tickStrokeWidth","tickStrokeDasharray","oneOf","strokeDashTypes","tickValues","oneOfType","array","tickInterval","tickIntervalFunction","bool","arrayOf","isRequired","object","defaultProps","scale","orient","fontSize","fontFamily","fontWeight","flexTicks","showTickLabel","tickArguments","tickValuesProp","isDefined","min","max","baseTickValues","d3Range","baseFormat","identity","format","isNotDefined","d","sign","tickSpacing","Math","dy","canvas_dy","textAnchor","map","x","round","value","x1","y1","x2","y2","labelX","labelY","nodes","id","fy","origX","simulation","forceSimulation","force","forceX","strength","forceCollide","stop","i","tick","zip","zipper","combine","a","b","abs","y","domainClassName","fill","stroke","strokeWidth","opacity","xAxis","lineWidth","strokeStyle","hexToRGBA","beginPath","moveTo","first","lineTo","last","Tick","getStrokeDasharray","children","result","idx","fillStyle","forEach","drawEachTick","font","textAlign","drawEachTickLabel","setLineDash","split","fillText"],"sources":["../../../src/lib/axes/Axis.js"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { forceSimulation, forceX, forceCollide } from \"d3-force\";\r\nimport { range as d3Range } from \"d3-array\";\r\n\r\nimport GenericChartComponent from \"../GenericChartComponent\";\r\nimport { getAxisCanvas } from \"../GenericComponent\";\r\nimport AxisZoomCapture from \"./AxisZoomCapture\";\r\n\r\nimport {\r\n    first,\r\n    last,\r\n    hexToRGBA,\r\n    isNotDefined,\r\n    isDefined,\r\n    identity,\r\n    zipper,\r\n    strokeDashTypes,\r\n    getStrokeDasharray,\r\n} from \"../utils\";\r\n\r\nclass Axis extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.renderSVG = this.renderSVG.bind(this);\r\n        this.drawOnCanvas = this.drawOnCanvas.bind(this);\r\n        this.saveNode = this.saveNode.bind(this);\r\n        this.getMoreProps = this.getMoreProps.bind(this);\r\n    }\r\n    saveNode(node) {\r\n        this.node = node;\r\n    }\r\n    getMoreProps() {\r\n        return this.node.getMoreProps();\r\n    }\r\n    drawOnCanvas(ctx, moreProps) {\r\n        const { showDomain, showTicks, transform, range, getScale } =\r\n            this.props;\r\n\r\n        ctx.save();\r\n        ctx.translate(transform[0], transform[1]);\r\n\r\n        if (showDomain) drawAxisLine(ctx, this.props, range);\r\n        if (showTicks) {\r\n            const tickProps = tickHelper(this.props, getScale(moreProps));\r\n            drawTicks(ctx, tickProps);\r\n        }\r\n\r\n        ctx.restore();\r\n    }\r\n    renderSVG(moreProps) {\r\n        const { className } = this.props;\r\n        const { showDomain, showTicks, range, getScale } = this.props;\r\n\r\n        const ticks = showTicks\r\n            ? axisTicksSVG(this.props, getScale(moreProps))\r\n            : null;\r\n        const domain = showDomain ? axisLineSVG(this.props, range) : null;\r\n\r\n        return (\r\n            <g className={className}>\r\n                {ticks}\r\n                {domain}\r\n            </g>\r\n        );\r\n    }\r\n    render() {\r\n        const {\r\n            bg,\r\n            axisZoomCallback,\r\n            className,\r\n            zoomCursorClassName,\r\n            zoomEnabled,\r\n            getScale,\r\n            inverted,\r\n        } = this.props;\r\n        const { transform, getMouseDelta, edgeClip } = this.props;\r\n        const { onContextMenu, onDoubleClick } = this.props;\r\n\r\n        const zoomCapture = zoomEnabled ? (\r\n            <AxisZoomCapture\r\n                bg={bg}\r\n                getScale={getScale}\r\n                getMoreProps={this.getMoreProps}\r\n                getMouseDelta={getMouseDelta}\r\n                axisZoomCallback={axisZoomCallback}\r\n                className={className}\r\n                zoomCursorClassName={zoomCursorClassName}\r\n                inverted={inverted}\r\n                onContextMenu={onContextMenu}\r\n                onDoubleClick={onDoubleClick}\r\n            />\r\n        ) : null;\r\n\r\n        return (\r\n            <g transform={`translate(${transform[0]}, ${transform[1]})`}>\r\n                {zoomCapture}\r\n                <GenericChartComponent\r\n                    ref={this.saveNode}\r\n                    canvasToDraw={getAxisCanvas}\r\n                    clip={false}\r\n                    edgeClip={edgeClip}\r\n                    svgDraw={this.renderSVG}\r\n                    canvasDraw={this.drawOnCanvas}\r\n                    drawOn={[\"pan\"]}\r\n                />\r\n            </g>\r\n        );\r\n    }\r\n}\r\n\r\nAxis.propTypes = {\r\n    innerTickSize: PropTypes.number,\r\n    outerTickSize: PropTypes.number,\r\n    tickFormat: PropTypes.func,\r\n    tickPadding: PropTypes.number,\r\n    tickSize: PropTypes.number,\r\n    ticks: PropTypes.number,\r\n    tickLabelFill: PropTypes.string,\r\n    tickStroke: PropTypes.string,\r\n    tickStrokeOpacity: PropTypes.number,\r\n    tickStrokeWidth: PropTypes.number,\r\n    tickStrokeDasharray: PropTypes.oneOf(strokeDashTypes),\r\n    tickValues: PropTypes.oneOfType([PropTypes.array, PropTypes.func]),\r\n    tickInterval: PropTypes.number,\r\n    tickIntervalFunction: PropTypes.func,\r\n    showDomain: PropTypes.bool,\r\n    showTicks: PropTypes.bool,\r\n    className: PropTypes.string,\r\n    axisZoomCallback: PropTypes.func,\r\n    zoomEnabled: PropTypes.bool,\r\n    inverted: PropTypes.bool,\r\n    zoomCursorClassName: PropTypes.string,\r\n    transform: PropTypes.arrayOf(PropTypes.number).isRequired,\r\n    range: PropTypes.arrayOf(PropTypes.number).isRequired,\r\n    getMouseDelta: PropTypes.func.isRequired,\r\n    getScale: PropTypes.func.isRequired,\r\n    bg: PropTypes.object.isRequired,\r\n    edgeClip: PropTypes.bool.isRequired,\r\n    onContextMenu: PropTypes.func,\r\n    onDoubleClick: PropTypes.func,\r\n};\r\n\r\nAxis.defaultProps = {\r\n    zoomEnabled: false,\r\n    zoomCursorClassName: \"\",\r\n    edgeClip: false,\r\n};\r\n\r\nfunction tickHelper(props, scale) {\r\n    const {\r\n        orient,\r\n        innerTickSize,\r\n        tickFormat,\r\n        tickPadding,\r\n        tickLabelFill,\r\n        tickStrokeWidth,\r\n        tickStrokeDasharray,\r\n        fontSize,\r\n        fontFamily,\r\n        fontWeight,\r\n        showTicks,\r\n        flexTicks,\r\n        showTickLabel,\r\n    } = props;\r\n    const {\r\n        ticks: tickArguments,\r\n        tickValues: tickValuesProp,\r\n        tickStroke,\r\n        tickStrokeOpacity,\r\n        tickInterval,\r\n        tickIntervalFunction,\r\n    } = props;\r\n\r\n    // if (tickArguments) tickArguments = [tickArguments];\r\n\r\n    let tickValues;\r\n    if (isDefined(tickValuesProp)) {\r\n        if (typeof tickValuesProp === \"function\") {\r\n            tickValues = tickValuesProp(scale.domain());\r\n        } else {\r\n            tickValues = tickValuesProp;\r\n        }\r\n    } else if (isDefined(tickInterval)) {\r\n        const [min, max] = scale.domain();\r\n        const baseTickValues = d3Range(min, max, (max - min) / tickInterval);\r\n\r\n        tickValues = tickIntervalFunction\r\n            ? tickIntervalFunction(min, max, tickInterval)\r\n            : baseTickValues;\r\n    } else if (isDefined(scale.ticks)) {\r\n        tickValues = scale.ticks(tickArguments, flexTicks);\r\n    } else {\r\n        tickValues = scale.domain();\r\n    }\r\n\r\n    const baseFormat = scale.tickFormat\r\n        ? scale.tickFormat(tickArguments)\r\n        : identity;\r\n\r\n    const format = isNotDefined(tickFormat)\r\n        ? baseFormat\r\n        : (d) => tickFormat(d) || \"\";\r\n\r\n    const sign = orient === \"top\" || orient === \"left\" ? -1 : 1;\r\n    const tickSpacing = Math.max(innerTickSize, 0) + tickPadding;\r\n\r\n    let ticks, dy, canvas_dy, textAnchor;\r\n\r\n    if (orient === \"bottom\" || orient === \"top\") {\r\n        dy = sign < 0 ? \"0em\" : \".71em\";\r\n        canvas_dy = sign < 0 ? 0 : fontSize * 0.71;\r\n        textAnchor = \"middle\";\r\n\r\n        ticks = tickValues.map((d) => {\r\n            const x = Math.round(scale(d));\r\n            return {\r\n                value: d,\r\n                x1: x,\r\n                y1: 0,\r\n                x2: x,\r\n                y2: sign * innerTickSize,\r\n                labelX: x,\r\n                labelY: sign * tickSpacing,\r\n            };\r\n        });\r\n\r\n        if (showTicks && flexTicks) {\r\n            // console.log(ticks, showTicks);\r\n\r\n            const nodes = ticks.map((d) => ({\r\n                id: d.value,\r\n                value: d.value,\r\n                fy: d.y2,\r\n                origX: d.x1,\r\n            }));\r\n\r\n            const simulation = forceSimulation(nodes)\r\n                .force(\"x\", forceX((d) => d.origX).strength(1))\r\n                .force(\"collide\", forceCollide(22))\r\n                // .force(\"center\", forceCenter())\r\n                .stop();\r\n\r\n            for (let i = 0; i < 100; ++i) simulation.tick();\r\n            // console.log(nodes);\r\n\r\n            const zip = zipper().combine((a, b) => {\r\n                if (Math.abs(b.x - b.origX) > 0.01) {\r\n                    return {\r\n                        ...a,\r\n                        x2: b.x,\r\n                        labelX: b.x,\r\n                    };\r\n                }\r\n                return a;\r\n            });\r\n\r\n            ticks = zip(ticks, nodes);\r\n        }\r\n    } else {\r\n        ticks = tickValues.map((d) => {\r\n            const y = Math.round(scale(d));\r\n            return {\r\n                value: d,\r\n                x1: 0,\r\n                y1: y,\r\n                x2: sign * innerTickSize,\r\n                y2: y,\r\n                labelX: sign * tickSpacing,\r\n                labelY: y,\r\n            };\r\n        });\r\n\r\n        dy = \".32em\";\r\n        canvas_dy = fontSize * 0.32;\r\n        textAnchor = sign < 0 ? \"end\" : \"start\";\r\n    }\r\n\r\n    return {\r\n        ticks,\r\n        scale,\r\n        tickStroke,\r\n        tickLabelFill: tickLabelFill || tickStroke,\r\n        tickStrokeOpacity,\r\n        tickStrokeWidth,\r\n        tickStrokeDasharray,\r\n        dy,\r\n        canvas_dy,\r\n        textAnchor,\r\n        fontSize,\r\n        fontFamily,\r\n        fontWeight,\r\n        format,\r\n        showTickLabel,\r\n    };\r\n}\r\n\r\n/* eslint-disable react/prop-types */\r\nfunction axisLineSVG(props, range) {\r\n    const { orient, outerTickSize } = props;\r\n    const { domainClassName, fill, stroke, strokeWidth, opacity } = props;\r\n\r\n    const sign = orient === \"top\" || orient === \"left\" ? -1 : 1;\r\n\r\n    let d;\r\n\r\n    if (orient === \"bottom\" || orient === \"top\") {\r\n        d =\r\n            \"M\" +\r\n            range[0] +\r\n            \",\" +\r\n            sign * outerTickSize +\r\n            \"V0H\" +\r\n            range[1] +\r\n            \"V\" +\r\n            sign * outerTickSize;\r\n    } else {\r\n        d =\r\n            \"M\" +\r\n            sign * outerTickSize +\r\n            \",\" +\r\n            range[0] +\r\n            \"H0V\" +\r\n            range[1] +\r\n            \"H\" +\r\n            sign * outerTickSize;\r\n    }\r\n\r\n    return (\r\n        <path\r\n            className={domainClassName}\r\n            d={d}\r\n            fillRule={fill}\r\n            opacity={opacity}\r\n            stroke={stroke}\r\n            strokeWidth={strokeWidth}\r\n        ></path>\r\n    );\r\n}\r\n/* eslint-enable react/prop-types */\r\n\r\nfunction drawAxisLine(ctx, props, range) {\r\n    // props = { ...AxisLine.defaultProps, ...props };\r\n\r\n    const { orient, outerTickSize, stroke, strokeWidth, opacity } = props;\r\n\r\n    const sign = orient === \"top\" || orient === \"left\" ? -1 : 1;\r\n    const xAxis = orient === \"bottom\" || orient === \"top\";\r\n\r\n    // var range = d3_scaleRange(xAxis ? xScale : yScale);\r\n\r\n    ctx.lineWidth = strokeWidth;\r\n    ctx.strokeStyle = hexToRGBA(stroke, opacity);\r\n\r\n    ctx.beginPath();\r\n\r\n    if (xAxis) {\r\n        ctx.moveTo(first(range), sign * outerTickSize);\r\n        ctx.lineTo(first(range), 0);\r\n        ctx.lineTo(last(range), 0);\r\n        ctx.lineTo(last(range), sign * outerTickSize);\r\n    } else {\r\n        ctx.moveTo(sign * outerTickSize, first(range));\r\n        ctx.lineTo(0, first(range));\r\n        ctx.lineTo(0, last(range));\r\n        ctx.lineTo(sign * outerTickSize, last(range));\r\n    }\r\n    ctx.stroke();\r\n}\r\n\r\nfunction Tick(props) {\r\n    const {\r\n        tickLabelFill,\r\n        tickStroke,\r\n        tickStrokeOpacity,\r\n        tickStrokeDasharray,\r\n        tickStrokeWidth,\r\n        textAnchor,\r\n        fontSize,\r\n        fontFamily,\r\n        fontWeight,\r\n    } = props;\r\n    const { x1, y1, x2, y2, labelX, labelY, dy } = props;\r\n    return (\r\n        <g className=\"tick\">\r\n            <line\r\n                shapeRendering=\"crispEdges\"\r\n                opacity={tickStrokeOpacity}\r\n                stroke={tickStroke}\r\n                strokeWidth={tickStrokeWidth}\r\n                strokeDasharray={getStrokeDasharray(tickStrokeDasharray)}\r\n                x1={x1}\r\n                y1={y1}\r\n                x2={x2}\r\n                y2={y2}\r\n            />\r\n            <text\r\n                dy={dy}\r\n                x={labelX}\r\n                y={labelY}\r\n                fillRule={tickLabelFill}\r\n                fontSize={fontSize}\r\n                fontWeight={fontWeight}\r\n                fontFamily={fontFamily}\r\n                textAnchor={textAnchor}\r\n            >\r\n                {props.children}\r\n            </text>\r\n        </g>\r\n    );\r\n}\r\n\r\nTick.propTypes = {\r\n    children: PropTypes.string.isRequired,\r\n    x1: PropTypes.number.isRequired,\r\n    y1: PropTypes.number.isRequired,\r\n    x2: PropTypes.number.isRequired,\r\n    y2: PropTypes.number.isRequired,\r\n    labelX: PropTypes.number.isRequired,\r\n    labelY: PropTypes.number.isRequired,\r\n    dy: PropTypes.string.isRequired,\r\n    tickStroke: PropTypes.string,\r\n    tickLabelFill: PropTypes.string,\r\n    tickStrokeWidth: PropTypes.number,\r\n    tickStrokeOpacity: PropTypes.number,\r\n    tickStrokeDasharray: PropTypes.oneOf(strokeDashTypes),\r\n    textAnchor: PropTypes.string,\r\n    fontSize: PropTypes.number,\r\n    fontFamily: PropTypes.string,\r\n    fontWeight: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n};\r\n\r\nfunction axisTicksSVG(props, scale) {\r\n    const result = tickHelper(props, scale);\r\n\r\n    const {\r\n        tickLabelFill,\r\n        tickStroke,\r\n        tickStrokeOpacity,\r\n        tickStrokeWidth,\r\n        tickStrokeDasharray,\r\n        textAnchor,\r\n    } = result;\r\n    const { fontSize, fontFamily, fontWeight, ticks, format } = result;\r\n\r\n    const { dy } = result;\r\n\r\n    return (\r\n        <g>\r\n            {ticks.map((tick, idx) => {\r\n                return (\r\n                    <Tick\r\n                        key={idx}\r\n                        tickStroke={tickStroke}\r\n                        tickLabelFill={tickLabelFill}\r\n                        tickStrokeWidth={tickStrokeWidth}\r\n                        tickStrokeOpacity={tickStrokeOpacity}\r\n                        tickStrokeDasharray={tickStrokeDasharray}\r\n                        dy={dy}\r\n                        x1={tick.x1}\r\n                        y1={tick.y1}\r\n                        x2={tick.x2}\r\n                        y2={tick.y2}\r\n                        labelX={tick.labelX}\r\n                        labelY={tick.labelY}\r\n                        textAnchor={textAnchor}\r\n                        fontSize={fontSize}\r\n                        fontWeight={fontWeight}\r\n                        fontFamily={fontFamily}\r\n                    >\r\n                        {format(tick.value)}\r\n                    </Tick>\r\n                );\r\n            })}\r\n        </g>\r\n    );\r\n}\r\n\r\nfunction drawTicks(ctx, result) {\r\n    const { tickStroke, tickStrokeOpacity, tickLabelFill } = result;\r\n    const {\r\n        textAnchor,\r\n        fontSize,\r\n        fontFamily,\r\n        fontWeight,\r\n        ticks,\r\n        showTickLabel,\r\n    } = result;\r\n\r\n    ctx.strokeStyle = hexToRGBA(tickStroke, tickStrokeOpacity);\r\n\r\n    ctx.fillStyle = tickStroke;\r\n    // ctx.textBaseline = 'middle';\r\n\r\n    ticks.forEach((tick) => {\r\n        drawEachTick(ctx, tick, result);\r\n    });\r\n\r\n    ctx.font = `${fontWeight} ${fontSize}px ${fontFamily}`;\r\n    ctx.fillStyle = tickLabelFill;\r\n    ctx.textAlign = textAnchor === \"middle\" ? \"center\" : textAnchor;\r\n\r\n    if (showTickLabel) {\r\n        ticks.forEach((tick) => {\r\n            drawEachTickLabel(ctx, tick, result);\r\n        });\r\n    }\r\n}\r\n\r\nfunction drawEachTick(ctx, tick, result) {\r\n    const { tickStrokeWidth, tickStrokeDasharray } = result;\r\n\r\n    ctx.beginPath();\r\n\r\n    ctx.moveTo(tick.x1, tick.y1);\r\n    ctx.lineTo(tick.x2, tick.y2);\r\n    ctx.lineWidth = tickStrokeWidth;\r\n    ctx.setLineDash(getStrokeDasharray(tickStrokeDasharray).split(\",\"));\r\n    ctx.stroke();\r\n}\r\n\r\nfunction drawEachTickLabel(ctx, tick, result) {\r\n    const { canvas_dy, format } = result;\r\n\r\n    ctx.beginPath();\r\n    ctx.fillText(format(tick.value), tick.labelX, tick.labelY + canvas_dy);\r\n}\r\n\r\nexport default Axis;\r\n"],"mappings":"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"}