{"version":3,"file":"Axis.js","names":["Axis","props","renderSVG","bind","drawOnCanvas","saveNode","getMoreProps","node","ctx","moreProps","showDomain","showTicks","transform","range","getScale","save","translate","drawAxisLine","tickProps","tickHelper","drawTicks","restore","className","ticks","axisTicksSVG","domain","axisLineSVG","bg","axisZoomCallback","zoomCursorClassName","zoomEnabled","inverted","getMouseDelta","edgeClip","onContextMenu","onDoubleClick","zoomCapture","getAxisCanvas","Component","propTypes","innerTickSize","PropTypes","number","outerTickSize","tickFormat","func","tickPadding","tickSize","tickLabelFill","string","tickStroke","tickStrokeOpacity","tickStrokeWidth","tickStrokeDasharray","oneOf","strokeDashTypes","tickValues","oneOfType","array","tickInterval","tickIntervalFunction","bool","arrayOf","isRequired","object","defaultProps","scale","orient","fontSize","fontFamily","fontWeight","flexTicks","showTickLabel","tickArguments","tickValuesProp","isDefined","min","max","baseTickValues","d3Range","baseFormat","identity","format","isNotDefined","d","sign","tickSpacing","Math","dy","canvas_dy","textAnchor","map","x","round","value","x1","y1","x2","y2","labelX","labelY","nodes","id","fy","origX","simulation","forceSimulation","force","forceX","strength","forceCollide","stop","i","tick","zip","zipper","combine","a","b","abs","y","domainClassName","fill","stroke","strokeWidth","opacity","xAxis","lineWidth","strokeStyle","hexToRGBA","beginPath","moveTo","first","lineTo","last","Tick","getStrokeDasharray","children","result","idx","fillStyle","forEach","drawEachTick","font","textAlign","drawEachTickLabel","setLineDash","split","fillText"],"sources":["../../../src/lib/axes/Axis.js"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { forceSimulation, forceX, forceCollide } from \"d3-force\";\r\nimport { range as d3Range } from \"d3-array\";\r\n\r\nimport GenericChartComponent from \"../GenericChartComponent\";\r\nimport { getAxisCanvas } from \"../GenericComponent\";\r\nimport AxisZoomCapture from \"./AxisZoomCapture\";\r\n\r\nimport { first, last, hexToRGBA, isNotDefined, isDefined, identity, zipper, strokeDashTypes, getStrokeDasharray } from \"../utils\";\r\n\r\nclass Axis extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.renderSVG = this.renderSVG.bind(this);\r\n\t\tthis.drawOnCanvas = this.drawOnCanvas.bind(this);\r\n\t\tthis.saveNode = this.saveNode.bind(this);\r\n\t\tthis.getMoreProps = this.getMoreProps.bind(this);\r\n\t}\r\n\tsaveNode(node) {\r\n\t\tthis.node = node;\r\n\t}\r\n\tgetMoreProps() {\r\n\t\treturn this.node.getMoreProps();\r\n\t}\r\n\tdrawOnCanvas(ctx, moreProps) {\r\n\t\tconst { showDomain, showTicks, transform, range, getScale } = this.props;\r\n\r\n\t\tctx.save();\r\n\t\tctx.translate(transform[0], transform[1]);\r\n\r\n\t\tif (showDomain) drawAxisLine(ctx, this.props, range);\r\n\t\tif (showTicks) {\r\n\t\t\tconst tickProps = tickHelper(this.props, getScale(moreProps));\r\n\t\t\tdrawTicks(ctx, tickProps);\r\n\t\t}\r\n\r\n\t\tctx.restore();\r\n\t}\r\n\trenderSVG(moreProps) {\r\n\t\tconst { className } = this.props;\r\n\t\tconst { showDomain, showTicks, range, getScale } = this.props;\r\n\r\n\t\tconst ticks = showTicks ? axisTicksSVG(this.props, getScale(moreProps)) : null;\r\n\t\tconst domain = showDomain ? axisLineSVG(this.props, range) : null;\r\n\r\n\t\treturn <g className={className}>\r\n\t\t\t{ticks}\r\n\t\t\t{domain}\r\n\t\t</g>;\r\n\t}\r\n\trender() {\r\n\t\tconst { bg, axisZoomCallback, className, zoomCursorClassName, zoomEnabled, getScale, inverted } = this.props;\r\n\t\tconst { transform, getMouseDelta, edgeClip } = this.props;\r\n\t\tconst { onContextMenu, onDoubleClick } = this.props;\r\n\r\n\t\tconst zoomCapture = zoomEnabled\r\n\t\t\t? <AxisZoomCapture\r\n\t\t\t\tbg={bg}\r\n\t\t\t\tgetScale={getScale}\r\n\t\t\t\tgetMoreProps={this.getMoreProps}\r\n\t\t\t\tgetMouseDelta={getMouseDelta}\r\n\t\t\t\taxisZoomCallback={axisZoomCallback}\r\n\t\t\t\tclassName={className}\r\n\t\t\t\tzoomCursorClassName={zoomCursorClassName}\r\n\t\t\t\tinverted={inverted}\r\n\t\t\t\tonContextMenu={onContextMenu}\r\n\t\t\t\tonDoubleClick={onDoubleClick}\r\n\t\t\t/>\r\n\t\t\t: null;\r\n\r\n\t\treturn <g transform={`translate(${ transform[0] }, ${ transform[1] })`}>\r\n\t\t\t{zoomCapture}\r\n\t\t\t<GenericChartComponent ref={this.saveNode}\r\n\t\t\t\tcanvasToDraw={getAxisCanvas}\r\n\t\t\t\tclip={false}\r\n\t\t\t\tedgeClip={edgeClip}\r\n\t\t\t\tsvgDraw={this.renderSVG}\r\n\t\t\t\tcanvasDraw={this.drawOnCanvas}\r\n\t\t\t\tdrawOn={[\"pan\"]}\r\n\t\t\t/>\r\n\t\t</g>;\r\n\t}\r\n}\r\n\r\nAxis.propTypes = {\r\n\tinnerTickSize: PropTypes.number,\r\n\touterTickSize: PropTypes.number,\r\n\ttickFormat: PropTypes.func,\r\n\ttickPadding: PropTypes.number,\r\n\ttickSize: PropTypes.number,\r\n\tticks: PropTypes.number,\r\n\ttickLabelFill: PropTypes.string,\r\n\ttickStroke: PropTypes.string,\r\n\ttickStrokeOpacity: PropTypes.number,\r\n\ttickStrokeWidth: PropTypes.number,\r\n\ttickStrokeDasharray: PropTypes.oneOf(strokeDashTypes),\r\n\ttickValues: PropTypes.oneOfType([PropTypes.array, PropTypes.func]),\r\n\ttickInterval: PropTypes.number,\r\n\ttickIntervalFunction: PropTypes.func,\r\n\tshowDomain: PropTypes.bool,\r\n\tshowTicks: PropTypes.bool,\r\n\tclassName: PropTypes.string,\r\n\taxisZoomCallback: PropTypes.func,\r\n\tzoomEnabled: PropTypes.bool,\r\n\tinverted: PropTypes.bool,\r\n\tzoomCursorClassName: PropTypes.string,\r\n\ttransform: PropTypes.arrayOf(PropTypes.number).isRequired,\r\n\trange: PropTypes.arrayOf(PropTypes.number).isRequired,\r\n\tgetMouseDelta: PropTypes.func.isRequired,\r\n\tgetScale: PropTypes.func.isRequired,\r\n\tbg: PropTypes.object.isRequired,\r\n\tedgeClip: PropTypes.bool.isRequired,\r\n\tonContextMenu: PropTypes.func,\r\n\tonDoubleClick: PropTypes.func,\r\n};\r\n\r\nAxis.defaultProps = {\r\n\tzoomEnabled: false,\r\n\tzoomCursorClassName: \"\",\r\n\tedgeClip: false,\r\n};\r\n\r\nfunction tickHelper(props, scale) {\r\n\tconst {\r\n\t\torient, innerTickSize, tickFormat, tickPadding,\r\n\t\ttickLabelFill, tickStrokeWidth, tickStrokeDasharray,\r\n\t\tfontSize, fontFamily, fontWeight, showTicks, flexTicks,\r\n\t\tshowTickLabel\r\n\t} = props;\r\n\tconst {\r\n\t\tticks: tickArguments, tickValues: tickValuesProp,\r\n\t\ttickStroke, tickStrokeOpacity, tickInterval, tickIntervalFunction\r\n\t} = props;\r\n\r\n\t// if (tickArguments) tickArguments = [tickArguments];\r\n\r\n\tlet tickValues;\r\n\tif (isDefined(tickValuesProp)) {\r\n\t\tif (typeof tickValuesProp === \"function\") {\r\n\t\t\ttickValues = tickValuesProp(scale.domain());\r\n\t\t} else {\r\n\t\t\ttickValues = tickValuesProp;\r\n\t\t}\r\n\t} else if (isDefined(tickInterval)) {\r\n\t\tconst [min, max] = scale.domain();\r\n\t\tconst baseTickValues = d3Range(min, max, (max - min) / tickInterval);\r\n\r\n\t\ttickValues = tickIntervalFunction\r\n\t\t\t? tickIntervalFunction(min, max, tickInterval)\r\n\t\t\t: baseTickValues;\r\n\t} else if (isDefined(scale.ticks)) {\r\n\t\ttickValues = scale.ticks(tickArguments, flexTicks);\r\n\t} else {\r\n\t\ttickValues = scale.domain();\r\n\t}\r\n\r\n\tconst baseFormat = scale.tickFormat\r\n\t\t? scale.tickFormat(tickArguments)\r\n\t\t: identity;\r\n\r\n\tconst format = isNotDefined(tickFormat)\r\n\t\t? baseFormat\r\n\t\t: d => tickFormat(d) || \"\";\r\n\r\n\tconst sign = orient === \"top\" || orient === \"left\" ? -1 : 1;\r\n\tconst tickSpacing = Math.max(innerTickSize, 0) + tickPadding;\r\n\r\n\tlet ticks, dy, canvas_dy, textAnchor;\r\n\r\n\tif (orient === \"bottom\" || orient === \"top\") {\r\n\t\tdy = sign < 0 ? \"0em\" : \".71em\";\r\n\t\tcanvas_dy = sign < 0 ? 0 : (fontSize * .71);\r\n\t\ttextAnchor = \"middle\";\r\n\r\n\t\tticks = tickValues.map(d => {\r\n\t\t\tconst x = Math.round(scale(d));\r\n\t\t\treturn {\r\n\t\t\t\tvalue: d,\r\n\t\t\t\tx1: x,\r\n\t\t\t\ty1: 0,\r\n\t\t\t\tx2: x,\r\n\t\t\t\ty2: sign * innerTickSize,\r\n\t\t\t\tlabelX: x,\r\n\t\t\t\tlabelY: sign * tickSpacing,\r\n\t\t\t};\r\n\t\t});\r\n\r\n\t\tif (showTicks && flexTicks) {\r\n\t\t\t// console.log(ticks, showTicks);\r\n\r\n\t\t\tconst nodes = ticks.map(d => ({ id: d.value, value: d.value, fy: d.y2, origX: d.x1 }));\r\n\r\n\t\t\tconst simulation = forceSimulation(nodes)\r\n\t\t\t\t.force(\"x\", forceX(d => d.origX).strength(1))\r\n\t\t\t\t.force(\"collide\", forceCollide(22))\r\n\t\t\t\t// .force(\"center\", forceCenter())\r\n\t\t\t\t.stop();\r\n\r\n\t\t\tfor (let i = 0; i < 100; ++i) simulation.tick();\r\n\t\t\t// console.log(nodes);\r\n\r\n\t\t\tconst zip = zipper()\r\n\t\t\t\t.combine((a, b) => {\r\n\t\t\t\t\tif (Math.abs(b.x - b.origX) > 0.01) {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t...a,\r\n\t\t\t\t\t\t\tx2: b.x,\r\n\t\t\t\t\t\t\tlabelX: b.x\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn a;\r\n\t\t\t\t});\r\n\r\n\t\t\tticks = zip(ticks, nodes);\r\n\t\t}\r\n\r\n\r\n\t} else {\r\n\t\tticks = tickValues.map(d => {\r\n\t\t\tconst y = Math.round(scale(d));\r\n\t\t\treturn {\r\n\t\t\t\tvalue: d,\r\n\t\t\t\tx1: 0,\r\n\t\t\t\ty1: y,\r\n\t\t\t\tx2: sign * innerTickSize,\r\n\t\t\t\ty2: y,\r\n\t\t\t\tlabelX: sign * tickSpacing,\r\n\t\t\t\tlabelY: y,\r\n\t\t\t};\r\n\t\t});\r\n\r\n\t\tdy = \".32em\";\r\n\t\tcanvas_dy = (fontSize * .32);\r\n\t\ttextAnchor = sign < 0 ? \"end\" : \"start\";\r\n\t}\r\n\r\n\treturn {\r\n\t\tticks, scale, tickStroke,\r\n\t\ttickLabelFill: (tickLabelFill || tickStroke),\r\n\t\ttickStrokeOpacity,\r\n\t\ttickStrokeWidth,\r\n\t\ttickStrokeDasharray,\r\n\t\tdy,\r\n\t\tcanvas_dy,\r\n\t\ttextAnchor,\r\n\t\tfontSize,\r\n\t\tfontFamily,\r\n\t\tfontWeight,\r\n\t\tformat,\r\n\t\tshowTickLabel,\r\n\t};\r\n}\r\n\r\n/* eslint-disable react/prop-types */\r\nfunction axisLineSVG(props, range) {\r\n\tconst { orient, outerTickSize } = props;\r\n\tconst { domainClassName, fill, stroke, strokeWidth, opacity } = props;\r\n\r\n\tconst sign = orient === \"top\" || orient === \"left\" ? -1 : 1;\r\n\r\n\tlet d;\r\n\r\n\tif (orient === \"bottom\" || orient === \"top\") {\r\n\t\td = \"M\" + range[0] + \",\" + sign * outerTickSize + \"V0H\" + range[1] + \"V\" + sign * outerTickSize;\r\n\t} else {\r\n\t\td = \"M\" + sign * outerTickSize + \",\" + range[0] + \"H0V\" + range[1] + \"H\" + sign * outerTickSize;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<path\r\n\t\t\tclassName={domainClassName}\r\n\t\t\td={d}\r\n\t\t\tfill={fill}\r\n\t\t\topacity={opacity}\r\n\t\t\tstroke={stroke}\r\n\t\t\tstrokeWidth={strokeWidth} >\r\n\t\t</path>\r\n\t);\r\n}\r\n/* eslint-enable react/prop-types */\r\n\r\n\r\nfunction drawAxisLine(ctx, props, range) {\r\n\t// props = { ...AxisLine.defaultProps, ...props };\r\n\r\n\tconst { orient, outerTickSize, stroke, strokeWidth, opacity } = props;\r\n\r\n\tconst sign = orient === \"top\" || orient === \"left\" ? -1 : 1;\r\n\tconst xAxis = (orient === \"bottom\" || orient === \"top\");\r\n\r\n\t// var range = d3_scaleRange(xAxis ? xScale : yScale);\r\n\r\n\tctx.lineWidth = strokeWidth;\r\n\tctx.strokeStyle = hexToRGBA(stroke, opacity);\r\n\r\n\tctx.beginPath();\r\n\r\n\tif (xAxis) {\r\n\t\tctx.moveTo(first(range), sign * outerTickSize);\r\n\t\tctx.lineTo(first(range), 0);\r\n\t\tctx.lineTo(last(range), 0);\r\n\t\tctx.lineTo(last(range), sign * outerTickSize);\r\n\t} else {\r\n\t\tctx.moveTo(sign * outerTickSize, first(range));\r\n\t\tctx.lineTo(0, first(range));\r\n\t\tctx.lineTo(0, last(range));\r\n\t\tctx.lineTo(sign * outerTickSize, last(range));\r\n\t}\r\n\tctx.stroke();\r\n}\r\n\r\nfunction Tick(props) {\r\n\tconst { tickLabelFill, tickStroke, tickStrokeOpacity, tickStrokeDasharray, tickStrokeWidth, textAnchor, fontSize, fontFamily, fontWeight } = props;\r\n\tconst { x1, y1, x2, y2, labelX, labelY, dy } = props;\r\n\treturn (\r\n\t\t<g className=\"tick\">\r\n\t\t\t<line\r\n\t\t\t\tshapeRendering=\"crispEdges\"\r\n\t\t\t\topacity={tickStrokeOpacity}\r\n\t\t\t\tstroke={tickStroke}\r\n\t\t\t\tstrokeWidth={tickStrokeWidth}\r\n\t\t\t\tstrokeDasharray={getStrokeDasharray(tickStrokeDasharray)}\r\n\t\t\t\tx1={x1} y1={y1}\r\n\t\t\t\tx2={x2} y2={y2} />\r\n\t\t\t<text\r\n\t\t\t\tdy={dy} x={labelX} y={labelY}\r\n\t\t\t\tfill={tickLabelFill}\r\n\t\t\t\tfontSize={fontSize}\r\n\t\t\t\tfontWeight={fontWeight}\r\n\t\t\t\tfontFamily={fontFamily}\r\n\t\t\t\ttextAnchor={textAnchor}>\r\n\t\t\t\t{props.children}\r\n\t\t\t</text>\r\n\t\t</g>\r\n\t);\r\n}\r\n\r\nTick.propTypes = {\r\n\tchildren: PropTypes.string.isRequired,\r\n\tx1: PropTypes.number.isRequired,\r\n\ty1: PropTypes.number.isRequired,\r\n\tx2: PropTypes.number.isRequired,\r\n\ty2: PropTypes.number.isRequired,\r\n\tlabelX: PropTypes.number.isRequired,\r\n\tlabelY: PropTypes.number.isRequired,\r\n\tdy: PropTypes.string.isRequired,\r\n\ttickStroke: PropTypes.string,\r\n\ttickLabelFill: PropTypes.string,\r\n\ttickStrokeWidth: PropTypes.number,\r\n\ttickStrokeOpacity: PropTypes.number,\r\n\ttickStrokeDasharray: PropTypes.oneOf(strokeDashTypes),\r\n\ttextAnchor: PropTypes.string,\r\n\tfontSize: PropTypes.number,\r\n\tfontFamily: PropTypes.string,\r\n\tfontWeight: PropTypes.oneOfType([\r\n\t  PropTypes.string,\r\n\t  PropTypes.number\r\n\t]),\r\n};\r\n\r\nfunction axisTicksSVG(props, scale) {\r\n\tconst result = tickHelper(props, scale);\r\n\r\n\tconst { tickLabelFill, tickStroke, tickStrokeOpacity, tickStrokeWidth, tickStrokeDasharray, textAnchor } = result;\r\n\tconst { fontSize, fontFamily, fontWeight, ticks, format } = result;\r\n\r\n\tconst { dy } = result;\r\n\r\n\treturn (\r\n\t\t<g>\r\n\t\t\t{ticks.map((tick, idx) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Tick key={idx}\r\n\t\t\t\t\t\ttickStroke={tickStroke}\r\n\t\t\t\t\t\ttickLabelFill={tickLabelFill}\r\n\t\t\t\t\t\ttickStrokeWidth={tickStrokeWidth}\r\n\t\t\t\t\t\ttickStrokeOpacity={tickStrokeOpacity}\r\n\t\t\t\t\t\ttickStrokeDasharray={tickStrokeDasharray}\r\n\t\t\t\t\t\tdy={dy}\r\n\t\t\t\t\t\tx1={tick.x1} y1={tick.y1}\r\n\t\t\t\t\t\tx2={tick.x2} y2={tick.y2}\r\n\t\t\t\t\t\tlabelX={tick.labelX} labelY={tick.labelY}\r\n\t\t\t\t\t\ttextAnchor={textAnchor}\r\n\t\t\t\t\t\tfontSize={fontSize}\r\n\t\t\t\t\t\tfontWeight={fontWeight}\r\n\t\t\t\t\t\tfontFamily={fontFamily}>{format(tick.value)}</Tick>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</g>\r\n\t);\r\n}\r\n\r\nfunction drawTicks(ctx, result) {\r\n\r\n\tconst { tickStroke, tickStrokeOpacity, tickLabelFill } = result;\r\n\tconst { textAnchor, fontSize, fontFamily, fontWeight, ticks, showTickLabel } = result;\r\n\r\n\tctx.strokeStyle = hexToRGBA(tickStroke, tickStrokeOpacity);\r\n\r\n\tctx.fillStyle = tickStroke;\r\n\t// ctx.textBaseline = 'middle';\r\n\r\n\tticks.forEach((tick) => {\r\n\t\tdrawEachTick(ctx, tick, result);\r\n\t});\r\n\r\n\tctx.font = `${fontWeight} ${fontSize}px ${fontFamily}`;\r\n\tctx.fillStyle = tickLabelFill;\r\n\tctx.textAlign = textAnchor === \"middle\" ? \"center\" : textAnchor;\r\n\r\n\tif (showTickLabel) {\r\n\t\tticks.forEach((tick) => {\r\n\t\t\tdrawEachTickLabel(ctx, tick, result);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction drawEachTick(ctx, tick, result) {\r\n\tconst { tickStrokeWidth, tickStrokeDasharray } = result;\r\n\r\n\tctx.beginPath();\r\n\r\n\tctx.moveTo(tick.x1, tick.y1);\r\n\tctx.lineTo(tick.x2, tick.y2);\r\n\tctx.lineWidth = tickStrokeWidth;\r\n\tctx.setLineDash(getStrokeDasharray(tickStrokeDasharray).split(\",\"));\r\n\tctx.stroke();\r\n}\r\n\r\nfunction drawEachTickLabel(ctx, tick, result) {\r\n\tconst { canvas_dy, format } = result;\r\n\r\n\tctx.beginPath();\r\n\tctx.fillText(format(tick.value), tick.labelX, tick.labelY + canvas_dy);\r\n}\r\n\r\nexport default Axis;\r\n"],"mappings":"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"}