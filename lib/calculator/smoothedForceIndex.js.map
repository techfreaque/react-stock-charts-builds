{"version":3,"file":"smoothedForceIndex.js","names":["underlyingAlgorithm","forceIndex","merge","zipper","combine","force","smoothed","options","defaultOptions","calculator","data","smoothingType","smoothingWindow","sourcePath","volumePath","algo","ma","ema","sma","forceMA","windowSize","undefined","undefinedLength","x","arguments","length"],"sources":["../../../src/lib/calculator/smoothedForceIndex.js"],"sourcesContent":["\r\n\r\nimport forceIndex from \"./forceIndex\";\r\nimport ema from \"./ema\";\r\nimport sma from \"./sma\";\r\nimport { zipper } from \"../utils\";\r\nimport { SmoothedForceIndex as defaultOptions } from \"./defaultOptionsForComputation\";\r\n\r\nexport default function() {\r\n\r\n\tconst underlyingAlgorithm = forceIndex();\r\n\tconst merge = zipper()\r\n\t\t.combine((force, smoothed) => {\r\n\t\t\treturn { force, smoothed };\r\n\t\t});\r\n\r\n\tlet options = defaultOptions;\r\n\tfunction calculator(data) {\r\n\t\tconst { smoothingType, smoothingWindow } = options;\r\n\t\tconst { sourcePath, volumePath } = options;\r\n\r\n\t\tconst algo = underlyingAlgorithm\r\n\t\t\t.options({ sourcePath, volumePath });\r\n\r\n\t\tconst force = algo(data);\r\n\r\n\t\tconst ma = smoothingType === \"ema\" ? ema() : sma();\r\n\t\tconst forceMA = ma\r\n\t\t\t.options({\r\n\t\t\t\twindowSize: smoothingWindow,\r\n\t\t\t\tsourcePath: undefined\r\n\t\t\t});\r\n\r\n\t\tconst smoothed = forceMA(force);\r\n\t\treturn merge(force, smoothed);\r\n\t}\r\n\r\n\tcalculator.undefinedLength = function() {\r\n\t\tconst { smoothingWindow } = options;\r\n\t\treturn underlyingAlgorithm.undefinedLength() + smoothingWindow - 1;\r\n\t};\r\n\tcalculator.options = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn options;\r\n\t\t}\r\n\t\toptions = { ...defaultOptions, ...x };\r\n\t\treturn calculator;\r\n\t};\r\n\r\n\treturn calculator;\r\n}\r\n"],"mappings":";;;;;;;AAEA;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;AAEe,oBAAW;EAEzB,IAAMA,mBAAmB,GAAG,IAAAC,sBAAA,GAA5B;EACA,IAAMC,KAAK,GAAG,IAAAC,aAAA,IACZC,OADY,CACJ,UAACC,KAAD,EAAQC,QAAR,EAAqB;IAC7B,OAAO;MAAED,KAAK,EAALA,KAAF;MAASC,QAAQ,EAARA;IAAT,CAAP;EACA,CAHY,CAAd;EAKA,IAAIC,OAAO,GAAGC,gDAAd;;EACA,SAASC,UAAT,CAAoBC,IAApB,EAA0B;IACzB,eAA2CH,OAA3C;IAAA,IAAQI,aAAR,YAAQA,aAAR;IAAA,IAAuBC,eAAvB,YAAuBA,eAAvB;IACA,gBAAmCL,OAAnC;IAAA,IAAQM,UAAR,aAAQA,UAAR;IAAA,IAAoBC,UAApB,aAAoBA,UAApB;IAEA,IAAMC,IAAI,GAAGf,mBAAmB,CAC9BO,OADW,CACH;MAAEM,UAAU,EAAVA,UAAF;MAAcC,UAAU,EAAVA;IAAd,CADG,CAAb;IAGA,IAAMT,KAAK,GAAGU,IAAI,CAACL,IAAD,CAAlB;IAEA,IAAMM,EAAE,GAAGL,aAAa,KAAK,KAAlB,GAA0B,IAAAM,eAAA,GAA1B,GAAkC,IAAAC,eAAA,GAA7C;IACA,IAAMC,OAAO,GAAGH,EAAE,CAChBT,OADc,CACN;MACRa,UAAU,EAAER,eADJ;MAERC,UAAU,EAAEQ;IAFJ,CADM,CAAhB;IAMA,IAAMf,QAAQ,GAAGa,OAAO,CAACd,KAAD,CAAxB;IACA,OAAOH,KAAK,CAACG,KAAD,EAAQC,QAAR,CAAZ;EACA;;EAEDG,UAAU,CAACa,eAAX,GAA6B,YAAW;IACvC,gBAA4Bf,OAA5B;IAAA,IAAQK,eAAR,aAAQA,eAAR;IACA,OAAOZ,mBAAmB,CAACsB,eAApB,KAAwCV,eAAxC,GAA0D,CAAjE;EACA,CAHD;;EAIAH,UAAU,CAACF,OAAX,GAAqB,UAASgB,CAAT,EAAY;IAChC,IAAI,CAACC,SAAS,CAACC,MAAf,EAAuB;MACtB,OAAOlB,OAAP;IACA;;IACDA,OAAO,mCAAQC,gDAAR,GAA2Be,CAA3B,CAAP;IACA,OAAOd,UAAP;EACA,CAND;;EAQA,OAAOA,UAAP;AACA"}