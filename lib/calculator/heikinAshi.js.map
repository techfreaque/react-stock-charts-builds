{"version":3,"file":"heikinAshi.js","names":["source","identity","calculator","data","algorithm","mappedSlidingWindow","windowSize","undefinedValue","open","high","low","close","accumulator","prev","now","date","volume","Math","max","min","x","arguments","length"],"sources":["../../../src/lib/calculator/heikinAshi.js"],"sourcesContent":["\r\n\r\nimport { mappedSlidingWindow, identity } from \"../utils\";\r\n\r\nexport default function() {\r\n\r\n\tlet source = identity;\r\n\r\n\tfunction calculator(data) {\r\n\t\tconst algorithm = mappedSlidingWindow()\r\n\t\t\t.windowSize(2)\r\n\t\t\t.undefinedValue(({ open, high, low, close }) => {\r\n\t\t\t\tclose = (open + high + low + close) / 4;\r\n\t\t\t\treturn { open, high, low, close };\r\n\t\t\t})\r\n\t\t\t.accumulator(([prev, now]) => {\r\n\t\t\t\t// console.log(prev, now);\r\n\t\t\t\tconst { date, volume } = now;\r\n\t\t\t\tconst close = (now.open + now.high + now.low + now.close) / 4;\r\n\t\t\t\tconst open = (prev.open + prev.close) / 2;\r\n\t\t\t\tconst high = Math.max(open, now.high, close);\r\n\t\t\t\tconst low = Math.min(open, now.low, close);\r\n\t\t\t\treturn { date, open, high, low, close, volume };\r\n\t\t\t});\r\n\r\n\t\treturn algorithm(data);\r\n\t}\r\n\tcalculator.source = function(x) {\r\n\t\tif (!arguments.length) {\r\n\t\t\treturn source;\r\n\t\t}\r\n\t\tsource = x;\r\n\t\treturn calculator;\r\n\t};\r\n\r\n\treturn calculator;\r\n}"],"mappings":";;;;;;;AAEA;;;;;;;;;;;;;;AAEe,oBAAW;EAEzB,IAAIA,MAAM,GAAGC,eAAb;;EAEA,SAASC,UAAT,CAAoBC,IAApB,EAA0B;IACzB,IAAMC,SAAS,GAAG,IAAAC,0BAAA,IAChBC,UADgB,CACL,CADK,EAEhBC,cAFgB,CAED,gBAAgC;MAAA,IAA7BC,IAA6B,QAA7BA,IAA6B;MAAA,IAAvBC,IAAuB,QAAvBA,IAAuB;MAAA,IAAjBC,GAAiB,QAAjBA,GAAiB;MAAA,IAAZC,KAAY,QAAZA,KAAY;MAC/CA,KAAK,GAAG,CAACH,IAAI,GAAGC,IAAP,GAAcC,GAAd,GAAoBC,KAArB,IAA8B,CAAtC;MACA,OAAO;QAAEH,IAAI,EAAJA,IAAF;QAAQC,IAAI,EAAJA,IAAR;QAAcC,GAAG,EAAHA,GAAd;QAAmBC,KAAK,EAALA;MAAnB,CAAP;IACA,CALgB,EAMhBC,WANgB,CAMJ,iBAAiB;MAAA;MAAA,IAAfC,IAAe;MAAA,IAATC,GAAS;;MAC7B;MACA,IAAQC,IAAR,GAAyBD,GAAzB,CAAQC,IAAR;MAAA,IAAcC,MAAd,GAAyBF,GAAzB,CAAcE,MAAd;MACA,IAAML,KAAK,GAAG,CAACG,GAAG,CAACN,IAAJ,GAAWM,GAAG,CAACL,IAAf,GAAsBK,GAAG,CAACJ,GAA1B,GAAgCI,GAAG,CAACH,KAArC,IAA8C,CAA5D;MACA,IAAMH,IAAI,GAAG,CAACK,IAAI,CAACL,IAAL,GAAYK,IAAI,CAACF,KAAlB,IAA2B,CAAxC;MACA,IAAMF,IAAI,GAAGQ,IAAI,CAACC,GAAL,CAASV,IAAT,EAAeM,GAAG,CAACL,IAAnB,EAAyBE,KAAzB,CAAb;MACA,IAAMD,GAAG,GAAGO,IAAI,CAACE,GAAL,CAASX,IAAT,EAAeM,GAAG,CAACJ,GAAnB,EAAwBC,KAAxB,CAAZ;MACA,OAAO;QAAEI,IAAI,EAAJA,IAAF;QAAQP,IAAI,EAAJA,IAAR;QAAcC,IAAI,EAAJA,IAAd;QAAoBC,GAAG,EAAHA,GAApB;QAAyBC,KAAK,EAALA,KAAzB;QAAgCK,MAAM,EAANA;MAAhC,CAAP;IACA,CAdgB,CAAlB;IAgBA,OAAOZ,SAAS,CAACD,IAAD,CAAhB;EACA;;EACDD,UAAU,CAACF,MAAX,GAAoB,UAASoB,CAAT,EAAY;IAC/B,IAAI,CAACC,SAAS,CAACC,MAAf,EAAuB;MACtB,OAAOtB,MAAP;IACA;;IACDA,MAAM,GAAGoB,CAAT;IACA,OAAOlB,UAAP;EACA,CAND;;EAQA,OAAOA,UAAP;AACA"}