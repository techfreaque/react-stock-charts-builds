{"version":3,"file":"Chart.js","names":["Chart","props","context","yScale","bind","listener","id","subscribe","unsubscribe","type","moreProps","state","e","onContextMenu","currentCharts","indexOf","chartConfig","find","each","copy","chartId","origin","x","y","children","PureComponent","propTypes","height","PropTypes","number","oneOfType","array","func","string","isRequired","yExtents","yExtentsCalculator","propName","componentName","isNotDefined","Error","flipYScale","bool","padding","shape","top","bottom","node","defaultProps","scaleLinear","yPan","yPanEnabled","noop","contextTypes","childContextTypes","object"],"sources":["../../src/lib/Chart.js"],"sourcesContent":["\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { scaleLinear } from \"d3-scale\";\r\n\r\nimport PureComponent from \"./utils/PureComponent\";\r\nimport {\r\n\tisNotDefined,\r\n\tnoop,\r\n\tfind,\r\n} from \"./utils\";\r\n\r\nclass Chart extends PureComponent {\r\n\tconstructor(props, context) {\r\n\t\tsuper(props, context);\r\n\t\tthis.yScale = this.yScale.bind(this);\r\n\t\tthis.listener = this.listener.bind(this);\r\n\t}\r\n\tUNSAFE_componentWillMount() {\r\n\t\tconst { id } = this.props;\r\n\t\tconst { subscribe } = this.context;\r\n\t\tsubscribe(\"chart_\" + id,\r\n\t\t\t{\r\n\t\t\t\tlistener: this.listener,\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\tcomponentWillUnmount() {\r\n\t\tconst { id } = this.props;\r\n\t\tconst { unsubscribe } = this.context;\r\n\t\tunsubscribe(\"chart_\" + id);\r\n\t}\r\n\tlistener(type, moreProps, state, e) {\r\n\t\tconst { id, onContextMenu } = this.props;\r\n\r\n\t\tif (type === \"contextmenu\") {\r\n\t\t\tconst { currentCharts } = moreProps;\r\n\t\t\tif (currentCharts.indexOf(id) > -1) {\r\n\t\t\t\tonContextMenu(moreProps, e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tyScale() {\r\n\t\tconst chartConfig = find(this.context.chartConfig, each => each.id === this.props.id);\r\n\t\treturn chartConfig.yScale.copy();\r\n\t}\r\n\tgetChildContext() {\r\n\t\tconst { id: chartId } = this.props;\r\n\t\tconst chartConfig = find(this.context.chartConfig, each => each.id === chartId);\r\n\r\n\t\treturn {\r\n\t\t\tchartId,\r\n\t\t\tchartConfig,\r\n\t\t};\r\n\t}\r\n\trender() {\r\n\t\tconst { origin } = find(this.context.chartConfig, each => each.id === this.props.id);\r\n\t\tconst [x, y] = origin;\r\n\r\n\t\treturn <g transform={`translate(${ x }, ${ y })`}>{this.props.children}</g>;\r\n\t}\r\n}\r\n\r\nChart.propTypes = {\r\n\theight: PropTypes.number,\r\n\torigin: PropTypes.oneOfType([\r\n\t\tPropTypes.array,\r\n\t\tPropTypes.func\r\n\t]),\r\n\tid: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\r\n\tyExtents: PropTypes.oneOfType([\r\n\t\tPropTypes.array,\r\n\t\tPropTypes.func\r\n\t]),\r\n\tyExtentsCalculator: function(props, propName, componentName) {\r\n\t\tif (isNotDefined(props.yExtents) && typeof props.yExtentsCalculator !== \"function\")\r\n\t\t\treturn new Error(\"yExtents or yExtentsCalculator must\"\r\n\t\t\t\t+ ` be present on ${componentName}. Validation failed.`);\r\n\t},\r\n\tonContextMenu: PropTypes.func,\r\n\tyScale: PropTypes.func,\r\n\r\n\tflipYScale: PropTypes.bool,\r\n\tpadding: PropTypes.oneOfType([\r\n\t\tPropTypes.number,\r\n\t\tPropTypes.shape({\r\n\t\t\ttop: PropTypes.number,\r\n\t\t\tbottom: PropTypes.number,\r\n\t\t})\r\n\t]),\r\n\tchildren: PropTypes.node,\r\n};\r\n\r\nChart.defaultProps = {\r\n\tid: 0,\r\n\torigin: [0, 0],\r\n\tpadding: 0,\r\n\tyScale: scaleLinear(),\r\n\tflipYScale: false,\r\n\tyPan: true,\r\n\tyPanEnabled: false,\r\n\tonContextMenu: noop,\r\n};\r\n\r\nChart.contextTypes = {\r\n\tchartConfig: PropTypes.array,\r\n\tsubscribe: PropTypes.func.isRequired,\r\n\tunsubscribe: PropTypes.func.isRequired,\r\n};\r\n\r\nChart.childContextTypes = {\r\n\tchartConfig: PropTypes.object.isRequired,\r\n\tchartId: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\r\n};\r\n\r\nexport default Chart;\r\n"],"mappings":"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"}