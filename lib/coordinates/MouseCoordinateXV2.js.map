{"version":3,"file":"MouseCoordinateXV2.js","names":["propTypes","xPosition","PropTypes","func","drawCoordinate","displayFormat","isRequired","at","oneOf","orient","text","shape","fontStyle","string","fontWeight","fontFamily","fontSize","number","fill","oneOfType","bg","stroke","strokeWidth","padding","left","right","top","bottom","dx","dy","defaultProps","MouseCoordinateXV2","props","drawOnCanvas","bind","ctx","moreProps","show","currentItem","getXCoordinateInfo","getMouseCanvas","Component","xAccessor","xValue","xScale","height","chartConfig","font","t","textWidth","measureText","width","y","x","Math","round","textFill","textAlign","sign","halfWidth","strokeStyle","fillStyle","lineWidth","beginPath","moveTo","lineTo","closePath","textBaseline","pad","fillText"],"sources":["../../../src/lib/coordinates/MouseCoordinateXV2.js"],"sourcesContent":["\r\n\r\nimport React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport GenericChartComponent from \"../GenericChartComponent\";\r\nimport { getMouseCanvas } from \"../GenericComponent\";\r\n\r\n\r\nconst propTypes = {\r\n\txPosition: PropTypes.func,\r\n\tdrawCoordinate: PropTypes.func,\r\n\tdisplayFormat: PropTypes.func.isRequired,\r\n\tat: PropTypes.oneOf([\"bottom\", \"top\"]),\r\n\torient: PropTypes.oneOf([\"bottom\", \"top\"]),\r\n\ttext: PropTypes.shape({\r\n\t\tfontStyle: PropTypes.string,\r\n\t\tfontWeight: PropTypes.string,\r\n\t\tfontFamily: PropTypes.string,\r\n\t\tfontSize: PropTypes.number,\r\n\t\tfill: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\r\n\t}),\r\n\tbg: PropTypes.shape({\r\n\t\tfill: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\r\n\t\tstroke: PropTypes.string,\r\n\t\tstrokeWidth: PropTypes.number,\r\n\t\tpadding: PropTypes.shape({\r\n\t\t\tleft: PropTypes.number,\r\n\t\t\tright: PropTypes.number,\r\n\t\t\ttop: PropTypes.number,\r\n\t\t\tbottom: PropTypes.number\r\n\t\t}),\r\n\t}),\r\n\tdx: PropTypes.number,\r\n\tdy: PropTypes.number\r\n};\r\n\r\nconst defaultProps = {\r\n\txPosition,\r\n\tdrawCoordinate,\r\n\tat: \"bottom\",\r\n\torient: \"bottom\",\r\n\r\n\ttext: {\r\n\t\tfontStyle: \"\",\r\n\t\tfontWeight: \"\",\r\n\t\tfontFamily: \"Helvetica Neue, Helvetica, Arial, sans-serif\",\r\n\t\tfontSize: 13,\r\n\t\tfill: \"rgb(35, 35, 35)\"\r\n\t},\r\n\tbg: {\r\n\t\tfill: \"rgb(255, 255, 255)\",\r\n\t\tstroke: \"rgb(35, 35, 35)\",\r\n\t\tstrokeWidth: 1,\r\n\t\tpadding: {\r\n\t\t\tleft: 7,\r\n\t\t\tright: 7,\r\n\t\t\ttop: 4,\r\n\t\t\tbottom: 4\r\n\t\t}\r\n\t},\r\n\tdx: 7,\r\n\tdy: 7\r\n};\r\n\r\nclass MouseCoordinateXV2 extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.drawOnCanvas = this.drawOnCanvas.bind(this);\r\n\t}\r\n\tdrawOnCanvas(ctx, moreProps) {\r\n\t\tconst { show, currentItem } = moreProps;\r\n\t\tconst { drawCoordinate } = this.props;\r\n\r\n\t\tif (show && currentItem != null) {\r\n\t\t\tconst shape = getXCoordinateInfo(ctx, this.props, moreProps);\r\n\t\t\tdrawCoordinate(ctx, shape, this.props, moreProps);\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<GenericChartComponent\r\n\t\t\t\tclip={false}\r\n\t\t\t\tcanvasDraw={this.drawOnCanvas}\r\n\t\t\t\tcanvasToDraw={getMouseCanvas}\r\n\t\t\t\tdrawOn={[\"mousemove\", \"pan\", \"drag\"]}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nMouseCoordinateXV2.defaultProps = defaultProps;\r\nMouseCoordinateXV2.propTypes = propTypes;\r\n\r\n\r\nfunction xPosition(props, moreProps) {\r\n\tconst { currentItem, xAccessor } = moreProps;\r\n\treturn xAccessor(currentItem);\r\n}\r\nfunction getXCoordinateInfo(ctx, props, moreProps) {\r\n\tconst { xPosition } = props;\r\n\tconst xValue = xPosition(props, moreProps);\r\n\tconst { at, displayFormat } = props;\r\n\tconst { text } = props;\r\n\tconst { xScale, chartConfig: { height } } = moreProps;\r\n\tctx.font = `${text.fontStyle} ${text.fontWeight} ${text.fontSize}px ${text.fontFamily}`;\r\n\r\n\tconst t = displayFormat(xValue);\r\n\tconst textWidth = ctx.measureText(t).width;\r\n\r\n\tconst y = at === \"bottom\" ? height : 0;\r\n\tconst x = Math.round(xScale(xValue));\r\n\r\n\treturn {\r\n\t\tx,\r\n\t\ty,\r\n\t\ttextWidth,\r\n\t\ttext: t\r\n\t};\r\n}\r\n\r\nfunction drawCoordinate(\r\n\tctx,\r\n\tshape,\r\n\tprops,\r\n\tmoreProps\r\n) {\r\n\tconst { x, y, textWidth, text } = shape;\r\n\tconst { orient, dx, dy } = props;\r\n\r\n\tconst {\r\n\t\tbg: { padding, fill, stroke, strokeWidth },\r\n\t\ttext: { fontSize, fill: textFill }\r\n\t} = props;\r\n\r\n\tctx.textAlign = \"center\";\r\n\r\n\tconst sign = orient === \"top\" ? -1 : 1;\r\n\tconst halfWidth = Math.round(textWidth / 2 + padding.right);\r\n\tconst height = Math.round(fontSize + padding.top + padding.bottom);\r\n\r\n\tctx.strokeStyle = typeof stroke === \"function\" ? stroke(moreProps, ctx) : stroke;\r\n\tctx.fillStyle = typeof fill === \"function\" ? fill(moreProps, ctx) : fill;\r\n\tctx.lineWidth = typeof strokeWidth === \"function\" ? strokeWidth(moreProps) : strokeWidth;\r\n\r\n\tctx.beginPath();\r\n\r\n\tctx.moveTo(x, y);\r\n\tctx.lineTo(x + dx, y + sign * dy);\r\n\tctx.lineTo(x + halfWidth, y + sign * dy);\r\n\tctx.lineTo(x + halfWidth, y + sign * (dy + height));\r\n\tctx.lineTo(x - halfWidth, y + sign * (dy + height));\r\n\tctx.lineTo(x - halfWidth, y + sign * dy);\r\n\tctx.lineTo(x - dx, y + sign * dy);\r\n\tctx.closePath();\r\n\tctx.stroke();\r\n\tctx.fill();\r\n\r\n\tctx.beginPath();\r\n\tctx.fillStyle = typeof textFill === \"function\" ? textFill(moreProps, ctx) : textFill;\r\n\r\n\tctx.textBaseline = orient === \"top\" ? \"alphabetic\" : \"hanging\";\r\n\tconst pad = orient === \"top\" ? padding.bottom : padding.top;\r\n\r\n\tctx.fillText(text, x, y + sign * (dy + pad + 2));\r\n}\r\n\r\nexport default MouseCoordinateXV2;"],"mappings":"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"}