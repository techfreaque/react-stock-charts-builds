{"version":3,"file":"EdgeCoordinateV3.js","names":["renderSVG","props","className","edge","helper","line","coordinateBase","coordinate","isDefined","opacity","stroke","getStrokeDasharray","strokeDasharray","x1","y1","x2","y2","rectWidth","rectHeight","arrowWidth","path","orient","edgeXRect","edgeYRect","strokeOpacity","strokeWidth","fill","edgeXText","edgeYText","textAnchor","fontFamily","fontSize","textFill","displayCoordinate","show","type","edgeAt","hideLine","lineStrokeDasharray","lineStroke","lineOpacity","rectRadius","dx","dy","undefined","drawOnCanvas","ctx","font","textBaseline","width","Math","round","measureText","dashArray","split","map","d","setLineDash","strokeStyle","hexToRGBA","lineWidth","beginPath","moveTo","lineTo","fillStyle","x","y","halfHeight","closePath","roundRect","rect","textAlign","fillText","height","radius","quadraticCurveTo"],"sources":["../../../src/lib/coordinates/EdgeCoordinateV3.js"],"sourcesContent":["\r\n\r\nimport React from \"react\";\r\n\r\nimport { hexToRGBA, isDefined, getStrokeDasharray } from \"../utils\";\r\n\r\n/* eslint-disable react/prop-types */\r\nexport function renderSVG(props) {\r\n\tconst { className } = props;\r\n\r\n\tconst edge = helper(props);\r\n\tif (edge === null) return null;\r\n\tlet line, coordinateBase, coordinate;\r\n\r\n\tif (isDefined(edge.line)) {\r\n\t\tline = (\r\n\t\t\t<line\r\n\t\t\t\tclassName=\"react-stockcharts-cross-hair\"\r\n\t\t\t\tstrokeOpacity={edge.line.opacity}\r\n\t\t\t\tstroke={edge.line.stroke}\r\n\t\t\t\tstrokeDasharray={getStrokeDasharray(edge.line.strokeDasharray)}\r\n\t\t\t\tx1={edge.line.x1}\r\n\t\t\t\ty1={edge.line.y1}\r\n\t\t\t\tx2={edge.line.x2}\r\n\t\t\t\ty2={edge.line.y2}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\tif (isDefined(edge.coordinateBase)) {\r\n\t\tconst { rectWidth, rectHeight, arrowWidth } = edge.coordinateBase;\r\n\r\n\t\tconst path =\r\n\t\t\tedge.orient === \"left\"\r\n\t\t\t\t? `M0,0L0,${rectHeight}L${rectWidth},${rectHeight}L${rectWidth +\r\n\t\t\t\t\t  arrowWidth},10L${rectWidth},0L0,0L0,0`\r\n\t\t\t\t: `M0,${arrowWidth}L${arrowWidth},${rectHeight}L${rectWidth +\r\n\t\t\t\t\t  arrowWidth},${rectHeight}L${rectWidth +\r\n\t\t\t\t\t  arrowWidth},0L${arrowWidth},0L0,${arrowWidth}`;\r\n\r\n\t\tcoordinateBase =\r\n\t\t\tedge.orient === \"left\" || edge.orient === \"right\" ? (\r\n\t\t\t\t<g\r\n\t\t\t\t\tkey={1}\r\n\t\t\t\t\ttransform={`translate(${edge.coordinateBase.edgeXRect},${\r\n\t\t\t\t\t\tedge.coordinateBase.edgeYRect\r\n\t\t\t\t\t})`}\r\n\t\t\t\t>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td={path}\r\n\t\t\t\t\t\tclassName=\"react-stockchart-text-background\"\r\n\t\t\t\t\t\theight={rectHeight}\r\n\t\t\t\t\t\twidth={rectWidth}\r\n\t\t\t\t\t\tstroke={edge.coordinateBase.stroke}\r\n\t\t\t\t\t\tstrokeLinejoin=\"miter\"\r\n\t\t\t\t\t\tstrokeOpacity={edge.coordinateBase.strokeOpacity}\r\n\t\t\t\t\t\tstrokeWidth={edge.coordinateBase.strokeWidth}\r\n\t\t\t\t\t\tfill={edge.coordinateBase.fill}\r\n\t\t\t\t\t\tfillOpacity={edge.coordinateBase.opacity}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</g>\r\n\t\t\t) : (\r\n\t\t\t\t<rect\r\n\t\t\t\t\tkey={1}\r\n\t\t\t\t\tclassName=\"react-stockchart-text-background\"\r\n\t\t\t\t\tx={edge.coordinateBase.edgeXRect}\r\n\t\t\t\t\ty={edge.coordinateBase.edgeYRect}\r\n\t\t\t\t\theight={rectHeight}\r\n\t\t\t\t\twidth={rectWidth}\r\n\t\t\t\t\tfill={edge.coordinateBase.fill}\r\n\t\t\t\t\topacity={edge.coordinateBase.opacity}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\r\n\t\tcoordinate = (\r\n\t\t\t<text\r\n\t\t\t\tkey={2}\r\n\t\t\t\tx={edge.coordinate.edgeXText}\r\n\t\t\t\ty={edge.coordinate.edgeYText}\r\n\t\t\t\ttextAnchor={edge.coordinate.textAnchor}\r\n\t\t\t\tfontFamily={edge.coordinate.fontFamily}\r\n\t\t\t\tfontSize={edge.coordinate.fontSize}\r\n\t\t\t\tdy=\".32em\"\r\n\t\t\t\tfill={edge.coordinate.textFill}\r\n\t\t\t>\r\n\t\t\t\t{edge.coordinate.displayCoordinate}\r\n\t\t\t</text>\r\n\t\t);\r\n\t}\r\n\treturn (\r\n\t\t<g className={className}>\r\n\t\t\t{line}\r\n\t\t\t{coordinateBase}\r\n\t\t\t{coordinate}\r\n\t\t</g>\r\n\t);\r\n}\r\n/* eslint-enable react/prop-types */\r\n\r\nfunction helper(props) {\r\n\tconst {\r\n\t\tcoordinate: displayCoordinate,\r\n\t\tshow,\r\n\t\ttype,\r\n\t\torient,\r\n\t\tedgeAt,\r\n\t\thideLine,\r\n\t\tlineStrokeDasharray\r\n\t} = props;\r\n\tconst {\r\n\t\tfill,\r\n\t\topacity,\r\n\t\tfontFamily,\r\n\t\tfontSize,\r\n\t\ttextFill,\r\n\t\tlineStroke,\r\n\t\tlineOpacity\r\n\t} = props;\r\n\tconst { stroke, strokeOpacity, strokeWidth } = props;\r\n\tconst { arrowWidth, rectWidth, rectHeight, rectRadius } = props;\r\n\tconst { x1, y1, x2, y2, dx } = props;\r\n\r\n\tif (!show) return null;\r\n\r\n\tlet coordinateBase, coordinate;\r\n\tif (isDefined(displayCoordinate)) {\r\n\t\tconst textAnchor = \"middle\"; // TODO: Below it is necessary to implement logic for the possibility of alignment from the right or from the left.\r\n\r\n\t\tlet edgeXRect, edgeYRect, edgeXText, edgeYText;\r\n\r\n\t\tif (type === \"horizontal\") {\r\n\t\t\tedgeXRect =\r\n\t\t\t\tdx + (orient === \"right\" ? edgeAt + 1 : edgeAt - rectWidth - 1);\r\n\t\t\tedgeYRect = y1 - rectHeight / 2 - strokeWidth;\r\n\t\t\tedgeXText =\r\n\t\t\t\tdx +\r\n\t\t\t\t(orient === \"right\"\r\n\t\t\t\t\t? edgeAt + rectWidth / 2\r\n\t\t\t\t\t: edgeAt - rectWidth / 2);\r\n\t\t\tedgeYText = y1;\r\n\t\t} else {\r\n\t\t\tconst dy = orient === \"bottom\" ? strokeWidth - 1 : -strokeWidth + 1;\r\n\t\t\tedgeXRect = x1 - rectWidth / 2;\r\n\t\t\tedgeYRect =\r\n\t\t\t\t(orient === \"bottom\" ? edgeAt : edgeAt - rectHeight) + dy;\r\n\t\t\tedgeXText = x1;\r\n\t\t\tedgeYText =\r\n\t\t\t\t(orient === \"bottom\"\r\n\t\t\t\t\t? edgeAt + rectHeight / 2\r\n\t\t\t\t\t: edgeAt - rectHeight / 2) + dy;\r\n\t\t}\r\n\r\n\t\tcoordinateBase = {\r\n\t\t\tedgeXRect,\r\n\t\t\tedgeYRect,\r\n\t\t\trectHeight: rectHeight + strokeWidth,\r\n\t\t\trectWidth,\r\n\t\t\trectRadius,\r\n\t\t\tfill,\r\n\t\t\topacity,\r\n\t\t\tarrowWidth,\r\n\t\t\tstroke,\r\n\t\t\tstrokeOpacity,\r\n\t\t\tstrokeWidth\r\n\t\t};\r\n\t\tcoordinate = {\r\n\t\t\tedgeXText,\r\n\t\t\tedgeYText,\r\n\t\t\ttextAnchor,\r\n\t\t\tfontFamily,\r\n\t\t\tfontSize,\r\n\t\t\ttextFill,\r\n\t\t\tdisplayCoordinate\r\n\t\t};\r\n\t}\r\n\r\n\tconst line = hideLine\r\n\t\t? undefined\r\n\t\t: {\r\n\t\t\topacity: lineOpacity,\r\n\t\t\tstroke: lineStroke,\r\n\t\t\tstrokeDasharray: lineStrokeDasharray,\r\n\t\t\tx1,\r\n\t\t\ty1,\r\n\t\t\tx2,\r\n\t\t\ty2\r\n\t\t};\r\n\r\n\treturn {\r\n\t\tcoordinateBase,\r\n\t\tcoordinate,\r\n\t\tline,\r\n\t\torient\r\n\t};\r\n}\r\n\r\nexport function drawOnCanvas(ctx, props) {\r\n\tconst { fontSize, fontFamily } = props;\r\n\r\n\tctx.font = `${fontSize}px ${fontFamily}`;\r\n\tctx.textBaseline = \"middle\";\r\n\tconst width = Math.round(ctx.measureText(props.coordinate).width + 10);\r\n\r\n\tconst edge = helper({ ...props, rectWidth: width });\r\n\r\n\tif (edge === null) return;\r\n\r\n\tif (isDefined(edge.line)) {\r\n\t\tconst dashArray = getStrokeDasharray(edge.line.strokeDasharray)\r\n\t\t\t.split(\",\")\r\n\t\t\t.map(d => +d);\r\n\t\tctx.setLineDash(dashArray);\r\n\t\tctx.strokeStyle = hexToRGBA(edge.line.stroke, edge.line.opacity);\r\n\t\tctx.lineWidth = 1;\r\n\t\tctx.beginPath();\r\n\t\tctx.moveTo(edge.line.x1, edge.line.y1);\r\n\t\tctx.lineTo(edge.line.x2, edge.line.y2);\r\n\t\tctx.stroke();\r\n\t}\r\n\r\n\tctx.setLineDash([]);\r\n\tif (isDefined(edge.coordinateBase)) {\r\n\t\tconst {\r\n\t\t\trectWidth,\r\n\t\t\trectHeight,\r\n\t\t\trectRadius,\r\n\t\t\tarrowWidth\r\n\t\t} = edge.coordinateBase;\r\n\r\n\t\tctx.fillStyle = hexToRGBA(\r\n\t\t\tedge.coordinateBase.fill,\r\n\t\t\tedge.coordinateBase.opacity\r\n\t\t);\r\n\t\tif (isDefined(edge.coordinateBase.stroke)) {\r\n\t\t\tctx.strokeStyle = hexToRGBA(\r\n\t\t\t\tedge.coordinateBase.stroke,\r\n\t\t\t\tedge.coordinateBase.strokeOpacity\r\n\t\t\t);\r\n\t\t\tctx.lineWidth = edge.coordinateBase.strokeWidth;\r\n\t\t}\r\n\r\n\t\tlet x = edge.coordinateBase.edgeXRect;\r\n\t\tconst y = edge.coordinateBase.edgeYRect;\r\n\t\tconst halfHeight = rectHeight / 2;\r\n\r\n\t\tctx.beginPath();\r\n\t\tif (edge.orient === \"right\") {\r\n\t\t\tx -= arrowWidth;\r\n\t\t\tctx.moveTo(x, y + halfHeight);\r\n\t\t\tctx.lineTo(x + arrowWidth, y);\r\n\t\t\tctx.lineTo(x + rectWidth + arrowWidth, y);\r\n\t\t\tctx.lineTo(x + rectWidth + arrowWidth, y + rectHeight);\r\n\t\t\tctx.lineTo(x + arrowWidth, y + rectHeight);\r\n\t\t\tctx.closePath();\r\n\t\t} else if (edge.orient === \"left\") {\r\n\t\t\t// x += arrowWidth;\r\n\t\t\tctx.moveTo(x, y);\r\n\t\t\tctx.lineTo(x + rectWidth, y);\r\n\t\t\tctx.lineTo(x + rectWidth + arrowWidth, y + halfHeight);\r\n\t\t\tctx.lineTo(x + rectWidth, y + rectHeight);\r\n\t\t\tctx.lineTo(x, y + rectHeight);\r\n\t\t\tctx.closePath();\r\n\t\t} else {\r\n\t\t\t// console.error(x, y, rectWidth, rectHeight)\r\n\t\t\tif (rectRadius) {\r\n\t\t\t\troundRect(ctx, x, y, rectWidth, rectHeight, 3);\r\n\t\t\t} else {\r\n\t\t\t\tctx.rect(x, y, rectWidth, rectHeight);\r\n\t\t\t}\r\n\t\t}\r\n\t\tctx.fill();\r\n\r\n\t\tif (isDefined(edge.coordinateBase.stroke)) {\r\n\t\t\tctx.stroke();\r\n\t\t}\r\n\r\n\t\tctx.fillStyle = edge.coordinate.textFill;\r\n\t\tctx.textAlign =\r\n\t\t\tedge.coordinate.textAnchor === \"middle\"\r\n\t\t\t\t? \"center\"\r\n\t\t\t\t: edge.coordinate.textAnchor;\r\n\t\tctx.fillText(\r\n\t\t\tedge.coordinate.displayCoordinate,\r\n\t\t\tedge.coordinate.edgeXText,\r\n\t\t\tedge.coordinate.edgeYText\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction roundRect(ctx, x, y, width, height, radius) {\r\n\tctx.beginPath();\r\n\tctx.moveTo(x + radius, y);\r\n\tctx.lineTo(x + width - radius, y);\r\n\tctx.quadraticCurveTo(x + width, y, x + width, y + radius);\r\n\tctx.lineTo(x + width, y + height - radius);\r\n\tctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\r\n\tctx.lineTo(x + radius, y + height);\r\n\tctx.quadraticCurveTo(x, y + height, x, y + height - radius);\r\n\tctx.lineTo(x, y + radius);\r\n\tctx.quadraticCurveTo(x, y, x + radius, y);\r\n\tctx.closePath();\r\n}\r\n\r\n// export default EdgeCoordinate;\r\n"],"mappings":"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"}