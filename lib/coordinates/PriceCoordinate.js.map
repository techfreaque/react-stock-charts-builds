{"version":3,"file":"PriceCoordinate.js","names":["PriceCoordinate","props","renderSVG","bind","drawOnCanvas","ctx","moreProps","helper","getAxisCanvas","Component","propTypes","displayFormat","PropTypes","func","isRequired","yAxisPad","number","rectWidth","rectHeight","orient","oneOf","at","price","dx","arrowWidth","opacity","lineOpacity","lineStroke","string","fontFamily","fontSize","fill","oneOfType","strokeDasharray","strokeDashTypes","stroke","strokeOpacity","strokeWidth","textFill","defaultProps","width","yScale","chartConfig","domain","lowerYValue","upperYValue","x1","x2","edgeAt","type","y","show","coordinate","invert","hideLine","coordinateProps","lineStrokeDasharray","functor","y1","y2"],"sources":["../../../src/lib/coordinates/PriceCoordinate.js"],"sourcesContent":["\r\n\r\nimport React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { drawOnCanvas, renderSVG } from \"./EdgeCoordinateV3\";\r\nimport GenericChartComponent from \"../GenericChartComponent\";\r\nimport { getAxisCanvas } from \"../GenericComponent\";\r\nimport { functor, strokeDashTypes } from \"../utils\";\r\n\r\nclass PriceCoordinate extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.renderSVG = this.renderSVG.bind(this);\r\n\t\tthis.drawOnCanvas = this.drawOnCanvas.bind(this);\r\n\t}\r\n\tdrawOnCanvas(ctx, moreProps) {\r\n\t\tconst props = helper(this.props, moreProps);\r\n\t\tdrawOnCanvas(ctx, props);\r\n\t}\r\n\trenderSVG(moreProps) {\r\n\t\tconst props = helper(this.props, moreProps);\r\n\t\treturn renderSVG(props);\r\n\t}\r\n\trender() {\r\n\t\treturn <GenericChartComponent\r\n\t\t\tclip={false}\r\n\t\t\tsvgDraw={this.renderSVG}\r\n\t\t\tcanvasDraw={this.drawOnCanvas}\r\n\t\t\tcanvasToDraw={getAxisCanvas}\r\n\t\t\tdrawOn={[\"pan\"]}\r\n\t\t/>;\r\n\t}\r\n}\r\n\r\nPriceCoordinate.propTypes = {\r\n\tdisplayFormat: PropTypes.func.isRequired,\r\n\tyAxisPad: PropTypes.number,\r\n\trectWidth: PropTypes.number,\r\n\trectHeight: PropTypes.number,\r\n\torient: PropTypes.oneOf([\"bottom\", \"top\", \"left\", \"right\"]),\r\n\tat: PropTypes.oneOf([\"bottom\", \"top\", \"left\", \"right\"]),\r\n\tprice: PropTypes.number,\r\n\tdx: PropTypes.number,\r\n\tarrowWidth: PropTypes.number,\r\n\topacity: PropTypes.number,\r\n\tlineOpacity: PropTypes.number,\r\n\tlineStroke: PropTypes.string,\r\n\tfontFamily: PropTypes.string,\r\n\tfontSize: PropTypes.number,\r\n\tfill: PropTypes.oneOfType([\r\n\t\tPropTypes.string,\r\n\t\tPropTypes.func,\r\n\t]),\r\n\tstrokeDasharray: PropTypes.oneOf(strokeDashTypes),\r\n\tstroke: PropTypes.string,\r\n\tstrokeOpacity: PropTypes.number,\r\n\tstrokeWidth: PropTypes.number,\r\n\ttextFill: PropTypes.oneOfType([\r\n\t\tPropTypes.string,\r\n\t\tPropTypes.func,\r\n\t]),\r\n};\r\n\r\nPriceCoordinate.defaultProps = {\r\n\tyAxisPad: 0,\r\n\trectWidth: 50,\r\n\trectHeight: 20,\r\n\torient: \"left\",\r\n\tat: \"left\",\r\n\tprice: 0,\r\n\tdx: 0,\r\n\tarrowWidth: 0,\r\n\tfill: \"#BAB8b8\",\r\n\topacity: 1,\r\n\tlineOpacity: 0.2,\r\n\tlineStroke: \"#000000\",\r\n\tfontFamily: \"Helvetica Neue, Helvetica, Arial, sans-serif\",\r\n\tfontSize: 13,\r\n\ttextFill: \"#FFFFFF\",\r\n\tstrokeOpacity: 1,\r\n\tstrokeWidth: 1,\r\n\tstrokeDasharray: \"Solid\",\r\n};\r\n\r\nfunction helper(props, moreProps) {\r\n\tconst { width } = moreProps;\r\n\tconst { chartConfig: { yScale } } = moreProps;\r\n\tconst [lowerYValue, upperYValue] = yScale.domain();\r\n\r\n\tconst { price, stroke, strokeDasharray, strokeOpacity, strokeWidth } = props;\r\n\tconst { orient, at, rectWidth, rectHeight, displayFormat, dx } = props;\r\n\tconst { fill, opacity, fontFamily, fontSize, textFill, arrowWidth, lineOpacity, lineStroke } = props;\r\n\r\n\tconst x1 = 0, x2 = width;\r\n\tconst edgeAt = (at === \"right\")\r\n\t\t? width\r\n\t\t: 0;\r\n\r\n\tconst type = \"horizontal\";\r\n\r\n\tconst y = yScale(price);\r\n\tconst show = (price <= upperYValue && price >= lowerYValue);\r\n\r\n\tconst coordinate = displayFormat(yScale.invert(y));\r\n\tconst hideLine = false;\r\n\r\n\tconst coordinateProps = {\r\n\t\tcoordinate,\r\n\t\tshow,\r\n\t\ttype,\r\n\t\torient,\r\n\t\tedgeAt,\r\n\t\thideLine,\r\n\t\tlineOpacity,\r\n\t\tlineStroke,\r\n\t\tlineStrokeDasharray: strokeDasharray,\r\n\t\tstroke,\r\n\t\tstrokeOpacity,\r\n\t\tstrokeWidth,\r\n\t\tfill: functor(fill)(price),\r\n\t\ttextFill: functor(textFill)(price),\r\n\t\topacity, fontFamily, fontSize,\r\n\t\trectWidth,\r\n\t\trectHeight,\r\n\t\tarrowWidth,\r\n\t\tdx,\r\n\t\tx1,\r\n\t\tx2,\r\n\t\ty1: y,\r\n\t\ty2: y,\r\n\t};\r\n\treturn coordinateProps;\r\n}\r\n\r\nexport default PriceCoordinate;\r\n"],"mappings":"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"}