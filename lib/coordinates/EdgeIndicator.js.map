{"version":3,"file":"EdgeIndicator.js","names":["EdgeIndicator","props","renderSVG","bind","drawOnCanvas","ctx","moreProps","edge","helper","getAxisCanvas","Component","propTypes","yAccessor","PropTypes","func","type","oneOf","className","string","fill","oneOfType","lineStroke","textFill","itemType","isRequired","orient","edgeAt","displayFormat","rectHeight","number","rectWidth","arrowWidth","lineStrokeDasharray","strokeDashTypes","defaultProps","format","yAxisPad","fontFamily","fontSize","dx","hideLine","opacity","stroke","noop","strokeOpacity","strokeWidth","lineOpacity","plotData","item","first","last","isDefined","getEdge","edgeType","xScale","yScale","chartConfig","xAccessor","width","yValue","xValue","x1","Math","round","y1","left","right","edgeX","coordinate","show","functor","x2","y2"],"sources":["../../../src/lib/coordinates/EdgeIndicator.js"],"sourcesContent":["\r\n\r\nimport React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { format } from \"d3-format\";\r\n\r\nimport { drawOnCanvas, renderSVG } from \"./EdgeCoordinateV3\";\r\nimport GenericChartComponent from \"../GenericChartComponent\";\r\nimport { getAxisCanvas } from \"../GenericComponent\";\r\n\r\nimport { first, last, isDefined, functor, noop, strokeDashTypes } from \"../utils\";\r\n\r\nclass EdgeIndicator extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.renderSVG = this.renderSVG.bind(this);\r\n\t\tthis.drawOnCanvas = this.drawOnCanvas.bind(this);\r\n\t}\r\n\tdrawOnCanvas(ctx, moreProps) {\r\n\t\tconst edge = helper(this.props, moreProps);\r\n\t\tconst props = {\r\n\t\t\t...this.props,\r\n\t\t\t...edge,\r\n\t\t};\r\n\t\tdrawOnCanvas(ctx, props);\r\n\t}\r\n\trenderSVG(moreProps) {\r\n\t\tconst edge = helper(this.props, moreProps);\r\n\t\tconst props = {\r\n\t\t\t...this.props,\r\n\t\t\t...edge,\r\n\t\t};\r\n\t\treturn renderSVG(props);\r\n\t}\r\n\trender() {\r\n\t\treturn <GenericChartComponent\r\n\t\t\tedgeClip\r\n\t\t\tclip={false}\r\n\t\t\tsvgDraw={this.renderSVG}\r\n\t\t\tcanvasDraw={this.drawOnCanvas}\r\n\t\t\tcanvasToDraw={getAxisCanvas}\r\n\t\t\tdrawOn={[\"pan\"]}\r\n\t\t/>;\r\n\t}\r\n}\r\n\r\nEdgeIndicator.propTypes = {\r\n\tyAccessor: PropTypes.func,\r\n\r\n\ttype: PropTypes.oneOf([\"horizontal\"]),\r\n\tclassName: PropTypes.string,\r\n\tfill: PropTypes.oneOfType([\r\n\t\tPropTypes.string,\r\n\t\tPropTypes.func,\r\n\t]),\r\n\tlineStroke: PropTypes.oneOfType([\r\n\t\tPropTypes.string,\r\n\t\tPropTypes.func,\r\n\t]),\r\n\ttextFill: PropTypes.oneOfType([\r\n\t\tPropTypes.string,\r\n\t\tPropTypes.func,\r\n\t]),\r\n\titemType: PropTypes.oneOf([\"first\", \"last\"]).isRequired,\r\n\torient: PropTypes.oneOf([\"left\", \"right\"]),\r\n\tedgeAt: PropTypes.oneOf([\"left\", \"right\"]),\r\n\tdisplayFormat: PropTypes.func,\r\n\trectHeight: PropTypes.number,\r\n\trectWidth: PropTypes.number,\r\n\tarrowWidth: PropTypes.number,\r\n\tlineStrokeDasharray: PropTypes.oneOf(strokeDashTypes),\r\n};\r\n\r\nEdgeIndicator.defaultProps = {\r\n\tclassName: \"react-stockcharts-edgeindicator\",\r\n\r\n\ttype: \"horizontal\",\r\n\torient: \"left\",\r\n\tedgeAt: \"left\",\r\n\ttextFill: \"#FFFFFF\",\r\n\tdisplayFormat: format(\".2f\"),\r\n\tyAxisPad: 0,\r\n\trectHeight: 20,\r\n\trectWidth: 50,\r\n\tarrowWidth: 10,\r\n\tfontFamily: \"Helvetica Neue, Helvetica, Arial, sans-serif\",\r\n\tfontSize: 13,\r\n\tdx: 0,\r\n\thideLine: false,\r\n\tfill: \"#8a8a8a\",\r\n\topacity: 1,\r\n\r\n\tstroke: noop,\r\n\tstrokeOpacity: 1,\r\n\tstrokeWidth: 3,\r\n\tlineStroke: \"#000000\",\r\n\tlineOpacity: 0.3,\r\n\tlineStrokeDasharray: \"ShortDash\",\r\n};\r\n\r\nfunction helper(props, moreProps) {\r\n\tconst { itemType, yAccessor } = props;\r\n\tconst { plotData } = moreProps;\r\n\r\n\tconst item = itemType === \"first\"\r\n\t\t? first(plotData, yAccessor)\r\n\t\t: last(plotData, yAccessor);\r\n\r\n\t// var currentItem = ChartDataUtil.getCurrentItemForChartNew(currentItems, forChart);\r\n\tconst edge = isDefined(item)\r\n\t\t? getEdge(props, moreProps, item)\r\n\t\t: null;\r\n\r\n\treturn edge;\r\n}\r\n\r\nfunction getEdge(props, moreProps, item) {\r\n\tconst { type: edgeType, displayFormat, edgeAt, yAxisPad, orient, lineStroke } = props;\r\n\r\n\tconst { yAccessor, fill, textFill, rectHeight, rectWidth, arrowWidth } = props;\r\n\tconst { fontFamily, fontSize } = props;\r\n\tconst { stroke } = props;\r\n\r\n\tconst { xScale, chartConfig: { yScale }, xAccessor, width } = moreProps;\r\n\r\n\tconst yValue = yAccessor(item),\r\n\t\txValue = xAccessor(item);\r\n\r\n\tconst x1 = Math.round(xScale(xValue)),\r\n\t\ty1 = Math.round(yScale(yValue));\r\n\r\n\tconst [left, right] = [0, width];\r\n\tconst edgeX = edgeAt === \"left\"\r\n\t\t? left - yAxisPad\r\n\t\t: right + yAxisPad;\r\n\r\n\treturn {\r\n\t\t// ...props,\r\n\t\tcoordinate: displayFormat(yValue),\r\n\t\tshow: true,\r\n\t\ttype: edgeType,\r\n\t\torient,\r\n\t\tedgeAt: edgeX,\r\n\t\tfill: functor(fill)(item),\r\n\t\tlineStroke: functor(lineStroke)(item),\r\n\t\tstroke: functor(stroke)(item),\r\n\t\tfontFamily, fontSize,\r\n\t\ttextFill: functor(textFill)(item),\r\n\t\trectHeight, rectWidth, arrowWidth,\r\n\t\tx1,\r\n\t\ty1,\r\n\t\tx2: right,\r\n\t\ty2: y1,\r\n\t};\r\n}\r\n\r\nexport default EdgeIndicator;\r\n"],"mappings":"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"}